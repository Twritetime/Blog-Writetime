<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://blog.writetime.top/posts/Java/%E5%85%AB%E8%82%A1%E6%96%87.html"><meta property="og:site_name" content="Twritetime"><meta property="og:title" content="å…«è‚¡æ–‡"><meta property="og:type" content="article"><meta property="og:image" content="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324526.jpeg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-12-21T14:07:24.000Z"><meta property="article:author" content="Twritetime"><meta property="article:tag" content="çº¢"><meta property="article:published_time" content="2024-10-27T00:00:00.000Z"><meta property="article:modified_time" content="2024-12-21T14:07:24.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"å…«è‚¡æ–‡","image":["https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324526.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324528.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324529.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324530.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324531.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324532.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324533.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324534.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324535.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324536.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324537.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324538.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324539.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324540.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324541.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324542.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324543.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324544.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324545.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324546.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324547.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324548.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324549.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324550.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324551.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324552.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324553.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324554.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324555.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324556.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324557.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324558.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324559.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324560.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324561.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324562.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324563.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324564.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324565.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324566.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324567.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324568.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324569.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324570.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324571.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324572.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324573.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324574.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324575.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324576.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324577.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324578.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324579.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324580.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324581.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324582.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324583.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324584.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324585.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324586.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324587.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324588.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324589.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324590.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324591.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324592.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324593.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324594.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324595.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324596.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324597.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324598.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324599.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324600.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324601.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324602.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324603.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324604.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324605.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324606.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324607.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324608.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324609.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324610.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324611.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324612.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324613.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324614.jpeg","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324615.webp","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324616.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324617.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324618.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324619.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324620.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324621.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324622.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324623.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324624.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324625.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324626.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324627.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324628.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324629.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324630.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324631.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324632.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324633.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324634.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324635.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324636.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324637.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324638.png","https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324639.png"],"datePublished":"2024-10-27T00:00:00.000Z","dateModified":"2024-12-21T14:07:24.000Z","author":[{"@type":"Person","name":"Twritetime"}]}</script><title>å…«è‚¡æ–‡ | Twritetime</title><meta name="description" content="Twritetimeçš„åšå®¢">
    <link rel="preload" href="/assets/style-D0Fpk87X.css" as="style"><link rel="stylesheet" href="/assets/style-D0Fpk87X.css">
    <link rel="modulepreload" href="/assets/app-BGV7llRK.js"><link rel="modulepreload" href="/assets/å…«è‚¡æ–‡.html-DSlxVcuH.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/intro.html-NWUxExsC.js" as="script"><link rel="prefetch" href="/assets/index.html-CFtAgVXn.js" as="script"><link rel="prefetch" href="/assets/disable.html-BRdclCT6.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-BtnWxltl.js" as="script"><link rel="prefetch" href="/assets/layout.html-BqHeDYNb.js" as="script"><link rel="prefetch" href="/assets/markdown.html-C6Dr8wrs.js" as="script"><link rel="prefetch" href="/assets/page.html-pCBc2uJ-.js" as="script"><link rel="prefetch" href="/assets/index.html-CoKLlPy4.js" as="script"><link rel="prefetch" href="/assets/cherry.html-YVPPrYtQ.js" as="script"><link rel="prefetch" href="/assets/dragonfruit.html-DBr56rf8.js" as="script"><link rel="prefetch" href="/assets/strawberry.html-ZAxQcvfu.js" as="script"><link rel="prefetch" href="/assets/tomato.html-C-AU5C9K.js" as="script"><link rel="prefetch" href="/assets/1.html-C8Jp9seg.js" as="script"><link rel="prefetch" href="/assets/2.html-vxXFHtpe.js" as="script"><link rel="prefetch" href="/assets/3.html-CJYBBMFI.js" as="script"><link rel="prefetch" href="/assets/4.html-C459k8ZS.js" as="script"><link rel="prefetch" href="/assets/é¢ç».html-BA_ADx_H.js" as="script"><link rel="prefetch" href="/assets/1.html-D67fXjVU.js" as="script"><link rel="prefetch" href="/assets/2.html-C1TbRrJI.js" as="script"><link rel="prefetch" href="/assets/3.html-BLMinegH.js" as="script"><link rel="prefetch" href="/assets/4.html-D4VBx5Ml.js" as="script"><link rel="prefetch" href="/assets/å»ºç«™.html-DdqpxLUs.js" as="script"><link rel="prefetch" href="/assets/WhatsAppæ³¨å†Œ.html-Be56v5CV.js" as="script"><link rel="prefetch" href="/assets/404.html-BJbv0BRH.js" as="script"><link rel="prefetch" href="/assets/index.html-DgHNr-fn.js" as="script"><link rel="prefetch" href="/assets/index.html-CLnalMkv.js" as="script"><link rel="prefetch" href="/assets/index.html-B7w7BRu9.js" as="script"><link rel="prefetch" href="/assets/index.html-13b1kCaw.js" as="script"><link rel="prefetch" href="/assets/index.html-iXF9t6XP.js" as="script"><link rel="prefetch" href="/assets/index.html-W0cXKK8e.js" as="script"><link rel="prefetch" href="/assets/index.html-JpfC1ttT.js" as="script"><link rel="prefetch" href="/assets/index.html-DsflnSHW.js" as="script"><link rel="prefetch" href="/assets/index.html-BUYtyb0W.js" as="script"><link rel="prefetch" href="/assets/index.html-CUR839zB.js" as="script"><link rel="prefetch" href="/assets/index.html-B_P-DKgf.js" as="script"><link rel="prefetch" href="/assets/index.html-Cgyi8Zkp.js" as="script"><link rel="prefetch" href="/assets/index.html-DiWCQM8K.js" as="script"><link rel="prefetch" href="/assets/index.html-DdYypeqa.js" as="script"><link rel="prefetch" href="/assets/index.html-7RE7LE2C.js" as="script"><link rel="prefetch" href="/assets/index.html-RensScwf.js" as="script"><link rel="prefetch" href="/assets/index.html-9OKAmLzU.js" as="script"><link rel="prefetch" href="/assets/index.html-TiytRxhG.js" as="script"><link rel="prefetch" href="/assets/index.html-BgEGSGur.js" as="script"><link rel="prefetch" href="/assets/index.html-B3mJy1ZF.js" as="script"><link rel="prefetch" href="/assets/index.html-BLRyE7wj.js" as="script"><link rel="prefetch" href="/assets/index.html-DYBwJqlh.js" as="script"><link rel="prefetch" href="/assets/index.html-BW0MjiXc.js" as="script"><link rel="prefetch" href="/assets/index.html-Dav7-TGa.js" as="script"><link rel="prefetch" href="/assets/index.html-D9Konxkk.js" as="script"><link rel="prefetch" href="/assets/index.html-CLrJoK3E.js" as="script"><link rel="prefetch" href="/assets/index.html-BYUuARW3.js" as="script"><link rel="prefetch" href="/assets/index.html-CMLjirEX.js" as="script"><link rel="prefetch" href="/assets/index.html-D6XfuCFw.js" as="script"><link rel="prefetch" href="/assets/index.html-DE1kP7_U.js" as="script"><link rel="prefetch" href="/assets/index.html-bpRQoX9d.js" as="script"><link rel="prefetch" href="/assets/index.html-_K1WPNjh.js" as="script"><link rel="prefetch" href="/assets/index.html-Bhp3NBMT.js" as="script"><link rel="prefetch" href="/assets/index.html-ByahxJzE.js" as="script"><link rel="prefetch" href="/assets/index.html-TMzBkZCW.js" as="script"><link rel="prefetch" href="/assets/index.html-7tmqLLEk.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH--wJWd6t8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="https://gcore.jsdelivr.net/gh/Twritetime/imgs@main/avatar.png" alt><!----><span class="vp-site-name hide-in-pad">Twritetime</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="åšå®¢"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->åšå®¢<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/demo/" aria-label="ä¸»è¦åŠŸèƒ½ä¸é…ç½®æ¼”ç¤º"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><!--]-->ä¸»è¦åŠŸèƒ½ä¸é…ç½®æ¼”ç¤º<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ–‡ç« "><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>æ–‡ç« <!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Java</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/posts/Java/%E5%85%AB%E8%82%A1%E6%96%87.html" aria-label="å…«è‚¡æ–‡"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å…«è‚¡æ–‡<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/Java/%E9%9D%A2%E7%BB%8F.html" aria-label="é¢ç»"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->é¢ç»<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">æ—¥å¸¸</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/%E6%97%A5%E5%B8%B8/%E5%BB%BA%E7%AB%99.html" aria-label="å»ºç«™"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å»ºç«™<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å¤–è´¸</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/%E5%A4%96%E8%B4%B8/WhatsApp%E6%B3%A8%E5%86%8C.html" aria-label="WhatsApp"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->WhatsApp<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://theme-hope.vuejs.press/zh/" aria-label="V2 æ–‡æ¡£" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><!--]-->V2 æ–‡æ¡£<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Twritetime" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="åšå®¢"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->åšå®¢<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="å¦‚ä½•ä½¿ç”¨"><!---->å¦‚ä½•ä½¿ç”¨<!----></a><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/demo/layout.html" aria-label="å¸ƒå±€"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-object-group" style=""></span><!--]-->å¸ƒå±€<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/demo/markdown.html" aria-label="Markdown å±•ç¤º"><!--[--><span class="font-icon icon fa-fw fa-sm fab fa-markdown" style=""></span><!--]-->Markdown å±•ç¤º<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/demo/page.html" aria-label="é¡µé¢é…ç½®"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-file" style=""></span><!--]-->é¡µé¢é…ç½®<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/demo/disable.html" aria-label="å¸ƒå±€ä¸åŠŸèƒ½ç¦ç”¨"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-gears" style=""></span><!--]-->å¸ƒå±€ä¸åŠŸèƒ½ç¦ç”¨<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/demo/encrypt.html" aria-label="å¯†ç åŠ å¯†çš„æ–‡ç« "><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-lock" style=""></span><!--]-->å¯†ç åŠ å¯†çš„æ–‡ç« <!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ–‡ç« </span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/posts/strawberry.html" aria-label="è‰è“"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è‰è“<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/tomato.html" aria-label="ç•ªèŒ„"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->ç•ªèŒ„<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/dragonfruit.html" aria-label="ç«é¾™æœ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->ç«é¾™æœ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ—¥å¸¸</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å¤–è´¸</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/cherry.html" aria-label="æ¨±æ¡ƒ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ¨±æ¡ƒ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Apple</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Banana</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Java</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/posts/Java/%E5%85%AB%E8%82%A1%E6%96%87.html" aria-label="å…«è‚¡æ–‡"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->å…«è‚¡æ–‡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Java/%E9%9D%A2%E7%BB%8F.html" aria-label="é¢ç»"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->é¢ç»<!----></a></li></ul></section></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="ä»‹ç»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->ä»‹ç»é¡µ<!----></a></li><li><a class="auto-link external-link vp-sidebar-link" href="https://ecosystem.vuejs.press/zh/plugins/markdown/revealjs/demo.html" aria-label="å¹»ç¯ç‰‡" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-person-chalkboard" style=""></span><!--]-->å¹»ç¯ç‰‡<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>å…«è‚¡æ–‡</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Twritetime</span></span><span property="author" content="Twritetime"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024å¹´10æœˆ27æ—¥</span><meta property="datePublished" content="2024-10-27T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 105 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT105M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">Java</span><!--]--><meta property="articleSection" content="Java"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color6 clickable" role="navigation">çº¢</span><!--]--><meta property="keywords" content="çº¢"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#typora-root-url-images">typora-root-url: ./..\images</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€åŸºç¡€">ä¸€ã€åŸºç¡€</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«">1.  é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§">2. é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-string-stringbuffer-stringbuilder-åŒºåˆ«">3. String/StringBuffer/StringBuilder åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-å’Œ-equals-çš„åŒºåˆ«">4. == å’Œ equals çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«">5. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-é‡å†™å’Œé‡è½½çš„åŒºåˆ«">6. é‡å†™å’Œé‡è½½çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«">7. æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«">8. å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-io-æµ">9. IO æµ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-åå°„">10. åå°„</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-sleep-å’Œ-wait-çš„åŒºåˆ«">11. sleep å’Œ wait çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-jvm-å†…å­˜æ¨¡å‹">12. JVM å†…å­˜æ¨¡å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-jvm-ç±»åŠ è½½å™¨">13. JVM ç±»åŠ è½½å™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-jvm-åŒäº²å§”æ´¾æœºåˆ¶">14. JVM åŒäº²å§”æ´¾æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_15-jvm-åƒåœ¾å›æ”¶ç®—æ³•">15. JVM åƒåœ¾å›æ”¶ç®—æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äºŒã€é›†åˆ">äºŒã€é›†åˆ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-java-å¸¸ç”¨çš„é›†åˆã€åˆ†ç±»ã€æ¥å£">1. Java å¸¸ç”¨çš„é›†åˆã€åˆ†ç±»ã€æ¥å£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-arraylist-å’Œ-array-æ•°ç»„-çš„åŒºåˆ«">2. ArrayList å’Œ Arrayï¼ˆæ•°ç»„ï¼‰çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-arraylist-ä¸-linkedlist-åŒºåˆ«">3. ArrayList ä¸ LinkedList åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-hashsetã€linkedhashset-å’Œ-treeset-å¼‚åŒ">4. HashSetã€LinkedHashSet å’Œ TreeSet å¼‚åŒ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-hashmap-åº•å±‚åŸç†">5. HashMap åº•å±‚åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-concurrenthashmap-å’Œ-hashtable-çš„åŒºåˆ«">6. ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-concurrenthashmap-çº¿ç¨‹å®‰å…¨çš„å…·ä½“å®ç°æ–¹å¼-åº•å±‚å…·ä½“å®ç°">7. ConcurrentHashMap çº¿ç¨‹å®‰å…¨çš„å…·ä½“å®ç°æ–¹å¼/åº•å±‚å…·ä½“å®ç°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-jdk-1-7-å’Œ-jdk-1-8-çš„-concurrenthashmap-å®ç°æœ‰ä»€ä¹ˆä¸åŒ">8. JDK 1.7 å’Œ JDK 1.8 çš„ ConcurrentHashMap å®ç°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸‰ã€å¹¶å‘">ä¸‰ã€å¹¶å‘</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«">1.  çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼">2. åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€">3. çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢">4. çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-sleep-å’Œ-wait-æ–¹æ³•å¯¹æ¯”">5. sleep() å’Œ wait() æ–¹æ³•å¯¹æ¯”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«">6. å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«">7. åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-çº¿ç¨‹è°ƒåº¦æ–¹å¼">8. çº¿ç¨‹è°ƒåº¦æ–¹å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-æ­»é”">9. æ­»é”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-jmm">10. JMM</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-å¯è§æ€§">11. å¯è§æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-æœ‰åºæ€§">12. æœ‰åºæ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-åŸå­æ€§">13. åŸå­æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-cas">14. CAS</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_15-volatile-å…³é”®å­—">15. volatile å…³é”®å­—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_16-synchronized-å…³é”®å­—">16. synchronized å…³é”®å­—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_17-synchronized-å’Œ-volatile-åŒºåˆ«">17. synchronized å’Œ volatile åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_18-aqs">18. AQS</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_19-reentrantlock">19. ReentrantLock</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_20-å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«">20. å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_21-synchronized-å’Œ-lock-çš„åŒºåˆ«">21. synchronized å’Œ lock çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_22-synchronized-å’Œ-reentrantlock-å¯¹æ¯”">22. synchronized å’Œ ReentrantLock å¯¹æ¯”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_23-å¯ä¸­æ–­é”å’Œä¸å¯ä¸­æ–­é”çš„åŒºåˆ«">23. å¯ä¸­æ–­é”å’Œä¸å¯ä¸­æ–­é”çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_24-atomic-åŸå­ç±»">24. Atomic åŸå­ç±»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_25-threadlocal-åŸç†">25. ThreadLocal åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_26-threadlocal-å†…å­˜æ³„éœ²">26. ThreadLocal å†…å­˜æ³„éœ²</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_27-çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°">27. çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_28-çº¿ç¨‹æ± çš„åˆ›å»º">28. çº¿ç¨‹æ± çš„åˆ›å»º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_29-çº¿ç¨‹æ± å·¥ä½œåŸç†">29. çº¿ç¨‹æ± å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_30-çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥">30. çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_31-countdownlatch">31. CountDownLatch</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_32-cyclicbarrier">32. CyclicBarrier</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_33-countdownlatch-å’Œ-cyclicbarrier-åŒºåˆ«">33. CountDownLatch å’Œ CyclicBarrier åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_34-semaphore">34. Semaphore</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_35-arrayblockingqueue">35. ArrayBlockingQueue</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_36-linkedbloackingqueue">36. LinkedBloackingQueue</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_37-æ‚²è§‚é”å’Œä¹è§‚é”çš„åŒºåˆ«">37. æ‚²è§‚é”å’Œä¹è§‚é”çš„åŒºåˆ«</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å››ã€è®¾è®¡æ¨¡å¼">å››ã€è®¾è®¡æ¨¡å¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-åˆ†ç±»">1. åˆ†ç±»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-å·¥å‚æ¨¡å¼">2. å·¥å‚æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-å•ä¾‹æ¨¡å¼">3. å•ä¾‹æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-ä»£ç†æ¨¡å¼">4. ä»£ç†æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-ç­–ç•¥æ¨¡å¼">5. ç­–ç•¥æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-spring-æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼">6. Spring æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-mybatis-ä¸­æœ‰å“ªäº›è®¾è®¡æ¨¡å¼">7. MyBatis ä¸­æœ‰å“ªäº›è®¾è®¡æ¨¡å¼</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äº”ã€mysql">äº”ã€MySQL</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-äº‹åŠ¡">1. äº‹åŠ¡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-acid-ç‰¹æ€§">2. ACID ç‰¹æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-éš”ç¦»çº§åˆ«">3. éš”ç¦»çº§åˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-é”">4. é”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-mvcc">5. MVCC</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-ç´¢å¼•">6. ç´¢å¼•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-ä¸‰å¤§æ—¥å¿—">7. ä¸‰å¤§æ—¥å¿—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-å­˜å‚¨å¼•æ“">8. å­˜å‚¨å¼•æ“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-ä¼˜åŒ–æ–¹æ¡ˆ">9. ä¼˜åŒ–æ–¹æ¡ˆ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å…­ã€redis">å…­ã€Redis</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-ä»€ä¹ˆæ˜¯-redis">1. ä»€ä¹ˆæ˜¯ Redis</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-redis-ä¼˜ç‚¹">2. Redis ä¼˜ç‚¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-redis-åº”ç”¨åœºæ™¯">3. Redis åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-redis-æ•°æ®ç±»å‹">4. Redis æ•°æ®ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-redis-æŒä¹…åŒ–æœºåˆ¶">5. Redis æŒä¹…åŒ–æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-redis-çš„ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©-ç¼“å­˜ä¸‰å…„å¼Ÿ">6. Redis çš„ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©ï¼ˆç¼“å­˜ä¸‰å…„å¼Ÿï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-redis-çš„å“¨å…µé›†ç¾¤-redis-sentinel">7. Redis çš„å“¨å…µé›†ç¾¤ï¼ˆRedis Sentinelï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-redis-çš„åˆ†ç‰‡é›†ç¾¤-redis-cluster">8. Redis çš„åˆ†ç‰‡é›†ç¾¤ï¼ˆRedis Clusterï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-redis-æˆ–-elasticsearch-å’Œ-mysql-å¦‚ä½•ä¿æŒæ•°æ®ä¸€è‡´æ€§">9. Redisï¼ˆæˆ– ElasticSearchï¼‰å’Œ MySQL å¦‚ä½•ä¿æŒæ•°æ®ä¸€è‡´æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-redis-åˆ†å¸ƒå¼é”">10. Redis åˆ†å¸ƒå¼é”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-redisson-æ˜¯ä»€ä¹ˆ-æ€ä¹ˆç”¨">11. Redisson æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-redisson-çœ‹é—¨ç‹—æœºåˆ¶çš„åŸç†">12. Redisson çœ‹é—¨ç‹—æœºåˆ¶çš„åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-redis-bigkey-å¤§key">13. Redis bigkeyï¼ˆå¤§keyï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-redis-hotkey-çƒ­key">14. Redis hotkeyï¼ˆçƒ­Keyï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸ƒã€å¾®æœåŠ¡">ä¸ƒã€å¾®æœåŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-spring">1. Spring</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-spring-ioc">2. Spring IOC</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-spring-aop">3. Spring AOP</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-å£°æ˜æˆ-bean-æ³¨è§£çš„æ–¹å¼">4. å£°æ˜æˆ Bean æ³¨è§£çš„æ–¹å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-component-å’Œ-bean-åŒºåˆ«">5. @Component å’Œ @Bean åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-autowired-å’Œ-resource-çš„åŒºåˆ«">6. @Autowired å’Œ @Resource çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-æ³¨å…¥-bean-çš„æ–¹å¼">7. æ³¨å…¥ Bean çš„æ–¹å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-spring-mvc-åŸç†">8. Spring MVC åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-springboot-ä¼˜ç‚¹">9. SpringBoot ä¼˜ç‚¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-springboot-è‡ªåŠ¨é…ç½®åŸç†">10. SpringBoot è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-springboot-å¯åŠ¨äº‹é¡¹">11. SpringBoot å¯åŠ¨äº‹é¡¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-spring-security">12. Spring Security</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-mybatis-å’Œ-åŒºåˆ«">13. MyBatis #{} å’Œ ${} åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-mybatis-åŠ¨æ€-sql">14. MyBatis åŠ¨æ€ SQL</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_15-resulttype-å’Œ-resultmap-çš„åŒºåˆ«">15. ResultType å’Œ ResultMap çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_16-mybatis-å’Œ-hibernate-åŒºåˆ«">16. Mybatis å’Œ Hibernate åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_17-mybatisplus-å¸¸ç”¨æ³¨è§£">17. MyBatisPlus å¸¸ç”¨æ³¨è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_18-springcloud-ç»„ä»¶">18. SpringCloud ç»„ä»¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_19-eureka-å·¥ä½œåŸç†">19. Eureka å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_20-nacos-å·¥ä½œåŸç†">20. Nacos å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_21-nacos-å’Œ-eureka-çš„åŒºåˆ«">21. Nacos å’Œ Eureka çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_22-ribbon-å·¥ä½œåŸç†">22. Ribbon å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_23-feign-å·¥ä½œåŸç†">23. Feign å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_24-hystrix-å·¥ä½œåŸç†">24. Hystrix å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_25-sentinel-å·¥ä½œåŸç†">25. Sentinel å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_26-gateway-å·¥ä½œåŸç†">26. Gateway å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_27-skywalking-å·¥ä½œåŸç†">27. Skywalking å·¥ä½œåŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å…«ã€åˆ†å¸ƒå¼">å…«ã€åˆ†å¸ƒå¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-rabbitmq-å·¥ä½œæ¨¡å¼">1. RabbitMQ å·¥ä½œæ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-rabbitmq-æ¶ˆæ¯å¯é æ€§">2. RabbitMQ æ¶ˆæ¯å¯é æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-rabbitmq-æ­»ä¿¡é˜Ÿåˆ—">3. RabbitMQ æ­»ä¿¡é˜Ÿåˆ—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-rabbitmq-æ¶ˆæ¯é‡å¤æ¶ˆè´¹">4. RabbitMQ æ¶ˆæ¯é‡å¤æ¶ˆè´¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-rocketmq-ç‰¹ç‚¹">5. RocketMQ ç‰¹ç‚¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-rocketmq-æ¦‚å¿µ">6. RocketMQ æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-rocketmq-ç»„ä»¶">7. RocketMQ ç»„ä»¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-rocketmq-äº¤äº’è¿‡ç¨‹">8. RocketMQ äº¤äº’è¿‡ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-å¸¸ç”¨ä¸­é—´ä»¶æ¯”è¾ƒ">9. å¸¸ç”¨ä¸­é—´ä»¶æ¯”è¾ƒ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-xxl-job-æ¦‚å¿µ">10. XXL-JOB æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-xxl-job-ä½¿ç”¨">11. XXL-JOB ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-seata-ä½¿ç”¨">12. SEATA ä½¿ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¹ã€éƒ¨ç½²">ä¹ã€éƒ¨ç½²</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-linux">1. Linux</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-docker">2. Docker</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-nginx">3. Nginx</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><!-- more --><hr><h2 id="typora-root-url-images" tabindex="-1"><a class="header-anchor" href="#typora-root-url-images"><span>typora-root-url: ./..\images</span></a></h2><h2 id="ä¸€ã€åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€åŸºç¡€"><span>ä¸€ã€åŸºç¡€</span></a></h2><h3 id="_1-é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_1-é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«"><span>1. é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«</span></a></h3><p>é¢å‘å¯¹è±¡ï¼šæ‹†åˆ†å¯¹è±¡</p><p>é¢å‘è¿‡ç¨‹ï¼šæ‹†åˆ†æ–¹æ³• æ´—è¡£æœº</p><p>é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼ˆProcedural-Oriented Programmingï¼ŒPOPï¼‰å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-Oriented Programmingï¼ŒOOPï¼‰æ˜¯ä¸¤ç§å¸¸è§çš„ç¼–ç¨‹èŒƒå¼ï¼Œä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºè§£å†³é—®é¢˜çš„æ–¹å¼ä¸åŒï¼š</p><ul><li><strong>é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼ˆPOPï¼‰</strong>ï¼šé¢å‘è¿‡ç¨‹æŠŠè§£å†³é—®é¢˜çš„è¿‡ç¨‹æ‹†æˆä¸€ä¸ªä¸ªæ–¹æ³•ï¼Œé€šè¿‡ä¸€ä¸ªä¸ªæ–¹æ³•çš„æ‰§è¡Œè§£å†³é—®é¢˜ã€‚</li><li><strong>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰</strong>ï¼šé¢å‘å¯¹è±¡ä¼šå…ˆæŠ½è±¡å‡ºå¯¹è±¡ï¼Œç„¶åç”¨å¯¹è±¡æ‰§è¡Œæ–¹æ³•çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚</li></ul><p><strong>æ´—è¡£æœºæ´—è¡£æœï¼š</strong></p><p>é¢å‘è¿‡ç¨‹ä¼šå°†ä»»åŠ¡æ‹†è§£æˆä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œ1ã€æ‰“å¼€æ´—è¡£æœº-----&gt;2ã€æ”¾è¡£æœ-----&gt;3ã€æ”¾æ´—è¡£ç²‰-----&gt;4ã€æ¸…æ´—-----&gt;5ã€çƒ˜å¹² é¢å‘å¯¹è±¡ä¼šæ‹†å‡ºäººå’Œæ´—è¡£æœºä¸¤ä¸ªå¯¹è±¡ï¼šäººï¼šæ‰“å¼€æ´—è¡£æœº æ”¾è¡£æœ æ”¾æ´—è¡£ç²‰ æ´—è¡£æœºï¼šæ¸…æ´— çƒ˜å¹²</p><p>OOP ä¼˜ç‚¹ï¼š</p><ul><li><strong>æ˜“ç»´æŠ¤</strong>ï¼šç”±äºè‰¯å¥½çš„ç»“æ„å’Œå°è£…æ€§ï¼ŒOOP ç¨‹åºé€šå¸¸æ›´å®¹æ˜“ç»´æŠ¤ã€‚</li><li><strong>æ˜“å¤ç”¨</strong>ï¼šé€šè¿‡ç»§æ‰¿å’Œå¤šæ€ï¼ŒOOP è®¾è®¡ä½¿å¾—ä»£ç æ›´å…·å¤ç”¨æ€§ï¼Œæ–¹ä¾¿æ‰©å±•åŠŸèƒ½ã€‚</li><li><strong>æ˜“æ‰©å±•</strong>ï¼šæ¨¡å—åŒ–è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ‰©å±•å˜å¾—æ›´åŠ å®¹æ˜“å’Œçµæ´»ã€‚</li></ul><p>POP çš„ç¼–ç¨‹æ–¹å¼é€šå¸¸æ›´ä¸ºç®€å•å’Œç›´æ¥ï¼Œé€‚åˆå¤„ç†ä¸€äº›è¾ƒç®€å•çš„ä»»åŠ¡ã€‚</p><h3 id="_2-é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#_2-é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§"><span>2. é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</span></a></h3><p>å°è£…ï¼šå±æ€§å¯¹å†… æ–¹æ³•å¯¹å¤– ç©ºè°ƒ</p><p>ç»§æ‰¿ï¼šçˆ¶ç±» å±æ€§ æ–¹æ³•</p><p>å¤šæ€ï¼šå¯¹è±¡ å±ç±»ç›¸åŒ æ–¹æ³•ä¸åŒ çˆ¶å¼•ç”¨-&gt;å­å¯¹è±¡</p><p>å°è£…ï¼šæ˜¯æŒ‡æŠŠä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯ï¼ˆå±æ€§ï¼‰éšè—åœ¨å¯¹è±¡å†…éƒ¨ï¼Œä¸å…è®¸å¤–éƒ¨å¯¹è±¡ç›´æ¥è®¿é—®å¯¹è±¡çš„å†…éƒ¨ä¿¡æ¯ã€‚ä½†æ˜¯å¯ä»¥æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„æ–¹æ³•æ¥æ“ä½œå±æ€§ã€‚</p><p>å°±å¥½åƒæˆ‘ä»¬çœ‹ä¸åˆ°æŒ‚åœ¨å¢™ä¸Šçš„ç©ºè°ƒçš„å†…éƒ¨çš„é›¶ä»¶ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯å±æ€§ï¼‰ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡é¥æ§å™¨ï¼ˆæ–¹æ³•ï¼‰æ¥æ§åˆ¶ç©ºè°ƒã€‚å¦‚æœå±æ€§ä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…æä¾›æ–¹æ³•ç»™å¤–ç•Œè®¿é—®ã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰æä¾›ç»™å¤–ç•Œè®¿é—®çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚å°±å¥½åƒå¦‚æœæ²¡æœ‰ç©ºè°ƒé¥æ§å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•æ“æ§ç©ºå‡‹åˆ¶å†·ï¼Œç©ºè°ƒæœ¬èº«å°±æ²¡æœ‰æ„ä¹‰äº†</p><p>ç»§æ‰¿ï¼šç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¹¶åšå‡ºè‡ªå·±çš„æ”¹å˜å’Œ/æˆ–æ‰©å±•å­ç±»å…±æ€§çš„æ–¹æ³•æˆ–è€…å±æ€§ç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„ï¼Œè€Œä¸éœ€è¦è‡ªå·±å†å®šä¹‰ï¼Œåªéœ€æ‰©å±•è‡ªå·±ä¸ªæ€§åŒ–çš„</p><p>å¤šæ€ï¼šåŸºäºå¯¹è±¡æ‰€å±ç±»çš„ä¸åŒï¼Œå¤–éƒ¨å¯¹åŒä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ï¼Œå®é™…æ‰§è¡Œçš„é€»è¾‘ä¸åŒã€‚</p><p>ç»§æ‰¿ï¼Œæ–¹æ³•é‡å†™ï¼Œçˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œæ— æ³•è°ƒç”¨å­ç±»ç‰¹æœ‰çš„åŠŸèƒ½</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">çˆ¶ç±»ç±»å‹ å˜é‡å </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> å­ç±»å¯¹è±¡ </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">å˜é‡å</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">æ–¹æ³•å()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-string-stringbuffer-stringbuilder-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_3-string-stringbuffer-stringbuilder-åŒºåˆ«"><span>3. String/StringBuffer/StringBuilder åŒºåˆ«</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324526.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>String æ˜¯ä¸å¯å˜çš„å­—ç¬¦ä¸²ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œé€‚ç”¨äºä¸ç»å¸¸ä¿®æ”¹çš„å­—ç¬¦ä¸²æ“ä½œï¼›</p><p>StringBuffer æ˜¯å¯å˜çš„å­—ç¬¦ä¸²ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒï¼› StringBuilder ä¹Ÿæ˜¯å¯å˜çš„å­—ç¬¦ä¸²ï¼Œä½†ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé€‚ç”¨äºå•çº¿ç¨‹é¢‘ç¹ä¿®æ”¹å­—ç¬¦ä¸²çš„åœºæ™¯ã€‚</p><h3 id="_4-å’Œ-equals-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_4-å’Œ-equals-çš„åŒºåˆ«"><span>4. == å’Œ equals çš„åŒºåˆ«</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324528.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>&quot;==&quot;ç”¨äºæ¯”è¾ƒåŸºæœ¬ç±»å‹çš„å€¼æˆ–å¼•ç”¨å¯¹è±¡çš„åœ°å€å€¼æ˜¯å¦ç›¸ç­‰</p><p>equals æ–¹æ³•ç”¨äºæ¯”è¾ƒå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰</p><p>ç®€è€Œè¨€ä¹‹ï¼Œ&quot;==&quot;æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œequals æ¯”è¾ƒçš„æ˜¯å†…å®¹</p><h3 id="_5-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«"><span>5. æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324529.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ¥å£ä¸»è¦æ˜¯ç”¨äºåˆ¶å®šè§„èŒƒ</p><p>æŠ½è±¡ç±»ä¸»è¦ä¸ºäº†å¤ç”¨ï¼Œæ¯”è¾ƒå…¸å‹çš„å°±æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼</p><p>â¼€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†åªèƒ½ç»§æ‰¿â¼€ä¸ªæŠ½è±¡ç±»</p><p>æ¥å£ä¸­çš„æˆå‘˜å˜é‡åªèƒ½ç”± public static final ä¿®é¥°ï¼Œè€ŒæŠ½è±¡ç±»ä¸­çš„æˆå‘˜å˜é‡å¯ä»¥æ˜¯å„ç§ç±»å‹çš„</p><p>ç®€è€Œè¨€ä¹‹ï¼Œæ¥å£å…³æ³¨çš„æ˜¯è¡Œä¸ºçš„è§„èŒƒï¼Œè€ŒæŠ½è±¡ç±»å…³æ³¨çš„æ˜¯å…±äº«çš„å±æ€§ã€‚</p><h3 id="_6-é‡å†™å’Œé‡è½½çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-é‡å†™å’Œé‡è½½çš„åŒºåˆ«"><span>6. é‡å†™å’Œé‡è½½çš„åŒºåˆ«</span></a></h3><p>é‡å†™ï¼ˆoverrideï¼‰æŒ‡çš„æ˜¯å­ç±»é‡æ–°å®ç°äº†çˆ¶ç±»ä¸­å·²æœ‰çš„æ–¹æ³•ï¼Œå­ç±»çš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„åç§°ã€å‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹ã€‚</p><p>é‡è½½ï¼ˆoverloadï¼‰æŒ‡çš„æ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ–¹æ³•ï¼Œå®ƒä»¬çš„æ–¹æ³•åç§°ç›¸åŒä½†å‚æ•°åˆ—è¡¨ä¸åŒã€‚</p><h3 id="_7-æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_7-æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«"><span>7. æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«</span></a></h3><p>æµ…æ‹·è´ï¼šå¯¹è±¡æŒ‡é’ˆ åœ°å€ç›¸åŒ</p><p>æ·±æ‹·è´ï¼šå¯¹è±¡æœ¬èº« åœ°å€ä¸åŒ</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324530.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324531.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ul><li><strong>æµ…æ‹·è´</strong>ï¼šæµ…æ‹·è´åªå¤åˆ¶å¯¹è±¡çš„æŒ‡é’ˆè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«,ä¸¤ä¸ªå¼•ç”¨æŒ‡é’ˆæŒ‡å‘è¢«å¤åˆ¶å¯¹è±¡(CloneObject1)çš„åŒä¸€å—å¼•ç”¨åœ°å€</li><li><strong>æ·±æ‹·è´</strong>ï¼šæ·±æ‹·è´ä¼šå®Œå…¨å¤åˆ¶æ•´ä¸ªå¯¹è±¡ï¼Œæ–°è€å¯¹è±¡(CloneObject1,2)ä¸å…±äº«å†…å­˜</li></ul><h3 id="_8-å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_8-å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«"><span>8. å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„åŒºåˆ«</span></a></h3><p>å€¼ä¼ é€’æ˜¯å¯¹åŸºæœ¬å‹å˜é‡è€Œè¨€çš„,ä¼ é€’çš„æ˜¯è¯¥å˜é‡çš„ä¸€ä¸ªå‰¯æœ¬,æ”¹å˜å‰¯æœ¬ä¸å½±å“åŸå˜é‡ã€‚</p><p>å¼•ç”¨ä¼ é€’ä¸€èˆ¬æ˜¯å¯¹äºå¯¹è±¡å‹å˜é‡è€Œè¨€çš„,ä¼ é€’çš„æ˜¯è¯¥å¯¹è±¡åœ°å€çš„ä¸€ä¸ªå‰¯æœ¬, å¹¶ä¸æ˜¯åŸå¯¹è±¡æœ¬èº« ã€‚</p><p>ä¸€èˆ¬è®¤ä¸º,java å†…çš„ä¼ é€’éƒ½æ˜¯å€¼ä¼ é€’. java ä¸­å®ä¾‹å¯¹è±¡çš„ä¼ é€’æ˜¯å¼•ç”¨ä¼ é€’ã€‚</p><h3 id="_9-io-æµ" tabindex="-1"><a class="header-anchor" href="#_9-io-æµ"><span>9. <a href="https://javaguide.cn/java/io/io-basis.html" target="_blank" rel="noopener noreferrer">IO æµ</a></span></a></h3><p>IO å³ <code>Input/Output</code>ï¼Œè¾“å…¥å’Œè¾“å‡ºã€‚æ•°æ®è¾“å…¥åˆ°è®¡ç®—æœºå†…å­˜çš„è¿‡ç¨‹å³è¾“å…¥ï¼Œåä¹‹è¾“å‡ºåˆ°å¤–éƒ¨å­˜å‚¨ï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼Œæ–‡ä»¶ï¼Œè¿œç¨‹ä¸»æœºï¼‰çš„è¿‡ç¨‹å³è¾“å‡ºã€‚æ•°æ®ä¼ è¾“è¿‡ç¨‹ç±»ä¼¼äºæ°´æµï¼Œå› æ­¤ç§°ä¸º IOæµã€‚IO æµåœ¨ Java ä¸­åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµï¼Œè€Œæ ¹æ®æ•°æ®çš„å¤„ç†æ–¹å¼åˆåˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµã€‚</p><p>Java IO æµçš„ 40 å¤šä¸ªç±»éƒ½æ˜¯ä»å¦‚ä¸‹ 4 ä¸ªæŠ½è±¡ç±»åŸºç±»ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚</p><ul><li><code>InputStream</code>/<code>Reader</code>: æ‰€æœ‰çš„è¾“å…¥æµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å…¥æµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å…¥æµã€‚</li><li><code>OutputStream</code>/<code>Writer</code>: æ‰€æœ‰è¾“å‡ºæµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å‡ºæµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å‡ºæµã€‚</li></ul><h3 id="_10-åå°„" tabindex="-1"><a class="header-anchor" href="#_10-åå°„"><span>10. åå°„</span></a></h3><p>Java çš„åå°„æœºåˆ¶æ˜¯æŒ‡åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è·å–ç±»çš„ä¿¡æ¯å¹¶æ“ä½œç±»æˆ–å¯¹è±¡çš„èƒ½åŠ›ã€‚</p><p>é€šè¿‡åå°„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ— æ³•ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç±»åè·å–ç±»çš„å®ä¾‹ã€è·å–ç±»çš„å­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶è°ƒç”¨è¿™äº›æ–¹æ³•æˆ–è®¿é—®è¿™äº›å­—æ®µã€‚</p><p><strong>åå°„æ–¹æ³•ï¼š</strong></p><ol><li><code>Class.forName(String className)</code>ï¼šæ ¹æ®ç±»åè·å–å¯¹åº”çš„ Class å¯¹è±¡ã€‚</li><li><code>getClass()</code>ï¼šè·å–å¯¹è±¡çš„è¿è¡Œæ—¶ç±»å‹ã€‚</li><li><code>getMethod(String name, Class&lt;?&gt;... parameterTypes)</code>ï¼šè·å–æŒ‡å®šæ–¹æ³•åå’Œå‚æ•°ç±»å‹çš„æ–¹æ³•ã€‚</li><li><code>getField(String name)</code>ï¼šè·å–æŒ‡å®šåç§°çš„å­—æ®µã€‚</li><li><code>newInstance()</code>ï¼šä½¿ç”¨é»˜è®¤çš„æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹ã€‚</li><li><code>newInstance(Object... initargs)</code>ï¼šä½¿ç”¨æŒ‡å®šå‚æ•°ç±»å‹å’Œå€¼çš„æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹ã€‚</li><li><code>invoke(Object obj, Object... args)</code>ï¼šè°ƒç”¨æŒ‡å®šå¯¹è±¡çš„æ–¹æ³•ã€‚</li></ol><h3 id="_11-sleep-å’Œ-wait-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_11-sleep-å’Œ-wait-çš„åŒºåˆ«"><span>11. sleep å’Œ wait çš„åŒºåˆ«</span></a></h3><p>sleepï¼šThreadç±»æ–¹æ³• ä¸é‡Šæ”¾å¯¹è±¡é”</p><p>waitï¼šObjectç±»æ–¹æ³• é‡Šæ”¾å¯¹è±¡é”</p><p>sleep æ˜¯çº¿ç¨‹ç±»ï¼ˆThreadï¼‰çš„æ–¹æ³•ï¼Œå¯¼è‡´æ­¤çº¿ç¨‹æš‚åœæ‰§è¡ŒæŒ‡å®šæ—¶é—´ï¼Œç»™æ‰§è¡Œæœºä¼šç»™å…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯ç›‘æ§çŠ¶æ€ä¾ç„¶ä¿æŒï¼Œåˆ°æ—¶åä¼šè‡ªåŠ¨æ¢å¤ã€‚è°ƒç”¨ sleep ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”ã€‚</p><p>wait æ˜¯ Object ç±»çš„æ–¹æ³•ï¼Œå¯¹æ­¤å¯¹è±¡è°ƒç”¨ wait æ–¹æ³•å¯¼è‡´æœ¬çº¿ç¨‹é‡Šæ”¾å¯¹è±¡é”ï¼Œè¿›å…¥ç­‰å¾…æ­¤å¯¹è±¡çš„ç­‰å¾…é”å®šæ± ï¼Œåªæœ‰é’ˆå¯¹æ­¤å¯¹è±¡å‘å‡º notify æ–¹æ³•ï¼ˆæˆ– notifyAllï¼‰åæœ¬çº¿ç¨‹æ‰è¿›å…¥å¯¹è±¡é”å®šæ± å‡†å¤‡è·å¾—å¯¹è±¡é”è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚</p><h3 id="_12-jvm-å†…å­˜æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_12-jvm-å†…å­˜æ¨¡å‹"><span>12. JVM å†…å­˜æ¨¡å‹</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324532.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324533.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324534.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>Java çš„å†…å­˜ç»“æ„ä¸»è¦åŒ…æ‹¬æ–¹æ³•åŒºã€å †ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆå’Œç¨‹åºè®¡æ•°å™¨ã€‚æ–¹æ³•åŒºç”¨äºå­˜å‚¨ç±»ä¿¡æ¯ï¼Œå †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œè™šæ‹Ÿæœºæ ˆç”¨äºå­˜å‚¨æ–¹æ³•è°ƒç”¨å’Œå±€éƒ¨å˜é‡ï¼Œæœ¬åœ°æ–¹æ³•æ ˆç”¨äºå­˜å‚¨é Java æ–¹æ³•ä¿¡æ¯ï¼Œç¨‹åºè®¡æ•°å™¨ç”¨äºè®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ã€‚</p><p><strong>å †ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324535.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>ä¸»è¦å­˜æ”¾å¯¹è±¡</li><li>æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šæ”¾åœ¨å †ä¸Šé¢</li><li>çº¿ç¨‹å…±äº«çš„</li><li>éœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶</li><li>å¦‚æœå†…å­˜ä¸å¤Ÿã€æ²¡æœ‰ç©ºé—´å»åˆ†é…ç»™æ–°åˆ›å»ºçš„å¯¹è±¡ =ã€‹OutOfMemoryError</li></ol><p><strong>å †çš„ç»„æˆï¼š</strong></p><ol><li>å¹´è½»ä»£ï¼ˆeden + s0 + s1ï¼‰</li></ol><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324536.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol start="2"><li>è€å¹´ä»£</li></ol><p><strong>æ ˆï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324537.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>è™šæ‹Ÿæœºæ ˆ</li><li>çº¿ç¨‹ç§æœ‰çš„</li><li>æ ˆé‡Œæ˜¯ä¸€ä¸ªä¸ªçš„æ ˆå¸§ï¼ˆframeï¼‰ï¼Œæ¯ä¸ªæ ˆå¸§å¯¹åº”ä¸€ä¸ªè¢«è°ƒç”¨çš„æ–¹æ³•</li></ol><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324538.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> n){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(n</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(1ï¼‰å±€éƒ¨å˜é‡è¡¨ï¼ˆlocal variablesï¼‰</p><p>ï¼ˆ2ï¼‰æ“ä½œæ•°æ ˆ</p><p>ï¼ˆ3ï¼‰åŠ¨æ€é“¾æ¥ï¼ˆè°ƒç”¨çš„åˆ«çš„æ–¹æ³•ï¼‰</p><p>ï¼ˆ4ï¼‰è¿”å›åœ°å€å’Œä¸€äº›é¢å¤–ä¿¡æ¯</p><ol start="4"><li>å¦‚æœä¸€ä¸ªæ ˆé‡Œçš„æ ˆå¸§è¿‡å¤šï¼Œå°±æœ‰å¯èƒ½å‡ºç°stackoverflowError</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">( ){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> get</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æœ¬åœ°æ–¹æ³•æ ˆï¼š</strong></p><ol><li>ä¸“é—¨ä¸ºäº†nativeæœ¬åœ°æ–¹æ³•ä½¿ç”¨</li><li>Javaè¯­è¨€ä¸èƒ½ç›´æ¥å¯¹æ“ä½œç³»ç»Ÿåº•å±‚è¿›è¡Œè®¿é—®å’Œæ“ä½œï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡JNIï¼ˆJava Native Interfaceï¼‰å»è°ƒç”¨åˆ«çš„è¯­è¨€ï¼ˆCã€C++ã€æ±‡ç¼–ï¼‰æ¥å®ç°å¯¹åº•å±‚çš„è®¿é—®</li><li>çº¿ç¨‹ç§æœ‰çš„</li></ol><p><strong>ç¨‹åºè®¡æ•°å™¨ï¼š</strong></p><ol><li>çº¿ç¨‹ç§æœ‰çš„</li><li>å­˜å‚¨å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ã€è¡Œå·</li><li>å½“çº¿ç¨‹åˆ‡æ¢ï¼Œé€šè¿‡ç¨‹åºè®¡æ•°å™¨çŸ¥é“ä»å“ªé‡Œé‡æ–°è¿è¡Œ</li></ol><p>**å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰ï¼š**JDK8ä»¥åå¯¹JVMæœ€å¤§çš„ä¸€ä¸ªè°ƒæ•´</p><ol><li>ä¿å­˜ç±»ç›¸å…³çš„ä¿¡æ¯ï¼šç±»çš„åå­—ã€æ–¹æ³•åå­—ã€å­—æ®µä¿¡æ¯ã€é™æ€å˜é‡</li><li>æ”¾åœ¨JVMå¤–é¢</li></ol><p><strong>å¼•èµ·OOMçš„å¸¸è§åŸå› ï¼š</strong></p><ol><li><strong>Java Heap Spaceï¼š</strong> å †æ²¡æœ‰è¶³å¤Ÿç©ºé—´å­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ï¼š ï¼ˆ1ï¼‰åˆ›å»ºäº†è¶…å¤§å¯¹è±¡ï¼Œä¸€èˆ¬éƒ½æ˜¯å¤§æ•°ç»„ã€‚ è°ƒå¤§å †çš„ç©ºé—´å¤§å° ï¼ˆ2ï¼‰ç‰¹æ®Šåœºæ™¯ï¼šåŒ11ï¼Œè¶…å‡ºé¢„æœŸçš„è®¿é—®é‡ã€æ•°æ®é‡ã€‚ åŒ11 =ã€‹é™æµ ï¼ˆ3ï¼‰å†…å­˜æ³„éœ²ï¼šä¾‹å­threadlocalï¼Œæœ¬æ¥åº”è¯¥æŠŠå®ƒå›æ”¶ï¼Œä½†æ˜¯æ²¡æœ‰å›æ”¶æˆåŠŸï¼Œå†…å­˜ç©ºé—´æ— æ³•ä½¿ç”¨ã€‚ æ‰¾bug</li><li><strong>GC Overhead limit exceededï¼š</strong>** **Javaåƒåœ¾å›æ”¶èŠ±è´¹äº†éå¸¸å¤šçš„æ—¶é—´è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä½†æ˜¯å›æ”¶äº†ä¸€ç‚¹ç‚¹å†…å­˜ï¼Œå¹¶ä¸”è¿™ç§æƒ…å†µå·²ç»è¿ç»­é‡å¤äº†5æ¬¡ è¯´æ˜å¯ç”¨çš„å †ç©ºé—´å·²ç»éå¸¸éå¸¸å°‘äº†ï¼ŒGCä¹Ÿæ— èƒ½ä¸ºåŠ›</li><li><strong>Metaspaceï¼š</strong>** **è¯´æ˜å…ƒç©ºé—´æ»¡äº†ï¼Œå› ä¸ºåŠ è½½çš„ç±»å¤ªå¤šäº†</li><li><strong>Unable to create new native threadï¼š</strong>** **å› ä¸ºåˆ›å»ºçš„Javaçº¿ç¨‹å¤ªå¤šäº†ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„èµ„æºè¿›è¡Œåˆ†é…äº†</li></ol><h3 id="_13-jvm-ç±»åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#_13-jvm-ç±»åŠ è½½å™¨"><span>13. JVM ç±»åŠ è½½å™¨</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324539.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>åŠ è½½è¿‡ç¨‹ï¼š</strong></p><ol><li>åŠ è½½ï¼šé€šè¿‡ç±»çš„å…¨é™å®šåè·å–å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæ–¹æ³•åŒºå†…çš„è¿è¡Œæ—¶æ•°æ®ç»“ æ„ã€‚</li><li>éªŒè¯ï¼šå¯¹.classæ–‡ä»¶ é‡Œçš„å­—èŠ‚ç è¿›è¡Œæ ¡éªŒï¼Œç¡®ä¿ç¬¦åˆ Java è™šæ‹Ÿæœºè§„èŒƒï¼Œèƒ½è¢«æ‰§è¡Œã€‚</li><li>å‡†å¤‡ï¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤åˆå§‹å€¼ã€‚</li><li>è§£æï¼šå°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼Œå³å°†ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰è§£æä¸ºå…·ä½“çš„å†…å­˜åœ°å€ã€‚</li><li>åˆå§‹åŒ–ï¼šæ‰§è¡Œç±»çš„åˆå§‹åŒ–ä»£ç ï¼ŒåŒ…æ‹¬é™æ€å˜é‡èµ‹å€¼å’Œé™æ€ä»£ç å—çš„æ‰§è¡Œã€‚</li></ol><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324540.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>åˆ†ç±»ï¼š</strong></p><p>ä¸€ã€ç³»ç»Ÿæœ¬èº«è‡ªå¸¦ç±»åŠ è½½å™¨</p><p>ï¼ˆ1ï¼‰å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap classloaderï¼‰</p><p>ä¸»è¦è´Ÿè´£Javaç›®å½•ä¸‹æ ¸å¿ƒç±»ï¼ˆlibç›®å½•ï¼Œjavaä¸­æœ€æ ¸å¿ƒçš„ç±»åº“ï¼Œæ”¯æ’‘Javaç³»ç»Ÿçš„è¿è¡Œï¼‰</p><p>ï¼ˆ2ï¼‰æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtensions classloaderï¼‰</p><p>lib/extç›®å½•ä¸‹çš„å†…å®¹</p><p>ï¼ˆ3ï¼‰åº”ç”¨ç±»åŠ è½½å™¨ï¼ˆApplication classloaderï¼‰</p><p>ç®€å•ç†è§£ä¸ºåŠ è½½ç¨‹åºå‘˜è‡ªå·±å†™å¥½çš„ä»£ç </p><p>äºŒã€è‡ªå®šä¹‰ç±»åŠ è½½å™¨</p><p>æ»¡è¶³ä¸€äº›ç‰¹æ®Šéœ€æ±‚ï¼Œéœ€è¦ç»§æ‰¿ java.lang.ClassLoader æ¥å®ç°</p><h3 id="_14-jvm-åŒäº²å§”æ´¾æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_14-jvm-åŒäº²å§”æ´¾æœºåˆ¶"><span>14. JVM åŒäº²å§”æ´¾æœºåˆ¶</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324541.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åŒäº²å§”æ´¾æœºåˆ¶æ˜¯æŒ‡ç±»åŠ è½½å™¨åœ¨åŠ è½½ç±»æ—¶ï¼Œé¦–å…ˆå°†åŠ è½½è¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½æ—¶ï¼Œæ‰è‡ªå·±å°è¯•åŠ è½½ã€‚ä»è€Œç¡®ä¿ç±»çš„åŠ è½½å®‰å…¨å’Œé˜²æ­¢ç±»çš„é‡å¤åŠ è½½ã€‚</p><p>java.lang.Objectï¼Œå®ƒæ˜¯æ”¾åœ¨rt.jarä¹‹ä¸­ï¼Œå®ƒæ°¸è¿œéƒ½ä¼šè¢«æœ€ä¸Šé¢çš„åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå› æ­¤æ— è®ºåœ¨ä»»ä½•ç¯å¢ƒä¸‹ï¼Œéƒ½èƒ½æ‰¾åˆ°è¿™ä¸ªç±»</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324542.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¸åŒclassloaderåŠ è½½çš„ç±»è‚¯å®šæ˜¯ä¸ç›¸åŒçš„ï¼Œç›¸å½“äºåœ¨JVMå½“ä¸­åˆ›å»ºäº†ä¸€ä¸ªä¸ªäº’ç›¸éš”ç¦»çš„ç©ºé—´ï¼Œè¿™ç§æŠ€æœ¯åœ¨æ¡†æ¶ä¸­ç»å¸¸è¢«ä½¿ç”¨</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324543.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_15-jvm-åƒåœ¾å›æ”¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_15-jvm-åƒåœ¾å›æ”¶ç®—æ³•"><span>15. JVM åƒåœ¾å›æ”¶ç®—æ³•</span></a></h3><p>ï¼ˆ1ï¼‰**æ ‡è®° - æ¸…ç†ï¼š**å¯¼è‡´å†…å­˜ç¢ç‰‡</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324544.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ï¼ˆ2ï¼‰**æ ‡è®° - æ•´ç†ï¼š**é‡Šæ”¾å®Œç©ºé—´åï¼Œä¼šå¯¹æ•´ä¸ªå†…å­˜ç©ºé—´è¿›è¡Œæ•´ç†ï¼Œå»é™¤å†…å­˜ç¢ç‰‡</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324545.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç¼ºç‚¹ï¼šæ•´ç†çš„è¿‡ç¨‹éå¸¸æ…¢ï¼Œéå¸¸è€—èµ„æº</p><p>ï¼ˆ3ï¼‰**å¤åˆ¶ - æ¸…ç†ï¼š**å…ˆæ ‡è®°å“ªäº›éœ€è¦è¢«åˆ é™¤ï¼Œå“ªäº›éœ€è¦è¢«å¤åˆ¶</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324546.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç¼ºç‚¹ï¼šç©ºé—´åªèƒ½ç”¨ä¸€åŠ</p><h2 id="äºŒã€é›†åˆ" tabindex="-1"><a class="header-anchor" href="#äºŒã€é›†åˆ"><span>äºŒã€é›†åˆ</span></a></h2><h3 id="_1-java-å¸¸ç”¨çš„é›†åˆã€åˆ†ç±»ã€æ¥å£" tabindex="-1"><a class="header-anchor" href="#_1-java-å¸¸ç”¨çš„é›†åˆã€åˆ†ç±»ã€æ¥å£"><span>1. Java å¸¸ç”¨çš„é›†åˆã€åˆ†ç±»ã€æ¥å£</span></a></h3><p>Java é›†åˆï¼Œä¹Ÿå«ä½œå®¹å™¨ï¼Œä¸»è¦æ˜¯ç”±ä¸¤å¤§æ¥å£æ´¾ç”Ÿè€Œæ¥ï¼šä¸€ä¸ªæ˜¯ <code>Collection</code>æ¥å£ï¼Œä¸»è¦ç”¨äºå­˜æ”¾å•ä¸€å…ƒç´ ï¼›å¦ä¸€ä¸ªæ˜¯ <code>Map</code> æ¥å£ï¼Œä¸»è¦ç”¨äºå­˜æ”¾é”®å€¼å¯¹ã€‚å¯¹äº<code>Collection</code> æ¥å£ï¼Œä¸‹é¢åˆæœ‰ä¸‰ä¸ªä¸»è¦çš„å­æ¥å£ï¼š<code>List</code>ã€<code>Set</code> ã€ <code>Queue</code>ã€‚</p><p>Java é›†åˆæ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324547.png" alt="img" loading="lazy"><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324548.jpeg" alt="img" loading="lazy"></p><p><strong>å®ç°ç±»ï¼š</strong></p><ul><li><strong>List</strong>ï¼šArrayList æ˜¯åŸºäºæ•°ç»„çš„åŠ¨æ€åˆ—è¡¨ï¼ŒLinkedList æ˜¯åŸºäºé“¾è¡¨çš„åˆ—è¡¨ï¼ŒVector æ˜¯çº¿ç¨‹å®‰å…¨çš„åˆ—è¡¨ã€‚</li><li><strong>Set</strong>ï¼šHashSet æ˜¯åŸºäºå“ˆå¸Œè¡¨çš„é›†åˆï¼ŒLinkedHashSet æ˜¯åŸºäºå“ˆå¸Œè¡¨å’Œé“¾è¡¨çš„é›†åˆï¼ŒTreeSet æ˜¯åŸºäºçº¢é»‘æ ‘çš„æœ‰åºé›†åˆã€‚</li><li><strong>Map</strong>ï¼šHashMap æ˜¯åŸºäºå“ˆå¸Œè¡¨çš„æ˜ å°„ï¼ŒLinkedHashMap æ˜¯åŸºäºå“ˆå¸Œè¡¨å’Œé“¾è¡¨çš„æ˜ å°„ï¼ŒTreeMap æ˜¯åŸºäºçº¢é»‘æ ‘çš„æœ‰åºæ˜ å°„ã€‚</li><li><strong>Queue</strong>ï¼šLinkedList å¯ä»¥ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨ï¼ŒPriorityQueue æ˜¯åŸºäºä¼˜å…ˆçº§çš„é˜Ÿåˆ—ã€‚</li></ul><h3 id="_2-arraylist-å’Œ-array-æ•°ç»„-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_2-arraylist-å’Œ-array-æ•°ç»„-çš„åŒºåˆ«"><span>2. ArrayList å’Œ Arrayï¼ˆæ•°ç»„ï¼‰çš„åŒºåˆ«</span></a></h3><p><code>ArrayList</code> å†…éƒ¨åŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œæ¯” <code>Array</code>ï¼ˆé™æ€æ•°ç»„ï¼‰ ä½¿ç”¨èµ·æ¥æ›´åŠ çµæ´»ï¼š</p><ul><li><code>ArrayList</code>ä¼šæ ¹æ®å®é™…å­˜å‚¨çš„å…ƒç´ åŠ¨æ€åœ°æ‰©å®¹æˆ–ç¼©å®¹ï¼Œè€Œ <code>Array</code> è¢«åˆ›å»ºä¹‹åå°±ä¸èƒ½æ”¹å˜å®ƒçš„é•¿åº¦äº†ã€‚</li><li><code>ArrayList</code> å…è®¸ä½ ä½¿ç”¨æ³›å‹æ¥ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œ<code>Array</code> åˆ™ä¸å¯ä»¥ã€‚</li><li><code>ArrayList</code> ä¸­åªèƒ½å­˜å‚¨å¯¹è±¡ã€‚å¯¹äºåŸºæœ¬ç±»å‹æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨å…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼ˆå¦‚ Integerã€Double ç­‰ï¼‰ã€‚<code>Array</code> å¯ä»¥ç›´æ¥å­˜å‚¨åŸºæœ¬ç±»å‹æ•°æ®ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¯¹è±¡ã€‚</li><li><code>ArrayList</code> æ”¯æŒæ’å…¥ã€åˆ é™¤ã€éå†ç­‰å¸¸è§æ“ä½œï¼Œå¹¶ä¸”æä¾›äº†ä¸°å¯Œçš„ API æ“ä½œæ–¹æ³•ï¼Œæ¯”å¦‚ <code>add()</code>ã€<code>remove()</code>ç­‰ã€‚<code>Array</code> åªæ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•°ç»„ï¼Œåªèƒ½æŒ‰ç…§ä¸‹æ ‡è®¿é—®å…¶ä¸­çš„å…ƒç´ ï¼Œä¸å…·å¤‡åŠ¨æ€æ·»åŠ ã€åˆ é™¤å…ƒç´ çš„èƒ½åŠ›ã€‚</li><li><code>ArrayList</code>åˆ›å»ºæ—¶ä¸éœ€è¦æŒ‡å®šå¤§å°ï¼Œè€Œ<code>Array</code>åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ã€‚</li></ul><h3 id="_3-arraylist-ä¸-linkedlist-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_3-arraylist-ä¸-linkedlist-åŒºåˆ«"><span>3. ArrayList ä¸ LinkedList åŒºåˆ«</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324549.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ArrayList åŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼ŒæŸ¥è¯¢æ“ä½œå¿«ã€‚</p><p>LinkedListåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œå¢åˆ æ“ä½œå¿«ã€‚</p><details class="lake-collapse"><summary id="u5ec6a050"><span class="ne-text" style="font-size:16px;">array ç”¨çš„æ¯” linked æ›´å¤š </span></summary><p id="u6ee568b3" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text" style="font-size:16px;">æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä¸€èˆ¬æ˜¯ä¸ä¼šä½¿ç”¨åˆ° </span><code class="ne-code" style="font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;background-color:rgba(0, 0, 0, 0.06);border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;padding:0px 2px;"><span class="ne-text" style="font-size:16px;">LinkedList</span></code><span class="ne-text" style="font-size:16px;"> çš„ï¼Œéœ€è¦ç”¨åˆ° </span><code class="ne-code" style="font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;background-color:rgba(0, 0, 0, 0.06);border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;padding:0px 2px;"><span class="ne-text" style="font-size:16px;">LinkedList</span></code><span class="ne-text" style="font-size:16px;"> çš„åœºæ™¯å‡ ä¹éƒ½å¯ä»¥ä½¿ç”¨ </span><code class="ne-code" style="font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;background-color:rgba(0, 0, 0, 0.06);border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;padding:0px 2px;"><span class="ne-text" style="font-size:16px;">ArrayList</span></code><span class="ne-text" style="font-size:16px;"> æ¥ä»£æ›¿ï¼Œå¹¶ä¸”ï¼Œæ€§èƒ½é€šå¸¸ä¼šæ›´å¥½ï¼å°±è¿ </span><code class="ne-code" style="font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;background-color:rgba(0, 0, 0, 0.06);border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;padding:0px 2px;"><span class="ne-text" style="font-size:16px;">LinkedList</span></code><span class="ne-text" style="font-size:16px;"> çš„ä½œè€…çº¦ä¹¦äºš Â· å¸ƒæ´›å…‹ï¼ˆJosh Blochï¼‰è‡ªå·±éƒ½è¯´ä»æ¥ä¸ä¼šä½¿ç”¨ </span><code class="ne-code" style="font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;background-color:rgba(0, 0, 0, 0.06);border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;padding:0px 2px;"><span class="ne-text" style="font-size:16px;">LinkedList</span></code><span class="ne-text" style="font-size:16px;"> ã€‚</span></p><p id="u639b5f4e" class="ne-p" style="margin:0;padding:0;min-height:24px;"><img src="https://cdn.nlark.com/yuque/0/2024/png/33541132/1729769549577-09684522-be7f-4798-bec3-33c5f8c9a7ca.png" width="1069" id="xlmmH" class="ne-image" style="font-size:16px;"></p><p id="uc57a9cc7" class="ne-p" style="margin:0;padding:0;min-height:24px;"><span class="ne-text" style="font-size:16px;">å¦å¤–ï¼Œä¸è¦ä¸‹æ„è¯†åœ°è®¤ä¸º </span><code class="ne-code" style="font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;background-color:rgba(0, 0, 0, 0.06);border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;padding:0px 2px;"><span class="ne-text" style="font-size:16px;">LinkedList</span></code><span class="ne-text" style="font-size:16px;"> ä½œä¸ºé“¾è¡¨å°±æœ€é€‚åˆå…ƒç´ å¢åˆ çš„åœºæ™¯ã€‚æˆ‘åœ¨ä¸Šé¢ä¹Ÿè¯´äº†ï¼Œ</span><code class="ne-code" style="font-family:SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;background-color:rgba(0, 0, 0, 0.06);border:1px solid rgba(0, 0, 0, 0.08);border-radius:2px;padding:0px 2px;"><span class="ne-text" style="font-size:16px;">LinkedList</span></code><span class="ne-text" style="font-size:16px;"> ä»…ä»…åœ¨å¤´å°¾æ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ çš„æ—¶å€™æ—¶é—´å¤æ‚åº¦è¿‘ä¼¼ O(1)ï¼Œå…¶ä»–æƒ…å†µå¢åˆ å…ƒç´ çš„å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(n) ã€‚</span></p></details><h3 id="_4-hashsetã€linkedhashset-å’Œ-treeset-å¼‚åŒ" tabindex="-1"><a class="header-anchor" href="#_4-hashsetã€linkedhashset-å’Œ-treeset-å¼‚åŒ"><span>4. HashSetã€LinkedHashSet å’Œ TreeSet å¼‚åŒ</span></a></h3><ul><li><code>HashSet</code>ã€<code>LinkedHashSet</code> å’Œ <code>TreeSet</code> éƒ½æ˜¯ <code>Set</code> æ¥å£çš„å®ç°ç±»ï¼Œéƒ½èƒ½ä¿è¯å…ƒç´ å”¯ä¸€ï¼Œå¹¶ä¸”éƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</li><li><code>HashSet</code>ã€<code>LinkedHashSet</code> å’Œ <code>TreeSet</code> çš„ä¸»è¦åŒºåˆ«åœ¨äºåº•å±‚æ•°æ®ç»“æ„ä¸åŒã€‚</li></ul><p><code>HashSet</code> çš„åº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨ï¼ˆåŸºäº <code>HashMap</code> å®ç°ï¼‰ã€‚<code>LinkedHashSet</code> çš„åº•å±‚æ•° æ®ç»“æ„æ˜¯é“¾è¡¨å’Œå“ˆå¸Œè¡¨ï¼Œå…ƒç´ çš„æ’å…¥å’Œå–å‡ºé¡ºåºæ»¡è¶³ FIFOã€‚<code>TreeSet</code> åº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘ æ ‘ï¼Œå…ƒç´ æ˜¯æœ‰åºçš„ï¼Œæ’åºçš„æ–¹å¼æœ‰è‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºã€‚</p><ul><li>åº•å±‚æ•°æ®ç»“æ„ä¸åŒåˆå¯¼è‡´è¿™ä¸‰è€…çš„åº”ç”¨åœºæ™¯ä¸åŒã€‚<code>HashSet</code> ç”¨äºä¸éœ€è¦ä¿è¯å…ƒç´ æ’å…¥å’Œå–å‡ºé¡ºåºçš„åœºæ™¯ï¼Œ<code>LinkedHashSet</code> ç”¨äºä¿è¯å…ƒç´ çš„æ’å…¥å’Œå–å‡ºé¡ºåºæ»¡è¶³ FIFO çš„åœºæ™¯ï¼Œ<code>TreeSet</code> ç”¨äºæ”¯æŒå¯¹å…ƒç´ è‡ªå®šä¹‰æ’åºè§„åˆ™çš„åœºæ™¯ã€‚</li></ul><h3 id="_5-hashmap-åº•å±‚åŸç†" tabindex="-1"><a class="header-anchor" href="#_5-hashmap-åº•å±‚åŸç†"><span>5. HashMap åº•å±‚åŸç†</span></a></h3><p><strong>å…³é”®å±æ€§ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324550.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç¬¬ä¸€ä¸ªå±æ€§ loadFactorï¼Œå®ƒæ˜¯è´Ÿè½½å› å­ï¼Œé»˜è®¤å€¼æ˜¯0.75ï¼Œè¡¨ç¤ºæ‰©å®¹å‰ ã€‚</p><p>ç¬¬äºŒä¸ªå±æ€§ threshold å®ƒæ˜¯è®°å½•HashMapæ‰€èƒ½å®¹çº³çš„é”®å€¼å¯¹çš„ä¸´ç•Œå€¼ï¼Œå®ƒçš„è®¡ç®—è§„åˆ™æ˜¯è´Ÿè½½å› å­ Ã— æ•°ç»„é•¿åº¦ï¼Œæ‰©å®¹åçš„å®¹é‡ä¸ºå½“å‰å®¹é‡çš„ 2 å€ã€‚ä¾‹å¦‚ï¼Œåˆå§‹å®¹é‡ä¸º16ï¼Œå½“å…ƒç´ æ•°é‡è¾¾åˆ° 12 æ—¶ä¼šè§¦å‘æ‰©å®¹ï¼Œæ‰©å®¹åçš„å®¹é‡ä¸º 32ã€‚</p><p>ç¬¬ä¸‰ä¸ªå±æ€§sizeï¼Œå®ƒç”¨æ¥è®°å½•HashMapå®é™…å­˜åœ¨çš„é”®å€¼å¯¹çš„æ•°é‡ã€‚</p><p>ç¬¬å››ä¸ªå±æ€§modCountï¼Œå®ƒç”¨æ¥è®°å½•HashMapå†…éƒ¨ç»“æ„ä¿®æ”¹çš„æ¬¡æ•°ã€‚</p><p>ç¬¬äº”ä¸ªæ˜¯å¸¸é‡å±æ€§DEFAULT_INITIAL_CAPACITY ï¼Œå®ƒè§„å®šçš„é»˜è®¤å®¹é‡æ˜¯16ã€‚</p><p><strong>å­˜å‚¨ç»“æ„ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324551.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>HashMapé‡‡ç”¨çš„æ˜¯å“ˆå¸Œè¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰çš„å­˜å‚¨ç»“æ„ã€‚HashMapçš„æ•°ç»„éƒ¨åˆ†ç§°ä¸ºHashæ¡¶ï¼Œæ•°ç»„å…ƒç´ ä¿å­˜åœ¨ä¸€ä¸ªå«åštableçš„å±æ€§ä¸­ã€‚å½“é“¾è¡¨é•¿åº¦å¤§äºç­‰äº8æ—¶ï¼Œé“¾è¡¨æ•°æ®å°†ä¼šä»¥çº¢é»‘æ ‘çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œå½“é•¿åº¦é™åˆ°6æ—¶ï¼Œåˆä¼šè½¬æˆé“¾è¡¨å½¢å¼å­˜å‚¨ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324552.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ¯ä¸ªNodeèŠ‚ç‚¹ï¼Œä¿å­˜äº†ç”¨æ¥å®šä½æ•°ç»„ç´¢å¼•ä½ç½®çš„hashå€¼ã€Keyã€Valueå’Œé“¾è¡¨æŒ‡å‘çš„ä¸‹ä¸€ä¸ªNodeèŠ‚ç‚¹ã€‚è€ŒNodeç±»æ˜¯HashMapçš„å†…éƒ¨ç±»ï¼Œå®ƒå®ç°äº†Map.Entryæ¥å£ï¼Œå®ƒçš„æœ¬è´¨å…¶å®å¯ä»¥ç®€å•çš„ç†è§£æˆå°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚</p><h3 id="_6-concurrenthashmap-å’Œ-hashtable-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-concurrenthashmap-å’Œ-hashtable-çš„åŒºåˆ«"><span>6. ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«</span></a></h3><p>ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ä¸Šä¸åŒã€‚</p><p>ConcurrentHashMap:</p><p>â€¢ åº•å±‚æ•°æ®ç»“æ„ï¼š JDK1.7 çš„ ConcurrentHashMap åº•å±‚é‡‡ç”¨ åˆ†æ®µçš„æ•°ç»„+é“¾è¡¨ å®ç°ï¼ŒJDK1.8 é‡‡ç”¨çš„æ•°æ®ç»“æ„è·Ÿ HashMap1.8 çš„ç»“æ„ä¸€æ ·ï¼Œæ•°ç»„+é“¾è¡¨/çº¢é»‘äºŒå‰æ ‘ã€‚Hashtable å’Œ JDK1.8 ä¹‹å‰çš„ HashMap çš„åº•å±‚æ•°æ®ç»“æ„ç±»ä¼¼éƒ½æ˜¯é‡‡ç”¨ æ•°ç»„+é“¾è¡¨ çš„å½¢å¼ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼›</p><p>â€¢ å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ï¼ˆé‡è¦ï¼‰ï¼š</p><p>â—¦ åœ¨ JDK1.7 çš„æ—¶å€™ï¼ŒConcurrentHashMap å¯¹æ•´ä¸ªæ¡¶æ•°ç»„è¿›è¡Œäº†åˆ†å‰²åˆ†æ®µ(Segmentï¼Œåˆ†æ®µé”)ï¼Œæ¯ä¸€æŠŠé”åªé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼ˆä¸‹é¢æœ‰ç¤ºæ„å›¾ï¼‰ï¼Œå¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®ï¼Œå°±ä¸ä¼šå­˜åœ¨é”ç«äº‰ï¼Œæé«˜å¹¶å‘è®¿é—®ç‡ã€‚</p><p>â—¦ åˆ°äº† JDK1.8 çš„æ—¶å€™ï¼ŒConcurrentHashMap å·²ç»æ‘’å¼ƒäº† Segment çš„æ¦‚å¿µï¼Œè€Œæ˜¯ç›´æ¥ç”¨ Node æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼Œå¹¶å‘æ§åˆ¶ä½¿ç”¨ synchronized å’Œ CAS æ¥æ“ä½œã€‚ï¼ˆJDK1.6 ä»¥å synchronized é”åšäº†å¾ˆå¤šä¼˜åŒ–ï¼‰ æ•´ä¸ªçœ‹èµ·æ¥å°±åƒæ˜¯ä¼˜åŒ–è¿‡ä¸”çº¿ç¨‹å®‰å…¨çš„ HashMapï¼Œè™½ç„¶åœ¨ JDK1.8 ä¸­è¿˜èƒ½çœ‹åˆ° Segment çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å·²ç»ç®€åŒ–äº†å±æ€§ï¼Œåªæ˜¯ä¸ºäº†å…¼å®¹æ—§ç‰ˆæœ¬ï¼›</p><p>Hashtable(åŒä¸€æŠŠé”) :</p><p>ä½¿ç”¨ synchronized æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿè®¿é—®åŒæ­¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè¿›å…¥é˜»å¡æˆ–è½®è¯¢çŠ¶æ€ï¼Œå¦‚ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½ä½¿ç”¨ put æ·»åŠ å…ƒç´ ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ getï¼Œç«äº‰ä¼šè¶Šæ¥è¶Šæ¿€çƒˆæ•ˆç‡è¶Šä½ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸¤è€…åº•å±‚æ•°æ®ç»“æ„çš„å¯¹æ¯”å›¾ã€‚</p><p><strong>Hashtable :</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324553.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>JDK1.7 çš„ ConcurrentHashMapï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324554.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>Java7 ConcurrentHashMap å­˜å‚¨ç»“æ„ï¼š</strong></p><p>ConcurrentHashMap æ˜¯ç”± Segment æ•°ç»„ç»“æ„å’Œ HashEntry æ•°ç»„ç»“æ„ç»„æˆã€‚</p><p>Segment æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ åŒ…å«ä¸€ä¸ª HashEntry æ•°ç»„ï¼Œæ¯ä¸ª HashEntry æ•°ç»„å±äºé“¾è¡¨ç»“æ„ã€‚</p><p>JDK1.8 çš„ ConcurrentHashMapï¼š</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324555.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>Java8 ConcurrentHashMap å­˜å‚¨ç»“æ„ï¼š</strong></p><p>JDK1.8 çš„ ConcurrentHashMap ä¸å†æ˜¯ Segment æ•°ç»„ + HashEntry æ•°ç»„ + é“¾è¡¨ï¼Œè€Œæ˜¯ Node æ•°ç»„ + é“¾è¡¨ / çº¢é»‘æ ‘ã€‚ä¸è¿‡ï¼ŒNode åªèƒ½ç”¨äºé“¾è¡¨çš„æƒ…å†µï¼Œçº¢é»‘æ ‘çš„æƒ…å†µéœ€è¦ä½¿ç”¨ TreeNodeã€‚å½“å†²çªé“¾è¡¨è¾¾åˆ°ä¸€å®šé•¿åº¦æ—¶ï¼Œé“¾è¡¨ä¼šè½¬æ¢æˆçº¢é»‘æ ‘ã€‚</p><p>TreeNodeæ˜¯å­˜å‚¨çº¢é»‘æ ‘èŠ‚ç‚¹ï¼Œè¢«TreeBinåŒ…è£…ã€‚TreeBiné€šè¿‡rootå±æ€§ç»´æŠ¤çº¢é»‘æ ‘çš„æ ¹ç»“ç‚¹ï¼Œå› ä¸ºçº¢é»‘æ ‘åœ¨æ—‹è½¬çš„æ—¶å€™ï¼Œæ ¹ç»“ç‚¹å¯èƒ½ä¼šè¢«å®ƒåŸæ¥çš„å­èŠ‚ç‚¹æ›¿æ¢æ‰ï¼Œåœ¨è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹è¦å†™è¿™æ£µçº¢é»‘æ ‘å°±ä¼šå‘ç”Ÿçº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥åœ¨ ConcurrentHashMap ä¸­TreeBiné€šè¿‡waiterå±æ€§ç»´æŠ¤å½“å‰ä½¿ç”¨è¿™æ£µçº¢é»‘æ ‘çš„çº¿ç¨‹ï¼Œæ¥é˜²æ­¢å…¶ä»–çº¿ç¨‹çš„è¿›å…¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TreeBin</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">K</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">V</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Node</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">K</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">V</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    TreeNode</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">K</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">V</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> root</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    volatile</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TreeNode</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">K</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">V</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> first</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    volatile</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> waiter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    volatile</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> lockState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // values for lockState</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> WRITER </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // set while holding write lock</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> WAITER </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // set when waiting for write lock</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> READER </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // increment value for setting read lock</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-concurrenthashmap-çº¿ç¨‹å®‰å…¨çš„å…·ä½“å®ç°æ–¹å¼-åº•å±‚å…·ä½“å®ç°" tabindex="-1"><a class="header-anchor" href="#_7-concurrenthashmap-çº¿ç¨‹å®‰å…¨çš„å…·ä½“å®ç°æ–¹å¼-åº•å±‚å…·ä½“å®ç°"><span>7. ConcurrentHashMap çº¿ç¨‹å®‰å…¨çš„å…·ä½“å®ç°æ–¹å¼/åº•å±‚å…·ä½“å®ç°</span></a></h3><p><strong>JDK1.8 ä¹‹å‰ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324556.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>Java7 ConcurrentHashMap å­˜å‚¨ç»“æ„:</p><p>é¦–å…ˆå°†æ•°æ®åˆ†ä¸ºä¸€æ®µä¸€æ®µï¼ˆè¿™ä¸ªâ€œæ®µâ€å°±æ˜¯ Segmentï¼‰çš„å­˜å‚¨ï¼Œç„¶åç»™æ¯ä¸€æ®µæ•°æ®é…ä¸€æŠŠé”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®å…¶ä¸­ä¸€ä¸ªæ®µæ•°æ®æ—¶ï¼Œå…¶ä»–æ®µçš„æ•°æ®ä¹Ÿèƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚</p><p>ConcurrentHashMap æ˜¯ç”± Segment æ•°ç»„ç»“æ„å’Œ HashEntry æ•°ç»„ç»“æ„ç»„æˆã€‚</p><p>Segment ç»§æ‰¿äº† ReentrantLock,æ‰€ä»¥ Segment æ˜¯ä¸€ç§å¯é‡å…¥é”ï¼Œæ‰®æ¼”é”çš„è§’è‰²ã€‚HashEntry ç”¨äºå­˜å‚¨é”®å€¼å¯¹æ•°æ®ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Segment</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">K</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">V</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ReentrantLock</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Serializable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€ä¸ª ConcurrentHashMap é‡ŒåŒ…å«ä¸€ä¸ª Segment æ•°ç»„ï¼ŒSegment çš„ä¸ªæ•°ä¸€æ—¦åˆå§‹åŒ–å°±ä¸èƒ½æ”¹å˜ã€‚ Segmentæ•°ç»„çš„å¤§å°é»˜è®¤æ˜¯ 16ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤å¯ä»¥åŒæ—¶æ”¯æŒ 16 ä¸ªçº¿ç¨‹å¹¶å‘å†™ã€‚</p><p>Segment çš„ç»“æ„å’Œ HashMap ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§æ•°ç»„å’Œé“¾è¡¨ç»“æ„ï¼Œä¸€ä¸ª Segment åŒ…å«ä¸€ä¸ª HashEntry æ•°ç»„ï¼Œæ¯ä¸ª HashEntry æ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„çš„å…ƒç´ ï¼Œæ¯ä¸ª Segment å®ˆæŠ¤ç€ä¸€ä¸ª HashEntry æ•°ç»„é‡Œçš„å…ƒç´ ï¼Œå½“å¯¹ HashEntry æ•°ç»„çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¿…é¡»é¦–å…ˆè·å¾—å¯¹åº”çš„ Segment çš„é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹åŒä¸€ Segment çš„å¹¶å‘å†™å…¥ä¼šè¢«é˜»å¡ï¼Œä¸åŒ Segment çš„å†™å…¥æ˜¯å¯ä»¥å¹¶å‘æ‰§è¡Œçš„ã€‚</p><p><strong>JDK1.8 ä¹‹åï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324557.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>Java8 ConcurrentHashMap å­˜å‚¨ç»“æ„ï¼š</p><p>Java 8 å‡ ä¹å®Œå…¨é‡å†™äº† <code>ConcurrentHashMap</code>ï¼Œä»£ç é‡ä»åŸæ¥ Java 7 ä¸­çš„ 1000 å¤šè¡Œï¼Œå˜æˆäº†ç°åœ¨çš„ 6000 å¤šè¡Œã€‚</p><p><code>ConcurrentHashMap</code> å–æ¶ˆäº† <code>Segment</code> åˆ†æ®µé”ï¼Œé‡‡ç”¨ <code>Node + CAS + synchronized</code> æ¥ä¿è¯å¹¶å‘å®‰å…¨ã€‚æ•°æ®ç»“æ„è·Ÿ <code>HashMap</code> 1.8 çš„ç»“æ„ç±»ä¼¼ï¼ŒNode æ•°ç»„+é“¾è¡¨/çº¢é»‘äºŒå‰æ ‘ã€‚Java 8 åœ¨é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼ˆ8ï¼‰æ—¶å°†é“¾è¡¨ï¼ˆå¯»å€æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼‰è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼ˆå¯»å€æ—¶é—´å¤æ‚åº¦ä¸º O(log(N))ï¼‰ã€‚</p><p>Java 8 ä¸­ï¼Œé”ç²’åº¦æ›´ç»†ï¼Œ<code>synchronized</code> åªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘äºŒå‰æ ‘çš„é¦–èŠ‚ç‚¹ï¼Œè¿™æ ·åªè¦ hash ä¸å†²çªï¼Œå°±ä¸ä¼šäº§ç”Ÿå¹¶å‘ï¼Œå°±ä¸ä¼šå½±å“å…¶ä»– Node çš„è¯»å†™ï¼Œæ•ˆç‡å¤§å¹…æå‡ã€‚</p><h3 id="_8-jdk-1-7-å’Œ-jdk-1-8-çš„-concurrenthashmap-å®ç°æœ‰ä»€ä¹ˆä¸åŒ" tabindex="-1"><a class="header-anchor" href="#_8-jdk-1-7-å’Œ-jdk-1-8-çš„-concurrenthashmap-å®ç°æœ‰ä»€ä¹ˆä¸åŒ"><span>8. JDK 1.7 å’Œ JDK 1.8 çš„ ConcurrentHashMap å®ç°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</span></a></h3><ul><li><strong>çº¿ç¨‹å®‰å…¨å®ç°æ–¹å¼</strong>ï¼šJDK 1.7 é‡‡ç”¨ <code>Segment</code> åˆ†æ®µé”æ¥ä¿è¯å®‰å…¨ï¼Œ <code>Segment</code> æ˜¯ç»§æ‰¿è‡ª <code>ReentrantLock</code>ã€‚JDK1.8 æ”¾å¼ƒäº† <code>Segment</code> åˆ†æ®µé”çš„è®¾è®¡ï¼Œé‡‡ç”¨ <code>Node + CAS + synchronized</code> ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œé”ç²’åº¦æ›´ç»†ï¼Œ<code>synchronized</code> åªé”å®šå½“å‰é“¾è¡¨æˆ–çº¢é»‘äºŒå‰æ ‘çš„é¦–èŠ‚ç‚¹ã€‚</li><li><strong>Hash ç¢°æ’è§£å†³æ–¹æ³•</strong> : JDK 1.7 é‡‡ç”¨æ‹‰é“¾æ³•ï¼ŒJDK1.8 é‡‡ç”¨æ‹‰é“¾æ³•ç»“åˆçº¢é»‘æ ‘ï¼ˆé“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼ˆ8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼‰ã€‚</li><li><strong>å¹¶å‘åº¦</strong>ï¼šJDK 1.7 æœ€å¤§å¹¶å‘åº¦æ˜¯ Segment çš„ä¸ªæ•°ï¼Œé»˜è®¤æ˜¯ 16ã€‚JDK 1.8 æœ€å¤§å¹¶å‘åº¦æ˜¯ Node æ•°ç»„çš„å¤§å°ï¼Œå¹¶å‘åº¦æ›´å¤§ã€‚</li></ul><h2 id="ä¸‰ã€å¹¶å‘" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å¹¶å‘"><span>ä¸‰ã€å¹¶å‘</span></a></h2><h3 id="_1-çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_1-çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«"><span>1. çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«</span></a></h3><p>è¿›ç¨‹ï¼š</p><p>è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œå› æ­¤è¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚ç³»ç»Ÿè¿è¡Œä¸€ä¸ªç¨‹åºå³æ˜¯ä¸€ä¸ªè¿›ç¨‹ä»åˆ›å»ºï¼Œè¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚</p><p>åœ¨ Java ä¸­ï¼Œå½“æˆ‘ä»¬å¯åŠ¨ main å‡½æ•°æ—¶å…¶å®å°±æ˜¯å¯åŠ¨äº†ä¸€ä¸ª JVM çš„è¿›ç¨‹ï¼Œè€Œ main å‡½æ•°æ‰€åœ¨çš„çº¿ç¨‹å°±æ˜¯è¿™ä¸ªè¿›ç¨‹ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿç§°ä¸»çº¿ç¨‹ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ Windows ä¸­é€šè¿‡æŸ¥çœ‹ä»»åŠ¡ç®¡ç†å™¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¸…æ¥šçœ‹åˆ° Windows å½“å‰è¿è¡Œçš„è¿›ç¨‹ï¼ˆ<code>.exe</code> æ–‡ä»¶çš„è¿è¡Œï¼‰ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324558.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>çº¿ç¨‹ï¼š</p><p>çº¿ç¨‹ä¸è¿›ç¨‹ç›¸ä¼¼ï¼Œä½†çº¿ç¨‹æ˜¯ä¸€ä¸ªæ¯”è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹åœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚ä¸è¿›ç¨‹ä¸åŒçš„æ˜¯åŒç±»çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å †å’Œæ–¹æ³•åŒºèµ„æºï¼Œä½†æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œæ‰€ä»¥ç³»ç»Ÿåœ¨äº§ç”Ÿä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–æ˜¯åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´åšåˆ‡æ¢å·¥ä½œæ—¶ï¼Œè´Ÿæ‹…è¦æ¯”è¿›ç¨‹å°å¾—å¤šï¼Œä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œçº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚</p><p>Java ç¨‹åºå¤©ç”Ÿå°±æ˜¯å¤šçº¿ç¨‹ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ JMX æ¥çœ‹çœ‹ä¸€ä¸ªæ™®é€šçš„ Java ç¨‹åºæœ‰å“ªäº›çº¿ç¨‹ï¼Œä»£ç å¦‚ä¸‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MultiThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		// è·å– Java çº¿ç¨‹ç®¡ç† MXBean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">	ThreadMXBean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> threadMXBean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ManagementFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getThreadMXBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		// ä¸éœ€è¦è·å–åŒæ­¥çš„ monitor å’Œ synchronizer ä¿¡æ¯ï¼Œä»…è·å–çº¿ç¨‹å’Œçº¿ç¨‹å †æ ˆä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">		ThreadInfo</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">threadInfos</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> threadMXBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dumpAllThreads</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">		// éå†çº¿ç¨‹ä¿¡æ¯ï¼Œä»…æ‰“å°çº¿ç¨‹ ID å’Œçº¿ç¨‹åç§°ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ThreadInfo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> threadInfo</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> threadInfos) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">			System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> threadInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getThreadId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;] &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> threadInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getThreadName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ç¨‹åºè¾“å‡ºå¦‚ä¸‹ï¼ˆè¾“å‡ºå†…å®¹å¯èƒ½ä¸åŒï¼Œä¸ç”¨å¤ªçº ç»“ä¸‹é¢æ¯ä¸ªçº¿ç¨‹çš„ä½œç”¨ï¼Œåªç”¨çŸ¥é“ main çº¿ç¨‹æ‰§è¡Œ main æ–¹æ³•å³å¯ï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">] </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Attach</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Listener </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//æ·»åŠ äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">] </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Signal</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Dispatcher </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åˆ†å‘å¤„ç†ç»™ JVM ä¿¡å·çš„çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">] Finalizer </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//è°ƒç”¨å¯¹è±¡ finalize æ–¹æ³•çš„çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">] </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Reference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Handler </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//æ¸…é™¤ reference çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">] main </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//main çº¿ç¨‹,ç¨‹åºå…¥å£</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ä¸Šé¢çš„è¾“å‡ºå†…å®¹å¯ä»¥çœ‹å‡ºï¼šä¸€ä¸ª Java ç¨‹åºçš„è¿è¡Œæ˜¯ main çº¿ç¨‹å’Œå¤šä¸ªå…¶ä»–çº¿ç¨‹åŒæ—¶è¿è¡Œã€‚</p><p>ä¸‹å›¾æ˜¯ Java å†…å­˜åŒºåŸŸï¼Œé€šè¿‡ä¸‹å›¾æˆ‘ä»¬ä» JVM çš„è§’åº¦æ¥è¯´ä¸€ä¸‹çº¿ç¨‹å’Œè¿›ç¨‹ä¹‹é—´çš„å…³ç³»ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324559.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>Java è¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼ˆJDK1.8 ä¹‹åï¼‰ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼šä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å †å’Œæ–¹æ³•åŒº (JDK1.8 ä¹‹åçš„å…ƒç©ºé—´)èµ„æºï¼Œä½†æ˜¯æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆ å’Œ æœ¬åœ°æ–¹æ³•æ ˆã€‚</p><p>æ€»ç»“ï¼šçº¿ç¨‹æ˜¯è¿›ç¨‹åˆ’åˆ†æˆçš„æ›´å°çš„è¿è¡Œå•ä½ã€‚çº¿ç¨‹å’Œè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºåŸºæœ¬ä¸Šå„è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œå„çº¿ç¨‹åˆ™ä¸ä¸€å®šï¼Œå› ä¸ºåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ææœ‰å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚çº¿ç¨‹æ‰§è¡Œå¼€é”€å°ï¼Œä½†ä¸åˆ©äºèµ„æºçš„ç®¡ç†å’Œä¿æŠ¤ï¼›è€Œè¿›ç¨‹æ­£ç›¸åã€‚</p><h3 id="_2-åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"><span>2. åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</span></a></h3><ol><li>ç»§æ‰¿ Thread ç±»ï¼š</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª Thread ç±»çš„çº¿ç¨‹ç±»</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyThread</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Thread running&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åˆ›å»ºçº¿ç¨‹å®ä¾‹ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        MyThread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> thread</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>å®ç° Runnable æ¥å£ï¼š</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å®šä¹‰ä¸€ä¸ªå®ç° Runnable æ¥å£çš„çº¿ç¨‹ç±»</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyRunnable</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Thread running&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åˆ›å»ºçº¿ç¨‹å®ä¾‹ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        MyRunnable</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyRunnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> thread</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(runnable);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼š</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> thread</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Thread running&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼š</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> thread</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Thread running&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_3-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€"><span>3. çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324560.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>â€¢ NEW: åˆå§‹çŠ¶æ€ï¼Œçº¿ç¨‹è¢«åˆ›å»ºå‡ºæ¥ä½†æ²¡æœ‰è¢«è°ƒç”¨ start() ã€‚</p><p>â€¢ RUNNABLE: è¿è¡ŒçŠ¶æ€ï¼Œçº¿ç¨‹è¢«è°ƒç”¨äº† start()ç­‰å¾…è¿è¡Œçš„çŠ¶æ€ã€‚</p><p>â€¢ BLOCKEDï¼šé˜»å¡çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…é”é‡Šæ”¾ã€‚</p><p>â€¢ WAITINGï¼šç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹æ˜¾å¼åœ°å”¤é†’å®ƒã€‚çº¿ç¨‹å¯ä»¥è°ƒç”¨ Object ç±»çš„ wait()æ–¹æ³•ã€join()æ–¹æ³•æˆ– Lock ç±»çš„æ¡ä»¶ç­‰å¾…æ–¹æ³•è¿›å…¥æ­¤çŠ¶æ€ã€‚</p><p>â€¢ TIME_WAITINGï¼šè¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´åè‡ªè¡Œè¿”å›è€Œä¸æ˜¯åƒ WAITING é‚£æ ·ä¸€ç›´ç­‰å¾…ã€‚</p><p>â€¢ TERMINATEDï¼šç»ˆæ­¢çŠ¶æ€ï¼Œè¡¨ç¤ºè¯¥çº¿ç¨‹å·²ç»è¿è¡Œå®Œæ¯•ã€‚</p><h3 id="_4-çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢" tabindex="-1"><a class="header-anchor" href="#_4-çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢"><span>4. çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</span></a></h3><p>çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šæœ‰è‡ªå·±çš„è¿è¡Œæ¡ä»¶å’ŒçŠ¶æ€ï¼ˆä¹Ÿç§°ä¸Šä¸‹æ–‡ï¼‰ï¼Œæ¯”å¦‚ä¸Šæ–‡æ‰€è¯´åˆ°è¿‡çš„ç¨‹åºè®¡æ•°å™¨ï¼Œæ ˆä¿¡æ¯ç­‰ã€‚å½“å‡ºç°å¦‚ä¸‹æƒ…å†µçš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šä»å ç”¨ CPU çŠ¶æ€ä¸­é€€å‡ºã€‚</p><p>â€¢ ä¸»åŠ¨è®©å‡º CPUï¼Œæ¯”å¦‚è°ƒç”¨äº† sleep(), wait() ç­‰ã€‚</p><p>â€¢ æ—¶é—´ç‰‡ç”¨å®Œï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿè¦é˜²æ­¢ä¸€ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹é•¿æ—¶é—´å ç”¨ CPU å¯¼è‡´å…¶ä»–çº¿ç¨‹æˆ–è€…è¿›ç¨‹é¥¿æ­»ã€‚</p><p>â€¢ è°ƒç”¨äº†é˜»å¡ç±»å‹çš„ç³»ç»Ÿä¸­æ–­ï¼Œæ¯”å¦‚è¯·æ±‚ IOï¼Œçº¿ç¨‹è¢«é˜»å¡ã€‚</p><p>â€¢ è¢«ç»ˆæ­¢æˆ–ç»“æŸè¿è¡Œ</p><p>è¿™å…¶ä¸­å‰ä¸‰ç§éƒ½ä¼šå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹åˆ‡æ¢æ„å‘³ç€éœ€è¦ä¿å­˜å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œç­‰å¾…çº¿ç¨‹ä¸‹æ¬¡å ç”¨ CPU çš„æ—¶å€™æ¢å¤ç°åœºï¼Œå¹¶åŠ è½½ä¸‹ä¸€ä¸ªå°†è¦å ç”¨ CPU çš„çº¿ç¨‹ä¸Šä¸‹æ–‡ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><h3 id="_5-sleep-å’Œ-wait-æ–¹æ³•å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_5-sleep-å’Œ-wait-æ–¹æ³•å¯¹æ¯”"><span>5. sleep() å’Œ wait() æ–¹æ³•å¯¹æ¯”</span></a></h3><p>å…±åŒç‚¹ï¼šä¸¤è€…éƒ½å¯ä»¥æš‚åœçº¿ç¨‹çš„æ‰§è¡Œã€‚</p><p>åŒºåˆ«ï¼š</p><p>â€¢ sleep() æ–¹æ³•æ²¡æœ‰é‡Šæ”¾é”ï¼Œè€Œ wait() æ–¹æ³•é‡Šæ”¾äº†é” ã€‚</p><p>â€¢ wait() é€šå¸¸è¢«ç”¨äºçº¿ç¨‹é—´äº¤äº’/é€šä¿¡ï¼Œsleep()é€šå¸¸è¢«ç”¨äºæš‚åœæ‰§è¡Œã€‚</p><p>â€¢ wait() æ–¹æ³•è¢«è°ƒç”¨åï¼Œçº¿ç¨‹ä¸ä¼šè‡ªåŠ¨è‹é†’ï¼Œéœ€è¦åˆ«çš„çº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„ notify()æˆ–è€… notifyAll() æ–¹æ³•ã€‚| sleep()æ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ wait(long timeout) è¶…æ—¶åçº¿ç¨‹ä¼šè‡ªåŠ¨è‹é†’ã€‚</p><p>â€¢ sleep() æ˜¯ Thread ç±»çš„é™æ€æœ¬åœ°æ–¹æ³•ï¼Œwait() åˆ™æ˜¯ Object ç±»çš„æœ¬åœ°æ–¹æ³•ã€‚</p><h3 id="_6-å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«"><span>6. å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«</span></a></h3><ul><li><strong>å¹¶å‘</strong>ï¼šä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€ <strong>æ—¶é—´æ®µ</strong> å†…æ‰§è¡Œã€‚</li><li><strong>å¹¶è¡Œ</strong>ï¼šä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€ <strong>æ—¶åˆ»</strong> æ‰§è¡Œã€‚</li></ul><p>æœ€å…³é”®çš„ç‚¹æ˜¯ï¼šæ˜¯å¦æ˜¯ <strong>åŒæ—¶</strong> æ‰§è¡Œã€‚</p><h3 id="_7-åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_7-åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«"><span>7. åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«</span></a></h3><ul><li><strong>åŒæ­¥</strong>ï¼šå‘å‡ºä¸€ä¸ªè°ƒç”¨ä¹‹åï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œ è¯¥è°ƒç”¨å°±ä¸å¯ä»¥è¿”å›ï¼Œä¸€ç›´ç­‰å¾…ã€‚</li><li><strong>å¼‚æ­¥</strong>ï¼šè°ƒç”¨åœ¨å‘å‡ºä¹‹åï¼Œä¸ç”¨ç­‰å¾…è¿”å›ç»“æœï¼Œè¯¥è°ƒç”¨ç›´æ¥è¿”å›ã€‚</li></ul><h3 id="_8-çº¿ç¨‹è°ƒåº¦æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_8-çº¿ç¨‹è°ƒåº¦æ–¹å¼"><span>8. çº¿ç¨‹è°ƒåº¦æ–¹å¼</span></a></h3><ul><li><strong>æŠ¢å å¼è°ƒåº¦ï¼ˆPreemptive Schedulingï¼‰</strong>ï¼šæ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶æš‚åœå½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œå¹¶åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚è¿™ç§åˆ‡æ¢é€šå¸¸æ˜¯ç”±ç³»ç»Ÿæ—¶é’Ÿä¸­æ–­ï¼ˆæ—¶é—´ç‰‡è½®è½¬ï¼‰æˆ–å…¶ä»–é«˜ä¼˜å…ˆçº§äº‹ä»¶ï¼ˆå¦‚ I/O æ“ä½œå®Œæˆï¼‰è§¦å‘çš„ã€‚è¿™ç§æ–¹å¼å­˜åœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼Œä½†å…¬å¹³æ€§å’Œ CPU èµ„æºåˆ©ç”¨ç‡è¾ƒå¥½ï¼Œä¸æ˜“é˜»å¡ã€‚</li><li><strong>ååŒå¼è°ƒåº¦ï¼ˆCooperative Schedulingï¼‰</strong>ï¼šçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œä¸»åŠ¨é€šçŸ¥ç³»ç»Ÿåˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ã€‚è¿™ç§æ–¹å¼å¯ä»¥å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼Œä½†å…¬å¹³æ€§è¾ƒå·®ï¼Œå®¹æ˜“é˜»å¡ã€‚</li></ul><p>Java ä½¿ç”¨çš„çº¿ç¨‹è°ƒåº¦æ˜¯æŠ¢å å¼çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒJVM æœ¬èº«ä¸è´Ÿè´£çº¿ç¨‹çš„è°ƒåº¦ï¼Œè€Œæ˜¯å°†çº¿ç¨‹çš„è°ƒåº¦å§”æ‰˜ç»™æ“ä½œç³»ç»Ÿã€‚æ“ä½œç³»ç»Ÿé€šå¸¸ä¼šåŸºäºçº¿ç¨‹ä¼˜å…ˆçº§å’Œæ—¶é—´ç‰‡æ¥è°ƒåº¦çº¿ç¨‹çš„æ‰§è¡Œï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹é€šå¸¸è·å¾— CPU æ—¶é—´ç‰‡çš„æœºä¼šæ›´å¤šã€‚</p><h3 id="_9-æ­»é”" tabindex="-1"><a class="header-anchor" href="#_9-æ­»é”"><span>9. æ­»é”</span></a></h3><p><a href="https://javaguide.cn/java/concurrent/java-concurrent-questions-01.html" target="_blank" rel="noopener noreferrer">Javaå¹¶å‘å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸Šï¼‰</a></p><p>çº¿ç¨‹æ­»é”æè¿°çš„æ˜¯è¿™æ ·ä¸€ç§æƒ…å†µï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è¢«é˜»å¡ï¼Œå®ƒä»¬ä¸­çš„ä¸€ä¸ªæˆ–è€…å…¨éƒ¨éƒ½åœ¨ç­‰å¾…æŸä¸ªèµ„æºè¢«é‡Šæ”¾ã€‚ç”±äºçº¿ç¨‹è¢«æ— é™æœŸåœ°é˜»å¡ï¼Œå› æ­¤ç¨‹åºä¸å¯èƒ½æ­£å¸¸ç»ˆæ­¢ã€‚</p><p>æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</p><ol><li>äº’æ–¥æ¡ä»¶ï¼šè¯¥èµ„æºä»»æ„ä¸€ä¸ªæ—¶åˆ»åªç”±ä¸€ä¸ªçº¿ç¨‹å ç”¨ã€‚</li><li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªæœ‰è‡ªå·±ä½¿ç”¨å®Œæ¯•åæ‰é‡Šæ”¾èµ„æºã€‚</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li></ol><h3 id="_10-jmm" tabindex="-1"><a class="header-anchor" href="#_10-jmm"><span>10. JMM</span></a></h3><p>Javaè™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰äº†Javaå†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰ï¼Œç”¨äºå±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä»¥å®ç°è®©Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å¹¶å‘æ•ˆæœã€‚</p><p>JMMè§„èŒƒäº†Javaè™šæ‹Ÿæœºä¸è®¡ç®—æœºå†…å­˜æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ï¼šè§„å®šäº†ä¸€ä¸ªçº¿ç¨‹å¦‚ä½•å’Œä½•æ—¶å¯ä»¥çœ‹åˆ°ç”±å…¶ä»–çº¿ç¨‹ä¿®æ”¹è¿‡åçš„å…±äº«å˜é‡çš„å€¼ï¼Œä»¥åŠåœ¨å¿…é¡»æ—¶å¦‚ä½•åŒæ­¥çš„è®¿é—®å…±äº«å˜é‡ã€‚</p><p>JMMæè¿°çš„æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œä¸€ç»„è§„åˆ™ï¼Œé€šè¿‡è¿™ç»„è§„åˆ™æ§åˆ¶ç¨‹åºä¸­å„ä¸ªå˜é‡åœ¨å…±äº«æ•°æ®åŒºåŸŸå’Œç§æœ‰æ•°æ®åŒºåŸŸçš„è®¿é—®æ–¹å¼ï¼ŒJMMæ˜¯å›´ç»•åŸå­æ€§ã€æœ‰åºæ€§ã€å¯è§æ€§å±•å¼€çš„ã€‚å®ƒæè¿°äº†ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜çš„äº¤äº’æ“ä½œï¼Œå¦‚ï¼šlockã€unlockã€readã€loadã€useã€assignã€storeå’Œwriteï¼Œå¹¶è®¾å®šäº†è¿™äº›æ“ä½œçš„æ‰§è¡Œè§„åˆ™ï¼Œä»¥ä¿è¯å¹¶å‘ç¨‹åºçš„æ­£ç¡®æ€§ã€‚</p><h3 id="_11-å¯è§æ€§" tabindex="-1"><a class="header-anchor" href="#_11-å¯è§æ€§"><span>11. å¯è§æ€§</span></a></h3><p>ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿçœ‹åˆ°ä¿®æ”¹çš„å€¼ã€‚</p><p>Javaå†…å­˜æ¨¡å‹æ˜¯é€šè¿‡åœ¨å˜é‡ä¿®æ”¹åå°†æ–°å€¼åŒæ­¥å›ä¸»å†…å­˜ï¼Œåœ¨å˜é‡è¯»å–å‰ä»ä¸»å†…å­˜åˆ·æ–°å˜é‡å€¼è¿™ç§ä¾èµ–ä¸»å†…å­˜ä½œä¸ºä¼ é€’åª’ä»‹çš„æ–¹æ³•æ¥å®ç°å¯è§æ€§çš„ã€‚</p><p>å¦‚ä½•ä¿è¯å¯è§æ€§</p><p>é€šè¿‡ volatile å…³é”®å­—ä¿è¯å¯è§æ€§ã€‚</p><p>é€šè¿‡ å†…å­˜å±éšœ ä¿è¯å¯è§æ€§ã€‚</p><p>é€šè¿‡ synchronized å…³é”®å­—ä¿è¯å¯è§æ€§ã€‚</p><p>é€šè¿‡ Lock ä¿è¯å¯è§æ€§ã€‚</p><p>é€šè¿‡ final å…³é”®å­—ä¿è¯å¯è§æ€§</p><h3 id="_12-æœ‰åºæ€§" tabindex="-1"><a class="header-anchor" href="#_12-æœ‰åºæ€§"><span>12. æœ‰åºæ€§</span></a></h3><p>ç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚JVM å­˜åœ¨æŒ‡ä»¤é‡æ’ï¼Œæ‰€ä»¥å­˜åœ¨æœ‰åºæ€§é—®é¢˜ã€‚</p><p>å¦‚ä½•ä¿è¯æœ‰åºæ€§</p><p>é€šè¿‡ volatile å…³é”®å­—ä¿è¯æœ‰åºæ€§ã€‚</p><p>é€šè¿‡ å†…å­˜å±éšœä¿è¯æœ‰åºæ€§ã€‚</p><p>é€šè¿‡ synchronized å…³é”®å­—ä¿è¯æœ‰åºæ€§ã€‚</p><p>é€šè¿‡ Lock ä¿è¯æœ‰åºæ€§ã€‚</p><h3 id="_13-åŸå­æ€§" tabindex="-1"><a class="header-anchor" href="#_13-åŸå­æ€§"><span>13. åŸå­æ€§</span></a></h3><p>ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œä¸”åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸è¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</p><p>åœ¨ Javaä¸­ï¼Œå¯¹åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡çš„è¯»å–å’Œèµ‹å€¼æ“ä½œæ˜¯åŸå­æ€§æ“ä½œï¼ˆ64ä½å¤„ç†å™¨ï¼‰ã€‚ä¸é‡‡å–ä»»ä½•çš„åŸå­æ€§ä¿éšœæªæ–½çš„è‡ªå¢æ“ä½œå¹¶ä¸æ˜¯åŸå­æ€§çš„ã€‚</p><p>å¦‚ä½•ä¿è¯åŸå­æ€§</p><p>é€šè¿‡ synchronized å…³é”®å­—ä¿è¯åŸå­æ€§ã€‚</p><p>é€šè¿‡ Lock ä¿è¯åŸå­æ€§ã€‚</p><p>é€šè¿‡ CAS ä¿è¯åŸå­æ€§ã€‚</p><h3 id="_14-cas" tabindex="-1"><a class="header-anchor" href="#_14-cas"><span>14. <a href="https://blog.csdn.net/u012581020/article/details/132165800" target="_blank" rel="noopener noreferrer">CAS</a></span></a></h3><p>CASï¼ˆCompare and Swapï¼‰æ¯”è¾ƒä¸äº¤æ¢æ˜¯ä¸€ç§å¹¶å‘ç¼–ç¨‹ä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç”¨äºè§£å†³å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¹¶å‘è®¿é—®é—®é¢˜ã€‚CASæ“ä½œæ˜¯ä¸€ç§åŸå­æ“ä½œï¼Œå®ƒå¯ä»¥æä¾›çº¿ç¨‹å®‰å…¨ï¼Œé¿å…äº†ä½¿ç”¨ä¼ ç»Ÿé”æœºåˆ¶æ‰€å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚</p><p>å®ç°çº¿ç¨‹å®‰å…¨çš„å¹¶å‘æ§åˆ¶ï¼šCASæ“ä½œå¯ä»¥ä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å¯¹å…±äº«æ•°æ®è¿›è¡ŒåŸå­æ€§çš„è¯»å†™æ“ä½œï¼Œä»è€Œé¿å…äº†å¤šçº¿ç¨‹å¹¶å‘è®¿é—®æ—¶å¯èƒ½å¼•å‘çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚å®ƒæä¾›äº†ä¸€ç§åŸºäºç¡¬ä»¶å±‚é¢çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ã€‚</p><p>æé«˜æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ï¼šç›¸æ¯”äºä¼ ç»Ÿçš„é”æœºåˆ¶ï¼ŒCASæ“ä½œ<strong>ä¸éœ€è¦</strong>é˜»å¡çº¿ç¨‹æˆ–åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§ä¹è§‚é”æœºåˆ¶ã€‚è¿™ä½¿å¾—CASåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å…·æœ‰æ›´å¥½çš„æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ï¼Œå°¤å…¶é€‚ç”¨äºç»†ç²’åº¦çš„å¹¶å‘æ§åˆ¶ã€‚</p><p>è§£å†³ABAé—®é¢˜ï¼šCASæ“ä½œä½¿ç”¨æœŸæœ›å€¼æ¥åˆ¤æ–­å…±äº«æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼Œä½†å®ƒæ— æ³•æ£€æµ‹åˆ°å…±äº«æ•°æ®åœ¨æ“ä½œè¿‡ç¨‹ä¸­ç»å†äº†å¤šæ¬¡ä¿®æ”¹ï¼Œç„¶ååˆå›åˆ°äº†æœŸæœ›å€¼çš„æƒ…å†µï¼Œå³ABAé—®é¢˜ã€‚ä¸ºäº†è§£å†³ABAé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ã€å¼•ç”¨æ›´æ–°ç­‰æŠ€æœ¯ã€‚</p><p>æ”¯æŒæ— é”ç®—æ³•ï¼šCASæ“ä½œå¯ä»¥ç”¨äºå®ç°ä¸€äº›æ— é”ç®—æ³•ï¼Œå¦‚éé˜»å¡æ•°æ®ç»“æ„å’Œå¹¶å‘å®¹å™¨ã€‚æ— é”ç®—æ³•å¯ä»¥é¿å…çº¿ç¨‹é—´çš„ç«äº‰å’Œé˜»å¡ï¼Œæé«˜ç¨‹åºçš„ååé‡å’Œæ•ˆç‡ã€‚</p><p>å¹¶å‘æ•°æ®ç»“æ„ä¸­çš„åº”ç”¨ï¼šCASæ“ä½œåœ¨å¹¶å‘æ•°æ®ç»“æ„ä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œå¦‚é«˜æ€§èƒ½é˜Ÿåˆ—ã€è®¡æ•°å™¨ã€æ•£åˆ—è¡¨ç­‰ã€‚å®ƒå¯ä»¥ä¿è¯å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹å…±äº«æ•°æ®è¿›è¡Œè¯»å†™æ—¶çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324561.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324562.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_15-volatile-å…³é”®å­—" tabindex="-1"><a class="header-anchor" href="#_15-volatile-å…³é”®å­—"><span>15. volatile å…³é”®å­—</span></a></h3><ol><li>volatileä¿è¯äº†å¯è§æ€§ã€æœ‰åºæ€§</li><li>volatileä¸æ”¯æŒåŸå­æ€§ï¼Œé€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯</li></ol><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324563.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å®ç°å¯è§æ€§ï¼š</p><p><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324564.png" alt="img" loading="lazy"><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324565.png" alt="img" loading="lazy"></p><p>å®ç°æœ‰åºæ€§ï¼š</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324566.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä½¿ç”¨åœºæ™¯</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324567.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_16-synchronized-å…³é”®å­—" tabindex="-1"><a class="header-anchor" href="#_16-synchronized-å…³é”®å­—"><span>16. synchronized å…³é”®å­—</span></a></h3><p><code>synchronized</code> æ˜¯ Java ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç¿»è¯‘æˆä¸­æ–‡æ˜¯åŒæ­¥çš„æ„æ€ï¼Œä¸»è¦è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ï¼Œå¯ä»¥ä¿è¯è¢«å®ƒä¿®é¥°çš„æ–¹æ³•æˆ–è€…ä»£ç å—åœ¨ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚</p><p>ä¿è¯åŸå­æ€§ï¼š</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324568.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324569.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åº•å±‚åŸç†ï¼š</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324570.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å•†å“çš„åº“å­˜ä¸€å…±åä¸‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> stockCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //æ¨¡æ‹Ÿä¸€ç›´åœ¨è¿›è¡Œå–å‡ºï¼Œæ¯å–å‡ºä¸€ä»¶å°†å¯¹å•†å“çš„åº“å­˜å‡1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++){</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            stockCount--;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        StockSample</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sample</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹1</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹2</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stockCount);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li>ä¿®é¥°ä¸€ä¸ªå®ä¾‹çš„æ–¹æ³•</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å•†å“çš„åº“å­˜ä¸€å…±åä¸‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> stockCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //æ¨¡æ‹Ÿä¸€ç›´åœ¨è¿›è¡Œå–å‡ºï¼Œæ¯å–å‡ºä¸€ä»¶å°†å¯¹å•†å“çš„åº“å­˜å‡1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++){</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            stockCount--;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        StockSample</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sample</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹1</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹2</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stockCount);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä¿®é¥°ä¸€ä¸ªç±»æ–¹æ³•</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å•†å“çš„åº“å­˜ä¸€å…±åä¸‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> stockCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //æ¨¡æ‹Ÿä¸€ç›´åœ¨è¿›è¡Œå–å‡ºï¼Œæ¯å–å‡ºä¸€ä»¶å°†å¯¹å•†å“çš„åº“å­˜å‡1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++){</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            stockCount--;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // StockSample sample = new StockSample();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹1</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹2</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stockCount);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä¿®é¥°ä¸€ä¸ªä»£ç å—</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StockSample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å•†å“çš„åº“å­˜ä¸€å…±åä¸‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> stockCount </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // private static volatile int value;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // get value</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        synchronized</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // æ¨¡æ‹Ÿä¸€ç›´åœ¨è¿›è¡Œå–å‡ºï¼Œæ¯å–å‡ºä¸€ä»¶å°†å¯¹å•†å“çš„åº“å­˜å‡1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                stockCount--;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // StockSample sample = new StockSample();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹1</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çº¿ç¨‹2</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> t2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            sample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deduct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stockCount);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¼˜åŒ–ï¼š</p><p>åœ¨ Java 6 ä¹‹åï¼Œ <code>synchronized</code> å¼•å…¥äº†å¤§é‡çš„ä¼˜åŒ–å¦‚è‡ªæ—‹é”ã€é€‚åº”æ€§è‡ªæ—‹é”ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ã€åå‘é”ã€è½»é‡çº§é”ç­‰æŠ€æœ¯æ¥å‡å°‘é”æ“ä½œçš„å¼€é”€ï¼Œè¿™äº›ä¼˜åŒ–è®© <code>synchronized</code> é”çš„æ•ˆç‡æå‡äº†å¾ˆå¤šã€‚å› æ­¤ï¼Œ <code>synchronized</code> è¿˜æ˜¯å¯ä»¥åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„ï¼Œåƒ JDK æºç ã€å¾ˆå¤šå¼€æºæ¡†æ¶éƒ½å¤§é‡ä½¿ç”¨äº† <code>synchronized</code> ã€‚</p><p>å…³äºåå‘é”å¤šè¡¥å……ä¸€ç‚¹ï¼šç”±äºåå‘é”å¢åŠ äº† JVM çš„å¤æ‚æ€§ï¼ŒåŒæ—¶ä¹Ÿå¹¶æ²¡æœ‰ä¸ºæ‰€æœ‰åº”ç”¨éƒ½å¸¦æ¥æ€§èƒ½æå‡ã€‚å› æ­¤ï¼Œåœ¨ JDK15 ä¸­ï¼Œåå‘é”è¢«é»˜è®¤å…³é—­ï¼ˆä»ç„¶å¯ä»¥ä½¿ç”¨ <code>-XX:+UseBiasedLocking</code> å¯ç”¨åå‘é”ï¼‰ï¼Œåœ¨ JDK18 ä¸­ï¼Œåå‘é”å·²ç»è¢«å½»åº•åºŸå¼ƒï¼ˆæ— æ³•é€šè¿‡å‘½ä»¤è¡Œæ‰“å¼€ï¼‰ã€‚</p><h3 id="_17-synchronized-å’Œ-volatile-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_17-synchronized-å’Œ-volatile-åŒºåˆ«"><span>17. synchronized å’Œ volatile åŒºåˆ«</span></a></h3><ul><li><code>volatile</code> å…³é”®å­—æ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡çº§å®ç°ï¼Œ<code>synchronized</code>å…³é”®å­—æ˜¯çº¿ç¨‹åŒæ­¥çš„é‡é‡çº§å®ç°ã€‚</li><li><code>volatile</code> å…³é”®å­—åªèƒ½ç”¨äºå˜é‡è€Œï¼Œ<code>synchronized</code> å…³é”®å­—å¯ä»¥ä¿®é¥°æ–¹æ³•ä»¥åŠä»£ç å— ã€‚</li><li><code>volatile</code> å…³é”®å­—èƒ½ä¿è¯æ•°æ®çš„å¯è§æ€§ï¼Œ<code>synchronized</code> å…³é”®å­—èƒ½ä¿è¯æ•°æ®çš„å¯è§æ€§å’ŒåŸå­æ€§ã€‚</li><li><code>volatile</code>å…³é”®å­—ä¸»è¦ç”¨äºè§£å†³å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œè€Œ <code>synchronized</code> å…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ã€‚</li></ul><h3 id="_18-aqs" tabindex="-1"><a class="header-anchor" href="#_18-aqs"><span>18. AQS</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324571.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>ç«äº‰é”ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324572.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>å¯é‡å…¥é”ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324573.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>é‡Šæ”¾é”ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324574.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324575.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_19-reentrantlock" tabindex="-1"><a class="header-anchor" href="#_19-reentrantlock"><span>19. ReentrantLock</span></a></h3><p><code>ReentrantLock</code> å®ç°äº† <code>Lock</code> æ¥å£ï¼Œæ˜¯ä¸€ä¸ªå¯é‡å…¥ä¸”ç‹¬å å¼çš„é”ï¼Œå’Œ <code>synchronized</code> å…³é”®å­—ç±»ä¼¼ã€‚ä¸è¿‡ï¼Œ<code>ReentrantLock</code> æ›´çµæ´»ã€æ›´å¼ºå¤§ï¼Œå¢åŠ äº†è½®è¯¢ã€è¶…æ—¶ã€ä¸­æ–­ã€å…¬å¹³é”å’Œéå…¬å¹³é”ç­‰é«˜çº§åŠŸèƒ½ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ReentrantLock</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Lock</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E06C75;"> java.io.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Serializable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>ReentrantLock</code> é‡Œé¢æœ‰ä¸€ä¸ªå†…éƒ¨ç±» <code>Sync</code>ï¼Œ<code>Sync</code> ç»§æ‰¿ AQSï¼ˆ<code>AbstractQueuedSynchronizer</code>ï¼‰ï¼Œæ·»åŠ é”å’Œé‡Šæ”¾é”çš„å¤§éƒ¨åˆ†æ“ä½œå®é™…ä¸Šéƒ½æ˜¯åœ¨ <code>Sync</code> ä¸­å®ç°çš„ã€‚<code>Sync</code> æœ‰å…¬å¹³é” <code>FairSync</code> å’Œéå…¬å¹³é” <code>NonfairSync</code> ä¸¤ä¸ªå­ç±»ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324576.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><code>ReentrantLock</code> é»˜è®¤ä½¿ç”¨éå…¬å¹³é”ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ„é€ å™¨æ¥æ˜¾å¼çš„æŒ‡å®šä½¿ç”¨å…¬å¹³é”ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä¼ å…¥ä¸€ä¸ª boolean å€¼ï¼Œtrue æ—¶ä¸ºå…¬å¹³é”ï¼Œfalse æ—¶ä¸ºéå…¬å¹³é”</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ReentrantLock</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> fair) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">sync </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> fair </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> FairSync</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> NonfairSync</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_20-å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_20-å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«"><span>20. å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŒºåˆ«</span></a></h3><ul><li><strong>å…¬å¹³é”</strong> : é”è¢«é‡Šæ”¾ä¹‹åï¼Œå…ˆç”³è¯·çš„çº¿ç¨‹å…ˆå¾—åˆ°é”ã€‚æ€§èƒ½è¾ƒå·®ä¸€äº›ï¼Œå› ä¸ºå…¬å¹³é”ä¸ºäº†ä¿è¯æ—¶é—´ä¸Šçš„ç»å¯¹é¡ºåºï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æ›´é¢‘ç¹ã€‚</li><li><strong>éå…¬å¹³é”</strong>ï¼šé”è¢«é‡Šæ”¾ä¹‹åï¼Œåç”³è¯·çš„çº¿ç¨‹å¯èƒ½ä¼šå…ˆè·å–åˆ°é”ï¼Œæ˜¯éšæœºæˆ–è€…æŒ‰ç…§å…¶ä»–ä¼˜å…ˆçº§æ’åºçš„ã€‚æ€§èƒ½æ›´å¥½ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æŸäº›çº¿ç¨‹æ°¸è¿œæ— æ³•è·å–åˆ°é”ã€‚</li></ul><h3 id="_21-synchronized-å’Œ-lock-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_21-synchronized-å’Œ-lock-çš„åŒºåˆ«"><span>21. synchronized å’Œ lock çš„åŒºåˆ«<img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324577.png" alt="img" loading="lazy"></span></a></h3><p>synchronized æ˜¯ Java å…³é”®å­—ï¼Œæ˜¯å†…ç½®çš„åŒæ­¥æœºåˆ¶ï¼Œèƒ½ä¿®é¥°æ–¹æ³•æˆ–ä»£ç å—ï¼Œé”çš„è·å–æ˜¯éšå¼çš„ï¼Œåº•å±‚å®ç°åŸç†æ˜¯åŸºäº JVMå†…ç½®ç›‘è§†å™¨é”ï¼›</p><p>Lock æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæä¾›æ›´çµæ´»çš„åŒæ­¥æœºåˆ¶ï¼Œå¯ä»¥æ‰‹åŠ¨æ§åˆ¶é”çš„è·å–å’Œé‡Šæ”¾ï¼Œåº•å±‚å®ç°å¯ä»¥æ˜¯ ReentrantLock ç­‰ï¼Œæ€§èƒ½åœ¨é«˜ç«äº‰ç¯å¢ƒä¸‹é€šå¸¸è¾ƒå¥½ã€‚</p><h3 id="_22-synchronized-å’Œ-reentrantlock-å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_22-synchronized-å’Œ-reentrantlock-å¯¹æ¯”"><span>22. synchronized å’Œ ReentrantLock å¯¹æ¯”</span></a></h3><p><strong>ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”ï¼š</strong></p><p><strong>å¯é‡å…¥é”</strong> ä¹Ÿå«é€’å½’é”ï¼ŒæŒ‡çš„æ˜¯çº¿ç¨‹å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œå¦‚æœæ˜¯ä¸å¯é‡å…¥é”çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”ã€‚</p><p>JDK æä¾›çš„æ‰€æœ‰ç°æˆçš„ <code>Lock</code> å®ç°ç±»ï¼ŒåŒ…æ‹¬ <code>synchronized</code> å…³é”®å­—é”éƒ½æ˜¯å¯é‡å…¥çš„ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œ<code>method1()</code> å’Œ <code>method2()</code>éƒ½è¢« <code>synchronized</code> å…³é”®å­—ä¿®é¥°ï¼Œ<code>method1()</code>è°ƒç”¨äº†<code>method2()</code>ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SynchronizedDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> method1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        method2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> synchronized</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> method2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº <code>synchronized</code>é”æ˜¯å¯é‡å…¥çš„ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹åœ¨è°ƒç”¨<code>method1()</code> æ—¶å¯ä»¥ç›´æ¥è·å¾—å½“å‰å¯¹è±¡çš„é”ï¼Œæ‰§è¡Œ <code>method2()</code> çš„æ—¶å€™å¯ä»¥å†æ¬¡è·å–è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œä¸ä¼šäº§ç”Ÿæ­»é”é—®é¢˜ã€‚å‡å¦‚<code>synchronized</code>æ˜¯ä¸å¯é‡å…¥é”çš„è¯ï¼Œç”±äºè¯¥å¯¹è±¡çš„é”å·²è¢«å½“å‰çº¿ç¨‹æ‰€æŒæœ‰ä¸”æ— æ³•é‡Šæ”¾ï¼Œè¿™å°±å¯¼è‡´çº¿ç¨‹åœ¨æ‰§è¡Œ <code>method2()</code>æ—¶è·å–é”å¤±è´¥ï¼Œä¼šå‡ºç°æ­»é”é—®é¢˜ã€‚</p><p><strong>synchronized</strong> <strong>ä¾èµ–äº</strong> <strong>JVM</strong> <strong>è€Œ</strong> <strong>ReentrantLock</strong> <strong>ä¾èµ–äº</strong> <strong>APIï¼š</strong></p><p><code>synchronized</code> æ˜¯ä¾èµ–äº JVM å®ç°çš„ï¼Œå‰é¢æˆ‘ä»¬ä¹Ÿè®²åˆ°äº† è™šæ‹Ÿæœºå›¢é˜Ÿåœ¨ JDK1.6 ä¸º <code>synchronized</code> å…³é”®å­—è¿›è¡Œäº†å¾ˆå¤šä¼˜åŒ–ï¼Œä½†æ˜¯è¿™äº›ä¼˜åŒ–éƒ½æ˜¯åœ¨è™šæ‹Ÿæœºå±‚é¢å®ç°çš„ï¼Œå¹¶æ²¡æœ‰ç›´æ¥æš´éœ²ç»™æˆ‘ä»¬ã€‚</p><p><code>ReentrantLock</code> æ˜¯ JDK å±‚é¢å®ç°çš„ï¼ˆä¹Ÿå°±æ˜¯ API å±‚é¢ï¼Œéœ€è¦ lock() å’Œ unlock() æ–¹æ³•é…åˆ try/finally è¯­å¥å—æ¥å®Œæˆï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹å®ƒçš„æºä»£ç ï¼Œæ¥çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><p><strong>ReentrantLock æ¯” synchronized å¢åŠ äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼š</strong></p><ul><li><strong>ç­‰å¾…å¯ä¸­æ–­</strong> : <code>ReentrantLock</code>æä¾›äº†ä¸€ç§èƒ½å¤Ÿä¸­æ–­ç­‰å¾…é”çš„çº¿ç¨‹çš„æœºåˆ¶ï¼Œé€šè¿‡ <code>lock.lockInterruptibly()</code> æ¥å®ç°è¿™ä¸ªæœºåˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œæ”¹ä¸ºå¤„ç†å…¶ä»–äº‹æƒ…ã€‚</li><li><strong>å¯å®ç°å…¬å¹³é”</strong> : <code>ReentrantLock</code>å¯ä»¥æŒ‡å®šæ˜¯å…¬å¹³é”è¿˜æ˜¯éå…¬å¹³é”ã€‚è€Œ<code>synchronized</code>åªèƒ½æ˜¯éå…¬å¹³é”ã€‚æ‰€è°“çš„å…¬å¹³é”å°±æ˜¯å…ˆç­‰å¾…çš„çº¿ç¨‹å…ˆè·å¾—é”ã€‚<code>ReentrantLock</code>é»˜è®¤æƒ…å†µæ˜¯éå…¬å¹³çš„ï¼Œå¯ä»¥é€šè¿‡ <code>ReentrantLock</code>ç±»çš„<code>ReentrantLock(boolean fair)</code>æ„é€ æ–¹æ³•æ¥æŒ‡å®šæ˜¯å¦æ˜¯å…¬å¹³çš„ã€‚</li><li><strong>å¯å®ç°é€‰æ‹©æ€§é€šçŸ¥ï¼ˆé”å¯ä»¥ç»‘å®šå¤šä¸ªæ¡ä»¶ï¼‰</strong>: <code>synchronized</code>å…³é”®å­—ä¸<code>wait()</code>å’Œ<code>notify()</code>/<code>notifyAll()</code>æ–¹æ³•ç›¸ç»“åˆå¯ä»¥å®ç°ç­‰å¾…/é€šçŸ¥æœºåˆ¶ã€‚<code>ReentrantLock</code>ç±»å½“ç„¶ä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æ˜¯éœ€è¦å€ŸåŠ©äº<code>Condition</code>æ¥å£ä¸<code>newCondition()</code>æ–¹æ³•ã€‚</li></ul><h3 id="_23-å¯ä¸­æ–­é”å’Œä¸å¯ä¸­æ–­é”çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_23-å¯ä¸­æ–­é”å’Œä¸å¯ä¸­æ–­é”çš„åŒºåˆ«"><span>23. å¯ä¸­æ–­é”å’Œä¸å¯ä¸­æ–­é”çš„åŒºåˆ«</span></a></h3><ul><li><strong>å¯ä¸­æ–­é”</strong>ï¼šè·å–é”çš„è¿‡ç¨‹ä¸­å¯ä»¥è¢«ä¸­æ–­ï¼Œä¸éœ€è¦ä¸€ç›´ç­‰åˆ°è·å–é”ä¹‹å æ‰èƒ½è¿›è¡Œå…¶ä»–é€»è¾‘å¤„ç†ã€‚<code>ReentrantLock</code> å°±å±äºæ˜¯å¯ä¸­æ–­é”ã€‚</li><li><strong>ä¸å¯ä¸­æ–­é”</strong>ï¼šä¸€æ—¦çº¿ç¨‹ç”³è¯·äº†é”ï¼Œå°±åªèƒ½ç­‰åˆ°æ‹¿åˆ°é”ä»¥åæ‰èƒ½è¿›è¡Œå…¶ä»–çš„é€»è¾‘å¤„ç†ã€‚ <code>synchronized</code> å°±å±äºæ˜¯ä¸å¯ä¸­æ–­é”ã€‚</li></ul><h3 id="_24-atomic-åŸå­ç±»" tabindex="-1"><a class="header-anchor" href="#_24-atomic-åŸå­ç±»"><span>24. <a href="https://javaguide.cn/java/concurrent/atomic-classes.html#atomic-%E5%8E%9F%E5%AD%90%E7%B1%BB%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer">Atomic åŸå­ç±»</a></span></a></h3><p>åŸå­ç±»ç®€å•æ¥è¯´å°±æ˜¯å…·æœ‰åŸå­æ€§æ“ä½œç‰¹å¾çš„ç±»ã€‚</p><p><code>java.util.concurrent.atomic</code> åŒ…ä¸­çš„ <code>Atomic</code> åŸå­ç±»æä¾›äº†ä¸€ç§çº¿ç¨‹å®‰å…¨çš„æ–¹å¼æ¥æ“ä½œå•ä¸ªå˜é‡ã€‚</p><p><code>Atomic</code> ç±»ä¾èµ–äº CASï¼ˆCompare-And-Swapï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼‰ä¹è§‚é”æ¥ä¿è¯å…¶æ–¹æ³•çš„åŸå­æ€§ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ä¼ ç»Ÿçš„é”æœºåˆ¶ï¼ˆå¦‚ <code>synchronized</code> å—æˆ– <code>ReentrantLock</code>ï¼‰ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324578.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_25-threadlocal-åŸç†" tabindex="-1"><a class="header-anchor" href="#_25-threadlocal-åŸç†"><span>25. ThreadLocal åŸç†</span></a></h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„å˜é‡æ˜¯å¯ä»¥è¢«ä»»ä½•ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¹¶ä¿®æ”¹çš„ã€‚<strong>å¦‚æœæƒ³å®ç°<strong><strong>æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ä¸“å±æœ¬åœ°å˜é‡</strong></strong>è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</strong></p><p>JDK ä¸­è‡ªå¸¦çš„<code>ThreadLocal</code>ç±»æ­£æ˜¯ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚ <code>**ThreadLocal**</code><strong>ç±»ä¸»è¦è§£å†³çš„å°±æ˜¯è®©<strong><strong>æ¯ä¸ªçº¿ç¨‹ç»‘å®šè‡ªå·±çš„å€¼</strong></strong>ï¼Œå¯ä»¥å°†</strong><code>**ThreadLocal**</code><strong>ç±»å½¢è±¡çš„æ¯”å–»æˆå­˜æ”¾æ•°æ®çš„ç›’å­ï¼Œç›’å­ä¸­å¯ä»¥å­˜å‚¨æ¯ä¸ªçº¿ç¨‹çš„ç§æœ‰æ•°æ®</strong>**ã€‚**</p><p>å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ª<code>ThreadLocal</code>å˜é‡ï¼Œé‚£ä¹ˆè®¿é—®è¿™ä¸ªå˜é‡çš„æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰è¿™ä¸ªå˜é‡çš„æœ¬åœ°å‰¯æœ¬ï¼Œè¿™ä¹Ÿæ˜¯<code>ThreadLocal</code>å˜é‡åçš„ç”±æ¥ã€‚ä»–ä»¬å¯ä»¥ä½¿ç”¨ <code>get()</code> å’Œ <code>set()</code> æ–¹æ³•æ¥è·å–é»˜è®¤å€¼æˆ–å°†å…¶å€¼æ›´æ”¹ä¸ºå½“å‰çº¿ç¨‹æ‰€å­˜çš„å‰¯æœ¬çš„å€¼ï¼Œä»è€Œé¿å…äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>å†ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šä¸¤ä¸ªäººå»å®å±‹æ”¶é›†å®ç‰©ï¼Œè¿™ä¸¤ä¸ªå…±ç”¨ä¸€ä¸ªè¢‹å­çš„è¯è‚¯å®šä¼šäº§ç”Ÿäº‰æ‰§ï¼Œä½†æ˜¯ç»™ä»–ä»¬ä¸¤ä¸ªäººæ¯ä¸ªäººåˆ†é…ä¸€ä¸ªè¢‹å­çš„è¯å°±ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ã€‚å¦‚æœæŠŠè¿™ä¸¤ä¸ªäººæ¯”ä½œçº¿ç¨‹çš„è¯ï¼Œé‚£ä¹ˆ ThreadLocal å°±æ˜¯ç”¨æ¥é¿å…è¿™ä¸¤ä¸ªçº¿ç¨‹ç«äº‰çš„ã€‚</p><h3 id="_26-threadlocal-å†…å­˜æ³„éœ²" tabindex="-1"><a class="header-anchor" href="#_26-threadlocal-å†…å­˜æ³„éœ²"><span>26. ThreadLocal å†…å­˜æ³„éœ²</span></a></h3><p><code>ThreadLocalMap</code> ä¸­ä½¿ç”¨çš„ key ä¸º <code>ThreadLocal</code> çš„å¼±å¼•ç”¨ï¼Œè€Œ value æ˜¯å¼ºå¼•ç”¨ã€‚</p><p><code>ThreadLocal</code> åœ¨æ²¡æœ‰è¢«å¤–éƒ¨å¼ºå¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œkey ä¼šè¢«æ¸…ç†æ‰ï¼Œè€Œ value ä¸ä¼šè¢«æ¸…ç†æ‰ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œ<code>ThreadLocalMap</code> ä¸­å°±ä¼šå‡ºç° key ä¸º null çš„ Entryã€‚å‡å¦‚æˆ‘ä»¬ä¸åšä»»ä½•æªæ–½çš„è¯ï¼Œvalue æ°¸è¿œæ— æ³•è¢« GC å›æ”¶ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ã€‚<code>ThreadLocalMap</code> å®ç°ä¸­å·²ç»è€ƒè™‘äº†è¿™ç§æƒ…å†µï¼Œåœ¨è°ƒç”¨ <code>set()</code>ã€<code>get()</code>ã€<code>remove()</code> æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šæ¸…ç†æ‰ key ä¸º null çš„è®°å½•ã€‚ä½¿ç”¨å®Œ <code>ThreadLocal</code>æ–¹æ³•åæœ€å¥½æ‰‹åŠ¨è°ƒç”¨<code>remove()</code>æ–¹æ³•ã€‚</p><h3 id="_27-çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_27-çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°"><span>27. çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> corePoolSize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                          int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> maximumPoolSize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                          long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> keepAliveTime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // å½“çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œå¤šä½™çš„ç©ºé—²çº¿ç¨‹å­˜æ´»çš„æœ€é•¿æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                          TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> unit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ—¶é—´å•ä½</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                          BlockingQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> workQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨æ¥å‚¨å­˜ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                          ThreadFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> threadFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // çº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä¸€èˆ¬é»˜è®¤å³å¯</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                          RejectedExecutionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> handle) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ‹’ç»ç­–ç•¥ï¼Œå½“æäº¤çš„ä»»åŠ¡è¿‡å¤šè€Œä¸èƒ½åŠæ—¶å¤„ç†æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶ç­–ç•¥æ¥å¤„ç†ä»»åŠ¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_28-çº¿ç¨‹æ± çš„åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_28-çº¿ç¨‹æ± çš„åˆ›å»º"><span>28. çº¿ç¨‹æ± çš„åˆ›å»º</span></a></h3><p><strong>æ–¹å¼ä¸€ï¼š</strong><code>**ThreadPoolExecutor**</code><strong>æ„é€ å‡½æ•°ï¼ˆæ¨èï¼‰</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324579.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>æ–¹å¼äºŒï¼šspring çš„</strong> <code>**ThreadPoolTaskExecutor** </code></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324580.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åˆ›å»ºçº¿ç¨‹æ± éœ€è¦åˆç†é…ç½®çº¿ç¨‹æ± çš„å¤§å°ã€é€‰æ‹©é€‚å½“çš„ä»»åŠ¡é˜Ÿåˆ—å’Œæ‹’ç»ç­–ç•¥ï¼Œæ­£ç¡®ç®¡ç†çº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶è€ƒè™‘çº¿ç¨‹å®‰å…¨æ€§ã€‚</p><h3 id="_29-çº¿ç¨‹æ± å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_29-çº¿ç¨‹æ± å·¥ä½œåŸç†"><span>29. çº¿ç¨‹æ± å·¥ä½œåŸç†</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324581.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>çº¿ç¨‹æ± åˆšåˆ›å»ºæ—¶ï¼Œé‡Œé¢æ²¡æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ä»»åŠ¡é˜Ÿåˆ—æ˜¯ä½œä¸ºå‚æ•°ä¼ è¿›æ¥çš„ã€‚ä¸è¿‡ï¼Œå°±ç®—é˜Ÿåˆ—é‡Œé¢æœ‰ä»»åŠ¡ï¼Œçº¿ç¨‹æ± ä¹Ÿä¸ä¼šé©¬ä¸Šæ‰§è¡Œå®ƒä»¬ã€‚</p><p>å½“è°ƒç”¨ execute() æ–¹æ³•æ·»åŠ ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± ä¼šåšå¦‚ä¸‹åˆ¤æ–­ï¼š</p><p>ï¬ å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å°äº corePoolSizeï¼Œé‚£ä¹ˆé©¬ä¸Šåˆ›å»ºçº¿ç¨‹è¿è¡Œè¿™ä¸ªä»»åŠ¡ï¼›</p><p>ï¬ å¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤§äºæˆ–ç­‰äº corePoolSizeï¼Œé‚£ä¹ˆå°†è¿™ä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼›</p><p>ï¬ å¦‚æœè¿™æ—¶å€™é˜Ÿåˆ—æ»¡äº†ï¼Œè€Œä¸”æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å°äº maximumPoolSizeï¼Œé‚£ä¹ˆè¿˜æ˜¯è¦åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ç«‹åˆ»è¿è¡Œè¿™ä¸ªä»»åŠ¡ï¼›</p><p>ï¬ å¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œè€Œä¸”æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡å¤§äºæˆ–ç­‰äº maximumPoolSizeï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šæŠ›å‡ºå¼‚å¸¸ RejectExecutionExceptionã€‚</p><p>å½“ä¸€ä¸ªçº¿ç¨‹å®Œæˆä»»åŠ¡æ—¶ï¼Œå®ƒä¼šä»é˜Ÿåˆ—ä¸­å–ä¸‹ä¸€ä¸ªä»»åŠ¡æ¥æ‰§è¡Œã€‚</p><p>å½“ä¸€ä¸ªçº¿ç¨‹æ— äº‹å¯åšï¼Œè¶…è¿‡ä¸€å®šçš„æ—¶é—´ï¼ˆkeepAliveTimeï¼‰æ—¶ï¼Œçº¿ç¨‹æ± ä¼šåˆ¤æ–­ï¼Œå¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°å¤§äº corePoolSizeï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±è¢«åœæ‰ã€‚æ‰€ä»¥çº¿ç¨‹æ± çš„æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œå®ƒæœ€ç»ˆä¼šæ”¶ç¼©åˆ° corePoolSize çš„å¤§å°ã€‚</p><h3 id="_30-çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_30-çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥"><span>30. çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324582.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æœ‰å››ç§ï¼šAbortPolicyï¼ˆé»˜è®¤æ–¹å¼ï¼Œä¸­æ­¢å¹¶æŠ›å‡ºRejectedExecutionException å¼‚å¸¸ï¼‰ã€CallerRunsPolicyï¼ˆä½¿ç”¨è°ƒç”¨çº¿ç¨‹æ¥æ‰§è¡Œè¢«æ‹’ç»çš„ä»»åŠ¡ï¼‰ã€DiscardPolicyï¼ˆé»˜é»˜åœ°ä¸¢å¼ƒæ‹’ç»çš„ä»»åŠ¡ï¼‰ä»¥åŠ DiscardOldestPolicyï¼ˆä¸¢å¼ƒæœ€æ—©è¢«æ·»åŠ åˆ°é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œç„¶åå°è¯•é‡æ–°æäº¤æ–°ä»»åŠ¡ï¼‰ã€‚</p><p>å¦‚æœå¸Œæœ›å¿«é€Ÿå¤±è´¥å¹¶å°†å¼‚å¸¸ä¼ é€’ç»™è°ƒç”¨è€…ï¼Œåˆ™é€‰æ‹© AbortPolicyã€‚å¦‚æœå¸Œæœ›å°½å¯èƒ½ä¿è¯ä»»åŠ¡çš„æ‰§è¡Œ</p><p>è€Œä¸å †ç§¯åœ¨é˜Ÿåˆ—ä¸­ï¼Œåˆ™é€‰æ‹© CallerRunsPolicyã€‚å¦‚æœå¯¹ä»»åŠ¡çš„ä¸¢å¤±æƒ…å†µä¸æ•æ„Ÿï¼Œåˆ™é€‰æ‹©DiscardPolicyã€‚è€Œå¦‚æœå¸Œæœ›å°½å¯èƒ½ä¿ç•™æœ€æ–°çš„ä»»åŠ¡è€Œä¸æ˜¯æ—§çš„ä»»åŠ¡ï¼Œåˆ™é€‰æ‹©DiscardOldestPolicyã€‚</p><h3 id="_31-countdownlatch" tabindex="-1"><a class="header-anchor" href="#_31-countdownlatch"><span>31. CountDownLatch</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324583.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324584.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324585.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_32-cyclicbarrier" tabindex="-1"><a class="header-anchor" href="#_32-cyclicbarrier"><span>32. CyclicBarrier</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324586.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324587.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324588.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_33-countdownlatch-å’Œ-cyclicbarrier-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_33-countdownlatch-å’Œ-cyclicbarrier-åŒºåˆ«"><span>33. CountDownLatch å’Œ CyclicBarrier åŒºåˆ«</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324589.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_34-semaphore" tabindex="-1"><a class="header-anchor" href="#_34-semaphore"><span>34. Semaphore</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324590.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324591.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>Semaphore æ¨¡å‹ï¼š</strong></p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324592.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324593.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_35-arrayblockingqueue" tabindex="-1"><a class="header-anchor" href="#_35-arrayblockingqueue"><span>35. ArrayBlockingQueue</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324594.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_36-linkedbloackingqueue" tabindex="-1"><a class="header-anchor" href="#_36-linkedbloackingqueue"><span>36. LinkedBloackingQueue</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324595.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_37-æ‚²è§‚é”å’Œä¹è§‚é”çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_37-æ‚²è§‚é”å’Œä¹è§‚é”çš„åŒºåˆ«"><span>37. <a href="https://javaguide.cn/java/concurrent/optimistic-lock-and-pessimistic-lock.html" target="_blank" rel="noopener noreferrer">æ‚²è§‚é”å’Œä¹è§‚é”çš„åŒºåˆ«</a></span></a></h3><p>æ‚²è§‚é”ï¼šè®¤ä¸ºè‡ªå·±åœ¨ä½¿ç”¨æ•°æ®çš„æ—¶å€™ä¸€å®šæœ‰åˆ«çš„çº¿ç¨‹æ¥ä¿®æ”¹æ•°æ®ï¼Œåœ¨è·å–æ•°æ®çš„æ—¶å€™ä¼šå…ˆåŠ é”ï¼Œç¡®ä¿æ•°æ®ä¸ä¼šè¢«åˆ«çš„çº¿ç¨‹ä¿®æ”¹ã€‚</p><p>å®ç°ï¼šå…³é”®å­— synchronizedã€æ¥å£ Lock çš„å®ç°ç±»</p><p>é€‚ç”¨åœºæ™¯ï¼šå†™æ“ä½œè¾ƒå¤šï¼Œå…ˆåŠ é”å¯ä»¥ä¿è¯å†™æ“ä½œæ—¶æ•°æ®æ­£ç¡®</p><p>ä¹è§‚é”ï¼šè®¤ä¸ºè‡ªå·±ä½¿ç”¨æ•°æ®æ—¶ä¸ä¼šæœ‰åˆ«çš„çº¿ç¨‹ä¿®æ”¹æ•°æ®ï¼Œæ‰€ä»¥ä¸ä¼šæ·»åŠ é”ï¼Œåªæ˜¯åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™å»åˆ¤æ–­ä¹‹å‰æœ‰æ²¡æœ‰åˆ«çš„çº¿ç¨‹æ›´æ–°äº†è¿™ä¸ªæ•°æ®ã€‚</p><p>å®ç° ï¼š</p><ul><li>CAS ç®—æ³•ï¼Œ CAS å³ Compare And Swapï¼Œæ˜¯ä¸€ç§æ›´æ–°çš„åŸå­æ“ä½œï¼Œæ¯”è¾ƒå½“å‰å€¼è·Ÿä¼ å…¥å€¼æ˜¯å¦ä¸€æ ·ï¼Œä¸€æ ·åˆ™æ›´æ–°ï¼Œå¦åˆ™è¿”å› falseï¼Œä¸è¿›è¡Œä»»ä½•æ“ä½œï¼›ä¾‹å¦‚ï¼šActomicInteger ç±»çš„åŸå­è‡ªå¢æ˜¯é€šè¿‡ CAS è‡ªé€‰å®ç°ã€‚</li><li>ç‰ˆæœ¬å·æ§åˆ¶ï¼šæ•°æ®è¡¨ä¸­åŠ ä¸Šç‰ˆæœ¬å·å­—æ®µ versionï¼Œè¡¨ç¤ºæ•°æ®è¢«ä¿®æ”¹çš„æ¬¡æ•°ã€‚å½“æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œè¿™ä¸ªå­—æ®µå€¼ä¼šåŠ  1ï¼Œæäº¤å¿… é¡»æ»¡è¶³â€œ æäº¤ç‰ˆæœ¬å¿…é¡»å¤§äºè®°å½•å½“å‰ç‰ˆæœ¬æ‰èƒ½æ‰§è¡Œæ›´æ–°â€œçš„ä¹è§‚é”ç­–ç•¥ã€‚</li></ul><p>é€‚ç”¨åœºæ™¯ï¼šè¯»æ“ä½œè¾ƒå¤šï¼Œä¸åŠ é”çš„ç‰¹ç‚¹èƒ½å¤Ÿä½¿å…¶è¯»æ“ä½œçš„æ€§èƒ½å¤§å¹…æå‡</p><h2 id="å››ã€è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å››ã€è®¾è®¡æ¨¡å¼"><span>å››ã€è®¾è®¡æ¨¡å¼</span></a></h2><h3 id="_1-åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_1-åˆ†ç±»"><span>1. åˆ†ç±»</span></a></h3><p><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324596.jpeg" alt="img" loading="lazy"><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324597.png" alt="img" loading="lazy"></p><p>åˆ›å»ºå‹ï¼š åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘ï¼Œä¸ä½¿â½¤ new ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œç¨‹åºåœ¨åˆ¤æ–­éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´çµæ´»ã€‚åŒ…æ‹¬â¼¯â¼š/æŠ½è±¡â¼¯â¼š/å•ä¾‹/å»ºé€ è€…/åŸå‹æ¨¡å¼ã€‚</p><p>ç»“æ„å‹ï¼š é€šè¿‡ç±»å’Œæ¥â¼é—´çš„ç»§æ‰¿å’Œå¼•â½¤å®ç°åˆ›å»ºå¤æ‚ç»“æ„çš„å¯¹è±¡ã€‚åŒ…æ‹¬é€‚é…å™¨/æ¡¥æ¥æ¨¡å¼/è¿‡æ»¤å™¨/ç»„åˆ/è£…é¥°å™¨/å¤–è§‚/äº«å…ƒ/ä»£ç†æ¨¡å¼ã€‚</p><p>â¾ä¸ºå‹ï¼š é€šè¿‡ç±»ä¹‹é—´ä¸åŒé€šä¿¡â½…å¼å®ç°ä¸åŒâ¾ä¸ºã€‚åŒ…æ‹¬è´£ä»»é“¾/å‘½å/è§£é‡Šå™¨/è¿­ä»£å™¨/ä¸­ä»‹è€…/å¤‡å¿˜å½•/è§‚å¯Ÿè€…/çŠ¶æ€/ç­–ç•¥/æ¨¡æ¿/è®¿é—®è€…æ¨¡å¼ã€‚</p><h3 id="_2-å·¥å‚æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-å·¥å‚æ¨¡å¼"><span>2. å·¥å‚æ¨¡å¼</span></a></h3><p>å’Œç®€å•â¼¯â¼šæ¨¡å¼ä¸­â¼¯â¼šè´Ÿè´£â½£äº§æ‰€æœ‰äº§å“ç›¸â½ï¼Œâ¼¯â¼šâ½…æ³•æ¨¡å¼å°†â½£æˆå…·ä½“äº§å“çš„ä»»åŠ¡åˆ†å‘ç»™å…·ä½“çš„äº§å“â¼¯â¼šã€‚</p><p>UML ç±»å›¾å¦‚ä¸‹ï¼š</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324598.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¹Ÿå°±æ˜¯å®šä¹‰â¼€ä¸ªæŠ½è±¡â¼¯â¼šï¼Œå…¶å®šä¹‰äº†äº§å“çš„â½£äº§æ¥â¼ï¼Œä½†ä¸è´Ÿè´£å…·ä½“çš„äº§å“ï¼Œå°†â½£äº§ä»»åŠ¡äº¤ç»™ä¸åŒçš„æ´¾â½£ç±»â¼¯â¼šã€‚è¿™æ ·ä¸â½¤é€šè¿‡æŒ‡å®šç±»å‹æ¥åˆ›å»ºå¯¹è±¡äº†ã€‚</p><h3 id="_3-å•ä¾‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_3-å•ä¾‹æ¨¡å¼"><span>3. å•ä¾‹æ¨¡å¼</span></a></h3><p>å•ä¾‹æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œâ¼€ä¸ªå•ä¾‹ç±»åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½åªå­˜åœ¨â¼€ä¸ªå®ä¾‹ï¼Œæ„é€ â½…æ³•å¿…é¡»æ˜¯ç§æœ‰çš„ã€ç”±â¾ƒâ¼°åˆ›å»ºâ¼€ä¸ªé™æ€å˜é‡å­˜å‚¨å®ä¾‹ï¼Œå¯¹å¤–æä¾›â¼€ä¸ªé™æ€å…¬æœ‰â½…æ³•è·å–å®ä¾‹ã€‚ ä¼˜ç‚¹æ˜¯å†…å­˜ä¸­åªæœ‰â¼€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å¼€é”€ï¼Œå°¤å…¶æ˜¯é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å®ä¾‹çš„æƒ…å†µä¸‹å¹¶ä¸”å¯ä»¥é¿å…å¯¹èµ„æºçš„å¤šé‡å â½¤ã€‚ç¼ºç‚¹æ˜¯æ²¡æœ‰æŠ½è±¡å±‚ï¼Œéš¾ä»¥æ‰©å±•ï¼Œä¸å•â¼€èŒè´£åŸåˆ™å†²çªã€‚</p><h3 id="_4-ä»£ç†æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-ä»£ç†æ¨¡å¼"><span>4. ä»£ç†æ¨¡å¼</span></a></h3><p>ä»£ç†æ¨¡å¼çš„æœ¬è´¨æ˜¯â¼€ä¸ªä¸­é—´ä»¶ï¼Œä¸»è¦â½¬çš„æ˜¯è§£è€¦åˆæœåŠ¡æä¾›è€…å’Œä½¿â½¤è€…ã€‚ä½¿â½¤è€…é€šè¿‡ä»£ç†é—´æ¥çš„è®¿é—®æœåŠ¡æä¾›è€…ï¼Œä¾¿äºåè€…çš„å°è£…å’Œæ§åˆ¶ã€‚æ˜¯â¼€ç§ç»“æ„æ€§æ¨¡å¼ã€‚</p><p>ä¸‹â¾¯æ˜¯ GoF ä»‹ç»å…¸å‹çš„ä»£ç†æ¨¡å¼ UML ç±»å›¾</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324599.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>Subject:</strong> å®šä¹‰ RealSubject å¯¹å¤–çš„æ¥â¼ï¼Œä¸”è¿™äº›æ¥â¼å¿…é¡»è¢« Proxy å®ç°ï¼Œè¿™æ ·å¤–éƒ¨è°ƒâ½¤ proxy çš„æ¥â¼æœ€ç»ˆéƒ½è¢«è½¬åŒ–ä¸ºå¯¹ realsubject çš„è°ƒâ½¤ã€‚</p><p><strong>RealSubject:</strong> çœŸæ­£çš„â½¬æ ‡å¯¹è±¡ã€‚</p><p><strong>Proxy:</strong> â½¬æ ‡å¯¹è±¡çš„ä»£ç†ï¼Œè´Ÿè´£æ§åˆ¶å’Œç®¡ç†â½¬æ ‡å¯¹è±¡ï¼Œå¹¶é—´æ¥åœ°ä¼ é€’å¤–éƒ¨å¯¹â½¬æ ‡å¯¹è±¡çš„è®¿é—®ã€‚</p><p>Remote Proxy: å¯¹æœ¬åœ°çš„è¯·æ±‚ä»¥åŠå‚æ•°è¿›â¾åºåˆ—åŒ–ï¼Œå‘è¿œç¨‹å¯¹è±¡å‘é€è¯·æ±‚ï¼Œå¹¶å¯¹å“åº”ç»“æœè¿›â¾ååºåˆ—åŒ–ï¼Œå°†æœ€ç»ˆç»“æœåé¦ˆç»™è°ƒâ½¤è€…ï¼›</p><p>Virtual Proxy: å½“â½¬æ ‡å¯¹è±¡çš„åˆ›å»ºå¼€é”€â½è¾ƒâ¼¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿â½¤å»¶è¿Ÿæˆ–è€…å¼‚æ­¥çš„â½…å¼åˆ›å»ºâ½¬æ ‡å¯¹è±¡ï¼›</p><p>Protection Proxy: ç»†åŒ–å¯¹â½¬æ ‡å¯¹è±¡è®¿é—®æƒé™çš„æ§åˆ¶ï¼›</p><h3 id="_5-ç­–ç•¥æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_5-ç­–ç•¥æ¨¡å¼"><span>5. ç­–ç•¥æ¨¡å¼</span></a></h3><p>ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰å±äºå¯¹è±¡çš„â¾ä¸ºæ¨¡å¼ã€‚å…¶â½¤æ„æ˜¯é’ˆå¯¹â¼€ç»„ç®—æ³•ï¼Œå°†æ¯â¼€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥â¼çš„ç‹¬â½´çš„ç±»ä¸­ï¼Œä»â½½ä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥åœ¨ä¸å½±å“åˆ°å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹å‘â½£å˜åŒ–ã€‚å…¶ä¸»è¦â½¬çš„æ˜¯é€šè¿‡å®šä¹‰ç›¸ä¼¼çš„ç®—æ³•ï¼Œæ›¿æ¢ if else è¯­å¥å†™æ³•ï¼Œå¹¶ä¸”å¯ä»¥éšæ—¶ç›¸äº’æ›¿æ¢ã€‚</p><h3 id="_6-spring-æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_6-spring-æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"><span>6. Spring æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</span></a></h3><ul><li><strong>å·¥å‚****è®¾è®¡æ¨¡å¼</strong> : Spring ä½¿ç”¨å·¥å‚æ¨¡å¼é€šè¿‡ <code>BeanFactory</code>ã€<code>ApplicationContext</code> åˆ›å»º bean å¯¹è±¡ã€‚</li><li><strong>ä»£ç†****è®¾è®¡æ¨¡å¼</strong> : Spring AOP åŠŸèƒ½çš„å®ç°ã€‚</li><li><strong>å•ä¾‹****è®¾è®¡æ¨¡å¼</strong> : Spring ä¸­çš„ Bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚</li><li><strong>æ¨¡æ¿****æ–¹æ³•æ¨¡å¼</strong> : Spring ä¸­ <code>jdbcTemplate</code>ã€<code>hibernateTemplate</code> ç­‰ä»¥ Template ç»“å°¾çš„å¯¹æ•°æ®åº“æ“ä½œçš„ç±»ï¼Œå®ƒä»¬å°±ä½¿ç”¨åˆ°äº†æ¨¡æ¿æ¨¡å¼ã€‚</li><li><strong>åŒ…è£…å™¨****è®¾è®¡æ¨¡å¼</strong> : æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“ï¼Œè€Œä¸”ä¸åŒçš„å®¢æˆ·åœ¨æ¯æ¬¡è®¿é—®ä¸­æ ¹æ®éœ€è¦ä¼šå»è®¿é—®ä¸åŒçš„æ•°æ®åº“ã€‚è¿™ç§æ¨¡å¼è®©æˆ‘ä»¬å¯ä»¥æ ¹æ®å®¢æˆ·çš„éœ€æ±‚èƒ½å¤ŸåŠ¨æ€åˆ‡æ¢ä¸åŒçš„æ•°æ®æºã€‚</li><li><strong>è§‚å¯Ÿè€…****æ¨¡å¼:</strong> Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ã€‚</li><li><strong>é€‚é…å™¨****æ¨¡å¼</strong> : Spring AOP çš„å¢å¼ºæˆ–é€šçŸ¥(Advice)ä½¿ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€spring MVC ä¸­ä¹Ÿæ˜¯ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼é€‚é…<code>Controller</code>ã€‚</li></ul><h3 id="_7-mybatis-ä¸­æœ‰å“ªäº›è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_7-mybatis-ä¸­æœ‰å“ªäº›è®¾è®¡æ¨¡å¼"><span>7. MyBatis ä¸­æœ‰å“ªäº›è®¾è®¡æ¨¡å¼</span></a></h3><p>å·¥å‚æ¨¡å¼ï¼Œä¾‹å¦‚ SqlSessionFactoryã€ObjectFactoryã€MapperProxyFactoryï¼›</p><p>å•ä¾‹æ¨¡å¼ï¼Œä¾‹å¦‚ ErrorContext å’Œ LogFactoryï¼›</p><p>ä»£ç†æ¨¡å¼ï¼ŒMybatis å®ç°çš„æ ¸å¿ƒï¼Œæ¯”å¦‚ MapperProxyã€ConnectionLoggerï¼Œ</p><p>ç”¨çš„ jdk çš„åŠ¨æ€ä»£ç†ï¼›è¿˜æœ‰ executor.loader åŒ…ä½¿ç”¨äº† cglib æˆ–è€… javassist è¾¾</p><p>åˆ°å»¶è¿ŸåŠ è½½çš„æ•ˆæœï¼›</p><h2 id="äº”ã€mysql" tabindex="-1"><a class="header-anchor" href="#äº”ã€mysql"><span>äº”ã€MySQL</span></a></h2><h3 id="_1-äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_1-äº‹åŠ¡"><span>1. äº‹åŠ¡</span></a></h3><p>æ•°æ®åº“äº‹åŠ¡å¯ä»¥ä¿è¯å¤šä¸ªå¯¹æ•°æ®åº“çš„æ“ä½œï¼ˆä¹Ÿå°±æ˜¯ SQL è¯­å¥ï¼‰æ„æˆä¸€ä¸ªé€»è¾‘ä¸Šçš„æ•´ä½“ã€‚æ„æˆè¿™ä¸ªé€»è¾‘ä¸Šçš„æ•´ä½“çš„è¿™äº›æ•°æ®åº“æ“ä½œéµå¾ªï¼šè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸ,è¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ ã€‚</p><div class="language-plsql line-numbers-mode" data-highlighter="shiki" data-ext="plsql" data-title="plsql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># å¼€å¯ä¸€ä¸ªäº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">START TRANSACTION;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># å¤šæ¡ </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SQL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> è¯­å¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SQL1,SQL2...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">## æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-acid-ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#_2-acid-ç‰¹æ€§"><span>2. ACID ç‰¹æ€§</span></a></h3><ol><li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</li></ol><p>äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šã€‚å¦‚æœäº‹åŠ¡ä¸­çš„ä»»ä½•æ“ä½œå¤±è´¥ï¼Œæ‰€æœ‰æ“ä½œéƒ½å°†è¢«å›æ»šåˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><ol start="2"><li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡çš„æ‰§è¡Œåº”ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚</li></ol><p>åœ¨äº‹åŠ¡å¼€å§‹å’Œç»“æŸæ—¶ï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸåº”å¾—åˆ°æ»¡è¶³ï¼Œç¡®ä¿æ•°æ®çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</p><ol start="3"><li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ¯ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éƒ½åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»ã€‚</li></ol><p>å¹¶å‘äº‹åŠ¡çš„æ‰§è¡Œåº”å½“äº’ä¸å¹²æ‰°ï¼Œæ¯ä¸ªäº‹åŠ¡åº”è¯¥æ„ŸçŸ¥ä¸åˆ°å…¶ä»–äº‹åŠ¡çš„å­˜åœ¨æˆ–å¹¶å‘æ‰§è¡Œã€‚éš”ç¦»çº§åˆ«å®šä¹‰äº†ä¸åŒäº‹åŠ¡ä¹‹é—´çš„å¯è§æ€§å’Œäº’ç›¸å½±å“çš„ç¨‹åº¦ã€‚</p><ol start="4"><li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€æ—¦äº‹åŠ¡æäº¤æˆåŠŸï¼Œå…¶å¯¹æ•°æ®åº“çš„ä¿®æ”¹åº”è¯¥æ°¸ä¹…ä¿å­˜ã€‚</li></ol><p>å³ä½¿ç³»ç»Ÿå‘ç”Ÿæ•…éšœæˆ–é‡å¯ï¼Œä¹Ÿåº”è¯¥èƒ½å¤Ÿä¿æŒæ•°æ®çš„æŒä¹…æ€§ã€‚</p><h3 id="_3-éš”ç¦»çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#_3-éš”ç¦»çº§åˆ«"><span>3. éš”ç¦»çº§åˆ«</span></a></h3><ul><li><strong>READ-UNCOMMITTED(è¯»æœªæäº¤)</strong> ï¼šå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œ</li></ul><p>æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ã€‚</p><ul><li><strong>READ-COMMITTED(è¯»å·²æäº¤)</strong> ï¼šå…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œ</li></ul><p>å¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚</p><ul><li><strong>REPEATABLE-READ(å¯é‡å¤è¯»)</strong> ï¼šå¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œ</li></ul><p>é™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œå¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚</p><ul><li><strong>SERIALIZABLE(ä¸²è¡ŒåŒ–)</strong> ï¼šæ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œ</li></ul><p>æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä» ACID çš„éš”ç¦»çº§åˆ«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯» ä»¥åŠå¹»è¯»ã€‚</p><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>READ-UNCOMMITTED**(è¯»æœªæäº¤)**</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>READ-COMMITTED**(è¯»å·²æäº¤)**</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>REPEATABLE-READ**(å¯é‡å¤è¯»)**</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td>SERIALIZABLE**(ä¸²è¡ŒåŒ–)**</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table><h3 id="_4-é”" tabindex="-1"><a class="header-anchor" href="#_4-é”"><span>4. é”</span></a></h3><ul><li>å±æ€§åˆ†ç±»ï¼šå…±äº«é”ã€æ’ä»–é”ã€‚</li><li>ç²’åº¦åˆ†ç±»ï¼šè¡¨é”(INNODBã€MYISAM)ã€è¡Œé”(INNODB)ã€é¡µçº§é”(BDBå¼•æ“)ã€è®°å½•é”ã€é—´éš™é”ã€ä¸´é”®é”ã€‚</li><li>çŠ¶æ€åˆ†ç±»ï¼šæ„å‘å…±äº«é”ã€æ„å‘æ’å®ƒé”ã€‚</li></ul><ol><li><strong>å…±äº«é”(Share Lock)ï¼š</strong></li></ol><p>å…±äº«é”åˆç§°è¯»é”ï¼Œç®€ç§°sé”;å½“ä¸€ä¸ªäº‹åŠ¡ä¸ºæ•°æ®åŠ ä¸Šè¯»é”ä¹‹åï¼Œå…¶ä»–äº‹åŠ¡åªèƒ½å¯¹è¯¥æ•°æ®åŠ è¯»é”ï¼Œè€Œä¸èƒ½å¯¹æ•°æ®åŠ å†™é”ï¼Œç›´åˆ°æ‰€æœ‰çš„è¯»é”é‡Šæ”¾ä¹‹åå…¶ä»–äº‹åŠ¡æ‰èƒ½å¯¹å…¶è¿›è¡ŒåŠ æŒå†™é”ã€‚å…±äº«é”çš„ç‰¹æ€§ä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒå¹¶å‘çš„è¯»å–æ•°æ®ï¼Œè¯»å–æ•°æ®çš„æ—¶å€™ä¸æ”¯æŒä¿®æ”¹ï¼Œé¿å…å‡ºç°é‡å¤è¯»çš„é—®é¢˜ã€‚</p><ol><li><strong>æ’ä»–é”(Exclusive Lock)ï¼š</strong></li></ol><p>æ’ä»–é”åˆç§°å†™é”ï¼Œç®€ç§°Xé”:å½“ä¸€ä¸ªäº‹åŠ¡ä¸ºæ•°æ®åŠ ä¸Šå†™é”æ—¶ï¼Œå…¶ä»–è¯·æ±‚å°†ä¸èƒ½å†ä¸ºæ•°æ®åŠ ä»»ä½•é”ï¼Œç›´åˆ°è¯¥é”é‡Šæ”¾ä¹‹åå…¶ä»–äº‹åŠ¡æ‰èƒ½å¯¹æ•°æ®è¿›è¡ŒåŠ é”ã€‚æ’ä»–é”çš„ç›®çš„æ˜¯åœ¨æ•°æ®ä¿®æ”¹æ—¶å€™ï¼Œä¸å…è®¸å…¶ä»–äººåŒæ—¶ä¿®æ”¹ï¼Œä¹Ÿä¸å…è®¸å…¶ä»–äººè¯»å–ã€‚é¿å…äº†å‡ºç°è„æ•°æ®å’Œè„è¯»çš„é—®é¢˜</p><ol><li><strong>è¡¨é”ï¼š</strong></li></ol><p>è¡¨é”æ˜¯æŒ‡ä¸Šé”çš„æ—¶å€™é”ä½çš„æ˜¯æ•´ä¸ªè¡¨ï¼Œå½“ä¸‹ä¸€ä¸ªäº‹åŠ¡è®¿é—®è¯¥è¡¨çš„æ—¶å€™ï¼Œå¿…é¡»ç­‰å‰ä¸€ä¸ªäº‹åŠ¡é‡Šæ”¾äº†é”æ‰èƒ½è¿›è¡Œå¯¹è¡¨è¿›è¡Œè®¿é—®;</p><ol><li><strong>è¡Œé”ï¼š</strong></li></ol><p>è¡Œé”æ˜¯æŒ‡ä¸Šé”çš„æ—¶å€™é”ä½çš„æ˜¯è¡¨çš„æŸä¸€è¡Œæˆ–å¤šè¡Œè®°å½•ï¼Œå…¶ä»–äº‹åŠ¡è®¿é—®åŒä¸€å¼ è¡¨æ—¶ï¼Œåªæœ‰è¢«é”ä½çš„è®°å½•ä¸èƒ½è®¿é—®ï¼Œå…¶ä»–çš„è®°å½•å¯æ­£å¸¸è®¿é—®;</p><p>ç‰¹ç‚¹:ç²’åº¦å°ï¼ŒåŠ é”éº»çƒ¦ï¼Œä¸å®¹æ˜“å†²çªï¼Œç›¸æ¯”è¡¨é”æ”¯æŒçš„å¹¶å‘é«˜;</p><ol><li><strong>é¡µé”ï¼š</strong></li></ol><p>é¡µçº§é”æ˜¯MySQLä¸­é”å®šç²’åº¦ä»‹äºè¡Œçº§é”å’Œè¡¨çº§é”ä¸­é—´çš„ä¸€ç§é”ã€‚è¡¨çº§é”é€Ÿåº¦å¿«ï¼Œä½†å†²çªå¤šï¼Œè¡Œçº§å†²çªå°‘ï¼Œä½†é€Ÿåº¦æ…¢ã€‚</p><p>æ‰€ä»¥å–äº†æŠ˜ä¸­çš„é¡µçº§ï¼Œä¸€æ¬¡é”å®šç›¸é‚»çš„ä¸€ç»„è®°å½•ã€‚</p><p>ç‰¹ç‚¹:å¼€é”€å’ŒåŠ é”æ—¶é—´ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´;ä¼šå‡ºç°æ­»é”;é”å®šç²’åº¦ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬</p><ol><li><strong>è®°å½•é”(Record Lock)ï¼š</strong></li></ol><p>è®°å½•é”ä¹Ÿå±äºè¡Œé”ä¸­çš„ä¸€ç§ï¼Œåªä¸è¿‡è®°å½•é”çš„èŒƒå›´åªæ˜¯è¡¨ä¸­çš„æŸä¸€æ¡è®°å½•ï¼Œè®°å½•é”æ˜¯è¯´äº‹åŠ¡åœ¨åŠ é”åé”ä½çš„åªæ˜¯è¡¨çš„æŸä¸€æ¡è®°å½•ã€‚</p><p>ç²¾å‡†æ¡ä»¶å‘½ä¸­ï¼Œå¹¶ä¸”å‘½ä¸­çš„æ¡ä»¶å­—æ®µæ˜¯å”¯ä¸€ç´¢å¼•</p><p>åŠ äº†è®°å½•é”ä¹‹åæ•°æ®å¯ä»¥é¿å…æ•°æ®åœ¨æŸ»è¯¢çš„æ—¶å€™è¢«ä¿®æ”¹çš„é‡å¤è¯»é—®é¢˜ï¼Œä¹Ÿé¿å…äº†åœ¨ä¿®æ”¹çš„äº‹åŠ¡æœªæäº¤å‰è¢«å…¶ä»–äº‹åŠ¡è¯»å–çš„è„è¯»é—®é¢˜ã€‚</p><ol><li><strong>é—´éš™é”(Gap Lock)ï¼š</strong></li></ol><p>å±äºè¡Œé”ä¸­çš„ä¸€ç§ï¼Œé—´éš™é”æ˜¯åœ¨äº‹åŠ¡åŠ é”åå…¶é”ä½çš„æ˜¯è¡¨è®°å½•çš„æŸä¸€ä¸ªåŒºé—´ï¼Œå½“è¡¨çš„ç›¸é‚»IDä¹‹é—´å‡ºç°ç©ºéš™åˆ™ä¼šå½¢æˆä¸€ä¸ªåŒºé—´ï¼Œéµå¾ªå·¦å¼€å³é—­åŸåˆ™ã€‚</p><p>èŒƒå›´æŸ¥è¯¢å¹¶ä¸”æŸ¥è¯¢æœªå‘½ä¸­è®°å½•ï¼ŒæŸ¥è¯¢æ¡ä»¶å¿…é¡»å‘½ä¸­ç´¢å¼•ã€é—´éš™é”åªä¼šå‡ºç°REPEATABLE_READ(å¯é‡å¤è¯»)çš„äº‹åŠ¡çº§åˆ«ä¸­ã€‚</p><p>è§¦å‘æ¡ä»¶:é˜²æ­¢å¹»è¯»é—®é¢˜ï¼Œäº‹åŠ¡å¹¶å‘çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰é—´éš™é”ï¼Œå°±ä¼šå‘ç”Ÿå¦‚ä¸‹å›¾çš„é—®é¢˜ï¼Œåœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œï¼ŒAäº‹åŠ¡çš„ä¸¤æ¬¡æŸ¥è¯¢å‡ºçš„ç»“æœä¼šä¸ä¸€æ ·ã€‚</p><p>æ¯”å¦‚è¡¨é‡Œé¢çš„æ•°æ®ID ä¸º 1,4,5,7,10,é‚£ä¹ˆä¼šå½¢æˆä»¥ä¸‹å‡ ä¸ªé—´éš™åŒºé—´ï¼Œ-n-1åŒºé—´ï¼Œ1-4åŒºé—´ï¼Œ7-10åŒºé—´ï¼Œ10-nåŒºé—´(-nä»£è¡¨è´Ÿæ— ç©·å¤§ï¼Œnä»£è¡¨æ­£æ— ç©·å¤§)</p><ol><li><strong>ä¸´å»ºé”(Next-Key Lock)ï¼š</strong></li></ol><p>ä¹Ÿå±äºè¡Œé”çš„ä¸€ç§ï¼Œå¹¶ä¸”å®ƒæ˜¯INNODBçš„è¡Œé”é»˜è®¤ç®—æ³•ï¼Œæ€»ç»“æ¥è¯´å®ƒå°±æ˜¯è®°å½•é”å’Œé—´éš™é”çš„ç»„åˆï¼Œä¸´é”®é”ä¼šæŠŠæŸ¥è¯¢å‡ºæ¥çš„è®°å½•é”ä½ï¼ŒåŒæ—¶ä¹Ÿä¼šæŠŠè¯¥èŒƒå›´æŸ¥è¯¢å†…çš„æ‰€æœ‰é—´éš™ç©ºé—´ä¹Ÿä¼šé”ä½ï¼Œå†ä¹‹å®ƒä¼šæŠŠç›¸é‚»çš„ä¸‹ä¸€ä¸ªåŒºé—´ä¹Ÿä¼šé”ä½è§¦å‘æ¡ä»¶:èŒƒå›´æŸ¥è¯¢å¹¶å‘½ä¸­ï¼ŒæŸ¥è¯¢å‘½ä¸­äº†ç´¢å¼•ã€‚ç»“åˆè®°å½•é”å’Œé—´éš™é”çš„ç‰¹æ€§ï¼Œä¸´é”®é”é¿å…äº†åœ¨èŒƒå›´æŸ»è¯¢æ—¶å‡ºç°è„è¯»ã€é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ã€‚åŠ äº†ä¸´é”®é”ä¹‹åï¼Œåœ¨èŒƒå›´åŒºé—´å†…æ•°æ®ä¸å…è®¸è¢«ä¿®æ”¹å’Œæ’å…¥ã€‚</p><ol><li><strong>æ„å‘é”ï¼š</strong></li></ol><p>å¦‚æœå½“äº‹åŠ¡AåŠ é”æˆåŠŸä¹‹åå°±è®¾ç½®ä¸€ä¸ªçŠ¶æ€å‘Šè¯‰åé¢çš„äººï¼Œå·²ç»æœ‰äººå¯¹è¡¨é‡Œçš„è¡ŒåŠ äº†ä¸€ä¸ªæ’ä»–é”äº†ï¼Œä½ ä»¬ä¸èƒ½å¯¹æ•´ä¸ªè¡¨åŠ å…±äº«é”æˆ–æ’å®ƒé”äº†ï¼Œé‚£ä¹ˆåé¢éœ€è¦å¯¹æ•´ä¸ªè¡¨åŠ é”çš„äººåªéœ€è¦è·å–è¿™ä¸ªçŠ¶æ€å°±çŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯å¯ä»¥å¯¹è¡¨åŠ é”ï¼Œé¿å…äº†å¯¹æ•´ä¸ªç´¢å¼•æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹æ‰«ææ˜¯å¦åŠ é”ï¼Œè€Œè¿™ä¸ªçŠ¶æ€å°±æ˜¯æ„å‘é”ã€‚</p><ol><li><strong>æ„å‘å…±äº«é”ï¼š</strong></li></ol><p>å½“ä¸€ä¸ªäº‹åŠ¡è¯•å›¾å¯¹æ•´ä¸ªè¡¨è¿›è¡ŒåŠ å…±äº«é”ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦è·å¾—è¿™ä¸ªè¡¨çš„æ„å‘å…±äº«é”ï¼Œ</p><ol><li><strong>æ„å‘æ’ä»–é”ï¼š</strong></li></ol><p>å½“ä¸€ä¸ªäº‹åŠ¡è¯•å›¾å¯¹æ•´ä¸ªè¡¨è¿›è¡ŒåŠ æ’å®ƒé”ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦è·å¾—è¿™ä¸ªè¡¨çš„æ„å‘æ’å®ƒé”ã€‚</p><h3 id="_5-mvcc" tabindex="-1"><a class="header-anchor" href="#_5-mvcc"><span>5. MVCC</span></a></h3><p>è¯»å–æ•°æ®æ—¶é€šè¿‡ä¸€ç§ç±»ä¼¼å¿«ç…§çš„æ–¹å¼å°†æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œè¿™æ ·è¯»é”å’Œå†™é”å°±ä¸å†²çªäº†ï¼Œ</p><p>ä¸åŒçš„äº‹åŠ¡sessionä¼šçœ‹åˆ°è‡ªå·±ç‰¹å®šç‰ˆæœ¬çš„æ•°æ®ï¼Œç‰ˆæœ¬é“¾MVCCåªåœ¨è¯»å·²æäº¤å’Œå¯é‡å¤è¯»ä¸¤ä¸ªéš”ç¦»çº§åˆ«ä¸‹å·¥ä½œã€‚å…¶ä»–ä¸¤ä¸ªéš”ç¦»çº§åˆ«å¤Ÿå’ŒMVCCä¸å…¼å®¹, å› ä¸ºè¯»æœªæäº¤æ€»æ˜¯è¯»å–æœ€æ–°çš„æ•°æ®è¡Œ, è€Œä¸æ˜¯ç¬¦åˆå½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®è¡Œã€‚è€Œä¸²è¡ŒåŒ–åˆ™ä¼šå¯¹æ‰€æœ‰è¯»å–çš„è¡Œéƒ½åŠ é”ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324600.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>èšç°‡ç´¢å¼•è®°å½•ä¸­æœ‰ä¸¤ä¸ªå¿…è¦çš„éšè—åˆ—ï¼š</strong></p><p>trx_idï¼šç”¨æ¥å­˜å‚¨æ¯æ¬¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œä¿®æ”¹çš„æ—¶å€™çš„äº‹åŠ¡idã€‚</p><p>roll_pointerï¼šæ¯æ¬¡å¯¹å“ªæ¡èšç°‡ç´¢å¼•è®°å½•æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œéƒ½ä¼šæŠŠè€ç‰ˆæœ¬å†™å…¥undoæ—¥å¿—ä¸­ã€‚è¿™ä¸ªroll_pointerå°±æ˜¯å­˜äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘è¿™æ¡èšç°‡ç´¢å¼•è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„ä½ç½®ï¼Œé€šè¿‡å®ƒæ¥è·å¾—ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„è®°å½•ä¿¡æ¯ã€‚(æ³¨æ„æ’å…¥æ“ä½œçš„undoæ—¥å¿—æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è€ç‰ˆæœ¬)</p><p><strong>è¯»å·²æäº¤å’Œå¯é‡å¤è¯»çš„åŒºåˆ«<strong><strong>å°±åœ¨äºå®ƒä»¬ç”Ÿæˆ</strong></strong>ReadViewçš„ç­–ç•¥ä¸åŒ</strong>**ï¼š**</p><p>å¼€å§‹äº‹åŠ¡æ—¶åˆ›å»ºreadviewï¼ŒreadViewç»´æŠ¤å½“å‰æ´»åŠ¨çš„äº‹åŠ¡idï¼Œå³æœªæäº¤çš„äº‹åŠ¡idï¼Œæ’åºç”Ÿæˆä¸€ä¸ªæ•°ç»„è®¿é—®æ•°æ®ï¼Œè·å–æ•°æ®ä¸­çš„äº‹åŠ¡idï¼ˆè·å–çš„æ˜¯äº‹åŠ¡idæœ€å¤§çš„è®°å½•ï¼‰ã€‚</p><p>å¯¹æ¯”readviewï¼šå¦‚æœåœ¨readviewçš„å·¦è¾¹ï¼ˆæ¯”readviewéƒ½å°ï¼‰ï¼Œå¯ä»¥è®¿é—®ï¼ˆåœ¨å·¦è¾¹æ„å‘³ç€è¯¥äº‹åŠ¡å·²ç»æäº¤ï¼‰å¦‚æœåœ¨readviewçš„å³è¾¹ï¼ˆæ¯”readviewéƒ½å¤§ï¼‰æˆ–è€…å°±åœ¨readviewä¸­ï¼Œä¸å¯ä»¥è®¿é—®ï¼Œè·å–roll_pointerï¼Œå–ä¸Šä¸€ç‰ˆæœ¬é‡æ–°å¯¹æ¯”ï¼ˆåœ¨å³è¾¹æ„å‘³ç€ï¼Œè¯¥äº‹åŠ¡åœ¨readviewç”Ÿæˆä¹‹åå‡ºç°ï¼Œåœ¨readviewä¸­æ„å‘³ç€è¯¥äº‹åŠ¡è¿˜æœªæäº¤ï¼‰ã€‚</p><p>è¯»å·²æäº¤éš”ç¦»çº§åˆ«ä¸‹çš„äº‹åŠ¡åœ¨æ¯æ¬¡æŸ¥è¯¢çš„å¼€å§‹éƒ½ä¼šç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„ReadView,</p><p>å¯é‡å¤è¯»éš”ç¦»çº§åˆ«åˆ™åœ¨ç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ªReadViewï¼Œä¹‹åçš„è¯»éƒ½å¤ç”¨ä¹‹å‰çš„ReadViewã€‚</p><p>è¿™å°±æ˜¯Mysqlçš„MVCC,é€šè¿‡ç‰ˆæœ¬é“¾ï¼Œå®ç°å¤šç‰ˆæœ¬ï¼Œå¯å¹¶å‘è¯»-å†™ï¼Œå†™-è¯»ã€‚é€šè¿‡ReadViewç”Ÿæˆç­–ç•¥çš„ä¸åŒå®ç°ä¸åŒçš„éš”ç¦»çº§åˆ«ã€‚</p><h3 id="_6-ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_6-ç´¢å¼•"><span>6. ç´¢å¼•</span></a></h3><p><strong>åº•å±‚åŸç†ï¼š</strong></p><p>MySQL ç´¢å¼•åº•å±‚åŸç†ä½¿ç”¨äº†B+æ ‘æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ç§å¹³è¡¡æ ‘ï¼Œèƒ½å¿«é€Ÿå®šä½å’Œæ£€ç´¢æ•°æ®ï¼›B+æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨å®é™…æ•°æ®ï¼Œä¸­é—´èŠ‚ç‚¹å­˜å‚¨ç´¢å¼•ï¼Œé€šè¿‡å‡å°‘ç£ç›˜ IO æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ï¼›ç´¢å¼•æŒ‰ç…§å€¼çš„å¤§å°é¡ºåºæ’åˆ—ï¼Œä½¿å¾—èŒƒå›´æŸ¥è¯¢æ•ˆç‡æ›´é«˜ã€‚</p><p><strong>ç´¢å¼•ç±»å‹ï¼š</strong></p><p>æŒ‰ç…§åº•å±‚å­˜å‚¨æ–¹å¼è§’åº¦åˆ’åˆ†ï¼š</p><ul><li>èšç°‡ç´¢å¼•ï¼ˆèšé›†ç´¢å¼•ï¼‰ï¼šç´¢å¼•ç»“æ„å’Œæ•°æ®ä¸€èµ·å­˜æ”¾çš„ç´¢å¼•ï¼ŒInnoDB ä¸­çš„ä¸»é”®ç´¢å¼•å°±å±äºèšç°‡ç´¢å¼•ã€‚</li><li>éèšç°‡ç´¢å¼•ï¼ˆéèšé›†ç´¢å¼•ï¼‰ï¼šç´¢å¼•ç»“æ„å’Œæ•°æ®åˆ†å¼€å­˜æ”¾çš„ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•(è¾…åŠ©ç´¢å¼•)å°±å±äºéèšç°‡ç´¢å¼•ã€‚MyISAM ä¸­ï¼Œä¸ç®¡ä¸»é”®è¿˜æ˜¯éä¸»é”®ï¼Œä½¿ç”¨çš„éƒ½æ˜¯éèšç°‡ç´¢å¼•ã€‚</li></ul><p>æŒ‰ç…§åº”ç”¨ç»´åº¦åˆ’åˆ†ï¼š</p><ul><li>ä¸»é”®ç´¢å¼•ï¼šåŠ é€ŸæŸ¥è¯¢ + åˆ—å€¼å”¯ä¸€ï¼ˆä¸å¯ä»¥æœ‰ NULLï¼‰+ è¡¨ä¸­åªæœ‰ä¸€ä¸ªã€‚</li><li>æ™®é€šç´¢å¼•ï¼šä»…åŠ é€ŸæŸ¥è¯¢ã€‚</li><li>å”¯ä¸€ç´¢å¼•ï¼šåŠ é€ŸæŸ¥è¯¢ + åˆ—å€¼å”¯ä¸€ï¼ˆå¯ä»¥æœ‰ NULLï¼‰ã€‚</li><li>è¦†ç›–ç´¢å¼•ï¼šä¸€ä¸ªç´¢å¼•åŒ…å«ï¼ˆè¦†ç›–ï¼‰æ‰€æœ‰éœ€è¦æŸ¥è¯¢çš„å­—æ®µçš„å€¼ã€‚</li><li>è”åˆç´¢å¼•ï¼šå¤šåˆ—å€¼ç»„æˆä¸€ä¸ªç´¢å¼•ï¼Œä¸“é—¨ç”¨äºç»„åˆæœç´¢ï¼Œå…¶æ•ˆç‡å¤§äºç´¢å¼•åˆå¹¶ã€‚</li><li>å…¨æ–‡ç´¢å¼•ï¼šå¯¹æ–‡æœ¬çš„å†…å®¹è¿›è¡Œåˆ†è¯ï¼Œè¿›è¡Œæœç´¢ã€‚ç›®å‰åªæœ‰ <code>CHAR</code>ã€<code>VARCHAR</code> ï¼Œ<code>TEXT</code> åˆ—ä¸Šå¯ä»¥åˆ›å»ºå…¨æ–‡ç´¢å¼•ã€‚ä¸€èˆ¬ä¸ä¼šä½¿ç”¨ï¼Œæ•ˆç‡è¾ƒä½ï¼Œé€šå¸¸ä½¿ç”¨æœç´¢å¼•æ“å¦‚ ElasticSearch ä»£æ›¿ã€‚</li></ul><h3 id="_7-ä¸‰å¤§æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_7-ä¸‰å¤§æ—¥å¿—"><span>7. ä¸‰å¤§æ—¥å¿—</span></a></h3><p>MySQL æ—¥å¿— ä¸»è¦åŒ…æ‹¬äºŒè¿›åˆ¶æ—¥å¿—ã€äº‹åŠ¡æ—¥å¿—ã€é”™è¯¯æ—¥å¿—ã€æŸ¥è¯¢æ—¥å¿—ã€æ…¢æŸ¥è¯¢æ—¥å¿—å‡ å¤§ç±»ã€‚å…¶ä¸­ï¼Œæ¯”è¾ƒé‡è¦çš„è¿˜è¦å±äºŒè¿›åˆ¶æ—¥å¿—ï¼š binlogï¼ˆå½’æ¡£æ—¥å¿—ï¼‰ï¼Œäº‹åŠ¡æ—¥å¿—ï¼šredo logï¼ˆé‡åšæ—¥å¿—ï¼‰å’Œ undo logï¼ˆå›æ»šæ—¥å¿—ï¼‰ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324601.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>binlogï¼š</strong><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324602.png" alt="img" loading="lazy"></p><p>binlog æ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•å†…å®¹æ˜¯è¯­å¥çš„åŸå§‹é€»è¾‘ï¼Œç±»ä¼¼äºâ€œç»™ ID=2 è¿™ä¸€è¡Œçš„ c å­—æ®µåŠ  1â€ï¼Œå±äº<code>MySQL Server</code> å±‚ã€‚</p><p>ä¸ç®¡ç”¨ä»€ä¹ˆå­˜å‚¨å¼•æ“ï¼Œåªè¦å‘ç”Ÿäº†è¡¨æ•°æ®æ›´æ–°ï¼Œéƒ½ä¼šäº§ç”Ÿ binlog æ—¥å¿—ã€‚</p><p>MySQL æ•°æ®åº“çš„<strong>æ•°æ®å¤‡ä»½ã€ä¸»å¤‡ã€ä¸»ä¸»ã€ä¸»ä»</strong>éƒ½ç¦»ä¸å¼€ binlogï¼Œéœ€è¦ä¾é  binlog æ¥åŒæ­¥æ•°æ®ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</p><p>binlog ä¼šè®°å½•æ‰€æœ‰æ¶‰åŠæ›´æ–°æ•°æ®çš„é€»è¾‘æ“ä½œï¼Œå¹¶ä¸”æ˜¯é¡ºåºå†™ã€‚</p><p><strong>redo logï¼š</strong><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324603.png" alt="img" loading="lazy"></p><p>redo logï¼ˆé‡åšæ—¥å¿—ï¼‰æ˜¯ InnoDB å­˜å‚¨å¼•æ“ç‹¬æœ‰çš„ç‰©ç†æ—¥å¿—ï¼Œè®© MySQL æ‹¥æœ‰äº†å´©æºƒæ¢å¤èƒ½åŠ›ã€‚</p><p>æ¯”å¦‚ MySQL å®ä¾‹æŒ‚äº†æˆ–å®•æœºäº†ï¼Œé‡å¯æ—¶ï¼ŒInnoDB å­˜å‚¨å¼•æ“ä¼šä½¿ç”¨ redo log æ¢å¤æ•°æ®ï¼Œä¿è¯æ•°æ®çš„æŒä¹…æ€§ä¸å®Œæ•´æ€§ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324604.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>MySQL ä¸­æ•°æ®æ˜¯ä»¥é¡µä¸ºå•ä½ï¼Œä½ æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œä¼šä»ç¡¬ç›˜ä¸­æŠŠä¸€é¡µçš„æ•°æ®åŠ è½½å‡ºæ¥ï¼ŒåŠ è½½å‡ºæ¥çš„æ•°æ®å«æ•°æ®é¡µï¼Œä¼šæ”¾å…¥åˆ° <code>Buffer Pool</code> ä¸­ã€‚åç»­çš„æŸ¥è¯¢éƒ½æ˜¯å…ˆä» <code>Buffer Pool</code> ä¸­æ‰¾ï¼Œæ²¡æœ‰å‘½ä¸­å†å»ç¡¬ç›˜åŠ è½½ï¼Œå‡å°‘ç¡¬ç›˜ IO å¼€é”€ï¼Œæå‡æ€§èƒ½ã€‚</li><li>æ›´æ–°è¡¨æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå‘ç° <code>Buffer Pool</code> é‡Œå­˜åœ¨è¦æ›´æ–°çš„æ•°æ®ï¼Œå°±ç›´æ¥åœ¨ <code>Buffer Pool</code> é‡Œæ›´æ–°ã€‚</li><li>ç„¶åä¼šæŠŠâ€œåœ¨æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹â€è®°å½•åˆ°é‡åšæ—¥å¿—ç¼“å­˜ï¼ˆ<code>redo log buffer</code>ï¼‰é‡Œ</li><li>æ¥ç€æ¸…ç©º redolog bufferï¼Œ åˆ·ç›˜åˆ° redo log æ–‡ä»¶é‡Œã€‚</li></ol><p>ç†æƒ³æƒ…å†µï¼Œäº‹åŠ¡ä¸€æäº¤å°±ä¼šè¿›è¡Œåˆ·ç›˜æ“ä½œï¼Œä½†å®é™…ä¸Šï¼Œåˆ·ç›˜çš„æ—¶æœºæ˜¯æ ¹æ®ç­–ç•¥æ¥è¿›è¡Œçš„ã€‚</p><p>å°è´´å£«ï¼šæ¯æ¡ redo è®°å½•ç”±â€œè¡¨ç©ºé—´å·+æ•°æ®é¡µå·+åç§»é‡+ä¿®æ”¹æ•°æ®é•¿åº¦+å…·ä½“ä¿®æ”¹çš„æ•°æ®â€ç»„æˆ</p><p><strong>undo logï¼š</strong></p><p>æ¯ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®çš„ä¿®æ”¹éƒ½ä¼šè¢«è®°å½•åˆ° undo logï¼Œå½“æ‰§è¡Œäº‹åŠ¡è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯æˆ–è€…éœ€è¦æ‰§è¡Œå›æ»šæ“ä½œçš„è¯ï¼ŒMySQLå¯ä»¥åˆ©ç”¨ undo log å°†æ•°æ®æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€ã€‚</p><p>undo logå±äºé€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯ SOLè¯­å¥ï¼Œæ¯”å¦‚è¯´äº‹åŠ¡æ‰§è¡Œä¸€æ¡ DELETE è¯­å¥ï¼Œé‚£ undo log å°±ä¼šè®°å½•æ¡ç›¸å¯¹åº”çš„ INSERT è¯­å¥ã€‚åŒæ—¶ï¼Œundo logçš„ä¿¡æ¯ä¹Ÿä¼šè¢«è®°å½•åˆ° redo log ä¸­ï¼Œå› ä¸º undo logä¹Ÿè¦å®ç°æŒä¹…æ€§ä¿æŠ¤ã€‚å¹¶ä¸”ï¼Œundo logæœ¬èº«æ˜¯ä¼šè¢«åˆ é™¤æ¸…ç†çš„ï¼Œä¾‹å¦‚ INSERTæ“ä½œï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹åå°±å¯ä»¥æ¸…é™¤æ‰äº†;UPDATE/DELETE æ“ä½œåœ¨äº‹åŠ¡æäº¤ä¸ä¼šç«‹å³åˆ é™¤ï¼Œä¼šåŠ å…¥ history listï¼Œç”±åå°çº¿ç¨‹ purge è¿›è¡Œæ¸…ç†ã€‚</p><p>undo log æ˜¯é‡‡ç”¨ segment(æ®µ)çš„æ–¹å¼æ¥è®°å½•çš„ï¼Œæ¯ä¸ª undo æ“ä½œåœ¨è®°å½•çš„æ—¶å€™å ç”¨ä¸€ä¸ª undo log segment(undoæ—¥å¿—æ®µ)ï¼Œumdo log segmentåŒ…å«åœ¨roll back segment(å›æ»šæ®µ)ä¸­ã€‚äº‹åŠ¡å¼€å§‹æ—¶ï¼Œéœ€è¦ä¸ºå…¶åˆ†é…ä¸€ä¸ªroll back segmentã€‚æ¯ä¸ªroll back segmentæœ‰1024ä¸ªundo log segmentï¼Œè¿™æœ‰åŠ©äºç®¡ç†å¤šä¸ªå¹¶å‘äº‹åŠ¡çš„å›æ»šéœ€æ±‚ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œrollback segment header(å›æ»šæ®µçš„ç¬¬ä¸€ä¸ªé¡µ)è´Ÿè´£ç®¡ç† rollback segmentã€‚rolback segment header æ˜¯ rollback segment çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸åœ¨å›æ»šæ®µçš„ç¬¬ä¸€ä¸ªé¡µã€‚history list æ˜¯rollback segment header çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯è®°å½•æ‰€æœ‰å·²ç»æäº¤ä½†è¿˜æ²¡æœ‰è¢«æ¸…ç†(purge)çš„äº‹åŠ¡çš„undo logã€‚è¿™ä¸ªåˆ—è¡¨ä½¿å¾— purge çº¿ç¨‹èƒ½å¤Ÿæ‰¾åˆ°å¹¶æ¸…ç†é‚£äº›ä¸å†éœ€è¦çš„ undo logè®°å½•ã€‚</p><p>å¦å¤–ï¼ŒMVCC çš„å®ç°ä¾èµ–äºï¼šéšè—å­—æ®µã€ReadViewã€undologã€‚åœ¨å†…éƒ¨å®ç°ä¸­ï¼ŒImnnoDBé€šè¿‡æ•°æ®è¡Œçš„DB TRX ID å’Œ Read view æ¥åˆ¤æ–­æ•°æ®çš„å¯è§æ€§ï¼Œå¦‚ä¸å¯è§ï¼Œåˆ™é€šè¿‡æ•°æ®è¡Œçš„ DB ROLL PTR æ‰¾åˆ° undo logä¸­çš„å†å²ç‰ˆæœ¬ã€‚æ¯ä¸ªäº‹åŠ¡è¯»åˆ°çš„æ•°æ®ç‰ˆæœ¬å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œç”¨æˆ·åªèƒ½çœ‹åˆ°è¯¥äº‹åŠ¡åˆ›å»ºRead view ä¹‹å‰å·²ç»æäº¤çš„ä¿®æ”¹å’Œè¯¥äº‹åŠ¡æœ¬èº«åšçš„ä¿®æ”¹</p><h3 id="_8-å­˜å‚¨å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_8-å­˜å‚¨å¼•æ“"><span>8. å­˜å‚¨å¼•æ“</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324605.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>InnoDBï¼ˆMySQL çš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼‰ï¼Œæ”¯æŒäº‹åŠ¡å¤„ç†ã€è¡Œçº§é”å’Œå¤–é”®ï¼›</p><p>MyISAM ä¸æ”¯æŒäº‹åŠ¡ã€åªæœ‰è¡¨çº§é”ï¼Œå¹¶ä¸”ä¸æ”¯æŒå¤–é”®ã€‚</p><h3 id="_9-ä¼˜åŒ–æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_9-ä¼˜åŒ–æ–¹æ¡ˆ"><span>9. ä¼˜åŒ–æ–¹æ¡ˆ</span></a></h3><p><a href="https://javaguide.cn/database/mysql/mysql-questions-01.html#mysql-%E6%80%A7%E8%83%BD%E6%80%8E%E4%B9%88%E4%BC%98%E5%8C%96" target="_blank" rel="noopener noreferrer">MySQLå¸¸è§é¢è¯•é¢˜æ€»ç»“ | JavaGuide</a></p><ul><li>æœåŠ¡å™¨ä¼˜åŒ–ï¼ˆå¢åŠ  CPUã€å†…å­˜ã€ç½‘ç»œã€æ›´æ¢é«˜æ€§èƒ½ç£ç›˜ï¼‰</li><li>è¡¨è®¾è®¡ä¼˜åŒ–ï¼ˆå­—æ®µé•¿åº¦æ§åˆ¶ã€æ·»åŠ å¿…è¦çš„ç´¢å¼•ï¼‰</li><li>SQL ä¼˜åŒ–ï¼ˆé¿å… SQL å‘½ä¸­ä¸åˆ°ç´¢å¼•çš„æƒ…å†µï¼‰</li><li>æ¶æ„éƒ¨ç½²ä¼˜åŒ–ï¼ˆä¸€ä¸»å¤šä»é›†ç¾¤éƒ¨ç½²ï¼‰</li><li>åˆ†åº“åˆ†è¡¨ï¼ˆå‚ç›´åˆ†åº“ã€æ°´å¹³åˆ†è¡¨ï¼‰</li><li>è¯»å†™åˆ†ç¦»</li></ul><h2 id="å…­ã€redis" tabindex="-1"><a class="header-anchor" href="#å…­ã€redis"><span>å…­ã€Redis</span></a></h2><h3 id="_1-ä»€ä¹ˆæ˜¯-redis" tabindex="-1"><a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯-redis"><span>1. ä»€ä¹ˆæ˜¯ Redis</span></a></h3><p><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis</a> ï¼ˆ<strong>RE</strong>mote <strong>DI</strong>ctionary <strong>S</strong>erverï¼‰æ˜¯ä¸€ä¸ªåŸºäº C è¯­è¨€å¼€å‘çš„å¼€æº NoSQL æ•°æ®åº“ï¼ˆBSD è®¸å¯ï¼‰ã€‚ä¸ä¼ ç»Ÿæ•°æ®åº“ä¸åŒçš„æ˜¯ï¼ŒRedis çš„æ•°æ®æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼ˆå†…å­˜æ•°æ®åº“ï¼Œæ”¯æŒæŒä¹…åŒ–ï¼‰ï¼Œå› æ­¤è¯»å†™é€Ÿåº¦éå¸¸å¿«ï¼Œè¢«å¹¿æ³›åº”ç”¨äºåˆ†å¸ƒå¼ç¼“å­˜æ–¹å‘ã€‚å¹¶ä¸”ï¼ŒRedis å­˜å‚¨çš„æ˜¯ KV é”®å€¼å¯¹æ•°æ®ã€‚</p><h3 id="_2-redis-ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#_2-redis-ä¼˜ç‚¹"><span>2. Redis ä¼˜ç‚¹</span></a></h3><p>Redis ä¹‹æ‰€ä»¥å¿«æ˜¯å› ä¸ºå®ƒé‡‡ç”¨äº†å†…å­˜å­˜å‚¨å’Œéé˜»å¡çš„ I/O æ¨¡å‹ï¼Œé¿å…äº†ç£ç›˜ IO çš„å»¶è¿Ÿï¼›</p><p>Redis ä½¿ç”¨äº†IO å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œé€šè¿‡ä¸€ä¸ªçº¿ç¨‹åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼Œå‡å°‘äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œæé«˜äº†å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</p><p>Redisé€Ÿåº¦å¿«ä¸»è¦æœ‰ä»¥ä¸‹åŸå› ï¼š</p><p>- åŸºäºå†…å­˜å­˜å‚¨ï¼šæ•°æ®å­˜äºå†…å­˜ï¼Œå†…å­˜è¯»å†™é€Ÿåº¦è¿œå¿«äºç£ç›˜ï¼Œé¿å…äº†ç£ç›˜I/Oçš„å»¶è¿Ÿï¼Œæå¤§å‡å°‘äº†æ•°æ®è®¿é—®æ—¶é—´ã€‚</p><p>- I/Oå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼šé‡‡ç”¨å•çº¿ç¨‹ï¼ˆä¸»è¦æ˜¯ç½‘ç»œI/Oå’Œé”®å€¼å¯¹è¯»å†™ï¼‰ç»“åˆI/Oå¤šè·¯å¤ç”¨ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚å°±åƒäº¤é€šè­¦å¯Ÿç®¡ç†äº¤é€šä¸€æ ·ï¼Œå¤šè·¯å¤ç”¨å™¨å¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥äº‹ä»¶ï¼Œåªæœ‰å½“äº‹ä»¶å‘ç”Ÿæ—¶æ‰è¿›è¡Œæ“ä½œï¼Œé¿å…äº†ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçº¿ç¨‹æ‰€å¸¦æ¥çš„å¤§é‡çº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼Œæœ‰æ•ˆæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</p><p>- é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼šRedisæ‹¥æœ‰å¤šç§ç®€å•é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå¦‚å“ˆå¸Œè¡¨ï¼ˆæŸ¥æ‰¾å…ƒç´ å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼‰ã€è·³è¡¨ç­‰ï¼Œè¿™äº›æ•°æ®ç»“æ„çš„æ—¶é—´å¤æ‚åº¦è¾ƒä½ï¼Œèƒ½å¿«é€Ÿåœ°æ“ä½œæ•°æ®ã€‚</p><h3 id="_3-redis-åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_3-redis-åº”ç”¨åœºæ™¯"><span>3. Redis åº”ç”¨åœºæ™¯</span></a></h3><ul><li>ç¼“å­˜</li><li>æ’è¡Œæ¦œ</li><li>åˆ†å¸ƒå¼è®¡æ•°å™¨</li><li>åˆ†å¸ƒå¼é”</li><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>åˆ†å¸ƒå¼token</li><li>é™æµ</li></ul><h3 id="_4-redis-æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_4-redis-æ•°æ®ç±»å‹"><span>4. Redis æ•°æ®ç±»å‹</span></a></h3><p><a href="https://javaguide.cn/database/redis/redis-data-structures-01.html" target="_blank" rel="noopener noreferrer">Redis 5 ç§åŸºæœ¬æ•°æ®ç±»å‹è¯¦è§£ | JavaGuide</a> | <a href="https://javaguide.cn/database/redis/redis-data-structures-02.html" target="_blank" rel="noopener noreferrer">Redis 3 ç§ç‰¹æ®Šæ•°æ®ç±»å‹è¯¦è§£ | JavaGuide</a></p><p><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324606.png" alt="img" loading="lazy"><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324607.jpeg" alt="img" loading="lazy"></p><p>5 ç§åŸºç¡€æ•°æ®ç±»å‹ï¼šStringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Listï¼ˆåˆ—è¡¨ï¼‰ã€Setï¼ˆé›†åˆï¼‰ã€Hashï¼ˆæ•£åˆ—ï¼‰ã€Zsetï¼ˆæœ‰åºé›†åˆï¼‰ã€‚</p><p>3 ç§ç‰¹æ®Šæ•°æ®ç±»å‹ï¼šHyperLogLogï¼ˆåŸºæ•°ç»Ÿè®¡ï¼‰ã€Bitmap ï¼ˆä½å›¾ï¼‰ã€Geospatial (åœ°ç†ä½ç½®)ã€‚</p><p>å…¶ä»–çš„æ¯”å¦‚ï¼š Bloom filterï¼ˆå¸ƒéš†è¿‡æ»¤å™¨ï¼‰ã€Bitfieldï¼ˆä½åŸŸï¼‰ã€‚</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>String</td><td><strong>éœ€è¦å­˜å‚¨å¸¸è§„æ•°æ®çš„åœºæ™¯</strong>ä¸¾ä¾‹ï¼šç¼“å­˜ Sessionã€Tokenã€å›¾ç‰‡åœ°å€ã€åºåˆ—åŒ–åçš„å¯¹è±¡(ç›¸æ¯”è¾ƒäº Hash å­˜å‚¨æ›´èŠ‚çœå†…å­˜)ã€‚ç›¸å…³å‘½ä»¤ï¼š<code>SET</code>ã€<code>GET</code>ã€‚<strong>éœ€è¦è®¡æ•°çš„åœºæ™¯</strong>ä¸¾ä¾‹ï¼šç”¨æˆ·å•ä½æ—¶é—´çš„è¯·æ±‚æ•°ï¼ˆç®€å•é™æµå¯ä»¥ç”¨åˆ°ï¼‰ã€é¡µé¢å•ä½æ—¶é—´çš„è®¿é—®æ•°ã€‚ç›¸å…³å‘½ä»¤ï¼š<code>SET</code>ã€<code>GET</code>ã€ <code>INCR</code>ã€<code>DECR</code> ã€‚<strong>åˆ†å¸ƒå¼é”</strong>åˆ©ç”¨ <code>SETNX key value</code> å‘½ä»¤å¯ä»¥å®ç°ä¸€ä¸ªæœ€ç®€æ˜“çš„åˆ†å¸ƒå¼é”ï¼ˆå­˜åœ¨ä¸€äº›ç¼ºé™·ï¼Œé€šå¸¸ä¸å»ºè®®è¿™æ ·å®ç°åˆ†å¸ƒå¼é”ï¼‰ã€‚</td></tr><tr><td>List</td><td><strong>ä¿¡æ¯æµå±•ç¤º****ä¸¾ä¾‹ï¼šæœ€æ–°æ–‡ç« ã€æœ€æ–°åŠ¨æ€ã€‚****ç›¸å…³å‘½ä»¤ï¼š</strong><code>**LPUSH**</code><strong>ã€</strong><code>**LRANGE**</code>**ã€‚**<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong><code>**List**</code> **å¯ä»¥ç”¨æ¥åšæ¶ˆæ¯é˜Ÿåˆ—ï¼Œåªæ˜¯åŠŸèƒ½è¿‡äºç®€å•ä¸”å­˜åœ¨å¾ˆå¤šç¼ºé™·ï¼Œä¸å»ºè®®è¿™æ ·åšã€‚**<strong>ç›¸å¯¹æ¥è¯´ï¼ŒRedis 5.0 æ–°å¢åŠ çš„ä¸€ä¸ªæ•°æ®ç»“æ„</strong> <code>**Stream**</code> <strong>æ›´é€‚åˆåšæ¶ˆæ¯é˜Ÿåˆ—ä¸€äº›ï¼Œåªæ˜¯åŠŸèƒ½ä¾ç„¶éå¸¸ç®€é™‹ã€‚å’Œä¸“ä¸šçš„æ¶ˆæ¯é˜Ÿåˆ—ç›¸æ¯”ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šæ¬ ç¼ºçš„åœ°æ–¹æ¯”å¦‚æ¶ˆæ¯ä¸¢å¤±å’Œå †ç§¯é—®é¢˜ä¸å¥½è§£å†³ã€‚</strong></td></tr></tbody></table><h3 id="_5-redis-æŒä¹…åŒ–æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_5-redis-æŒä¹…åŒ–æœºåˆ¶"><span>5. Redis æŒä¹…åŒ–æœºåˆ¶</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324608.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>RDBï¼ˆRedis Database Backupï¼‰ï¼š</strong></p><p>RDB æ˜¯ Redis çš„ä¸€ç§å¿«ç…§æ–¹å¼çš„æŒä¹…åŒ–æ–¹æ³•ã€‚å®ƒå®šæœŸå°† Redis å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸Šçš„ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚å½“ Redis é‡æ–°å¯åŠ¨æ—¶ï¼Œå¯ä»¥åŠ è½½è¿™ä¸ª RDB æ–‡ä»¶æ¥æ¢å¤ä¹‹å‰ä¿å­˜çš„æ•°æ®çŠ¶æ€ã€‚</p><p>Redis å¯ä»¥é€šè¿‡åˆ›å»ºå¿«ç…§æ¥è·å¾—å­˜å‚¨åœ¨å†…å­˜é‡Œé¢çš„æ•°æ®åœ¨<strong>æŸä¸ªæ—¶é—´ç‚¹</strong>ä¸Šçš„å‰¯æœ¬ã€‚Redis åˆ›å»ºå¿«ç…§ä¹‹åï¼Œå¯ä»¥å¯¹å¿«ç…§è¿›è¡Œå¤‡ä»½ï¼Œå¯ä»¥å°†å¿«ç…§å¤åˆ¶åˆ°å…¶ä»–æœåŠ¡å™¨ä»è€Œåˆ›å»ºå…·æœ‰ç›¸åŒæ•°æ®çš„æœåŠ¡å™¨å‰¯æœ¬ï¼ˆRedis ä¸»ä»ç»“æ„ï¼Œä¸»è¦ç”¨æ¥æé«˜ Redis æ€§èƒ½ï¼‰ï¼Œè¿˜å¯ä»¥å°†å¿«ç…§ç•™åœ¨åŸåœ°ä»¥ä¾¿é‡å¯æœåŠ¡å™¨çš„æ—¶å€™ä½¿ç”¨ã€‚</p><div class="language-plsql line-numbers-mode" data-highlighter="shiki" data-ext="plsql" data-title="plsql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">save </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">900</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           #åœ¨900ç§’(15åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰1ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRediså°±ä¼šè‡ªåŠ¨è§¦å‘bgsaveå‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">save </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          #åœ¨300ç§’(5åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRediså°±ä¼šè‡ªåŠ¨è§¦å‘bgsaveå‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">save </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        #åœ¨60ç§’(1åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10000ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRediså°±ä¼šè‡ªåŠ¨è§¦å‘bgsaveå‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>AOFï¼ˆAppend Only Fileï¼‰ï¼š</strong></p><p>AOF æ˜¯ä¸€ç§è¿½åŠ æ—¥å¿—æ–¹å¼çš„æŒä¹…åŒ–æ–¹æ³•ã€‚å®ƒè®°å½•æ¯æ¬¡å†™æ“ä½œï¼ˆå¦‚ SETã€INCR ç­‰ï¼‰åˆ°ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­ã€‚å½“ Redis é‡æ–°å¯åŠ¨æ—¶ï¼Œä¼šé‡æ–°æ‰§è¡Œè¿™äº›å†™æ“ä½œæ¥æ¢å¤æ•°æ®é›†çš„åŸå§‹çŠ¶æ€ã€‚</p><p>ä¸å¿«ç…§æŒä¹…åŒ–ç›¸æ¯”ï¼ŒAOF æŒä¹…åŒ–çš„å®æ—¶æ€§æ›´å¥½ã€‚é»˜è®¤æƒ…å†µä¸‹ Redis æ²¡æœ‰å¼€å¯ AOFï¼ˆappend only fileï¼‰æ–¹å¼çš„æŒä¹…åŒ–ï¼ˆRedis 6.0 ä¹‹åå·²ç»é»˜è®¤æ˜¯å¼€å¯äº†ï¼‰ï¼Œå¯ä»¥é€šè¿‡ <code>appendonly</code> å‚æ•°å¼€å¯ï¼š</p><div class="language-plsql line-numbers-mode" data-highlighter="shiki" data-ext="plsql" data-title="plsql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">appendonly yes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-redis-çš„ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©-ç¼“å­˜ä¸‰å…„å¼Ÿ" tabindex="-1"><a class="header-anchor" href="#_6-redis-çš„ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©-ç¼“å­˜ä¸‰å…„å¼Ÿ"><span>6. Redis çš„ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©ï¼ˆç¼“å­˜ä¸‰å…„å¼Ÿï¼‰</span></a></h3><p><strong>ç¼“å­˜ç©¿é€</strong>ï¼šç¼“å­˜ã€æ•°æ®åº“ä¸­éƒ½æ²¡æœ‰æ‰€æŸ¥è¯¢çš„æ•°æ®ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šæŸä¸ªé»‘å®¢æ•…æ„åˆ¶é€ ä¸€äº›éæ³•çš„ key å‘èµ·å¤§é‡è¯·æ±‚ï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚è½åˆ°æ•°æ®åº“ï¼Œç»“æœæ•°æ®åº“ä¸Šä¹Ÿæ²¡æœ‰æŸ¥åˆ°å¯¹åº”çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™äº›è¯·æ±‚æœ€ç»ˆéƒ½è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå¯¹æ•°æ®åº“é€ æˆäº†å·¨å¤§çš„å‹åŠ›ã€‚</p><p>è§£å†³ï¼šå¯ä»¥é€šè¿‡ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥å¿«é€Ÿåˆ¤æ–­è¯·æ±‚çš„ Key æ˜¯å¦åˆæ³•ï¼Œé¿å…æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ã€‚</p><p><strong>ç¼“å­˜å‡»ç©¿</strong>ï¼šè¯·æ±‚çš„ key å¯¹åº”çš„æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œè¯¥æ•°æ®å­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œä½†ä¸å­˜åœ¨äºç¼“å­˜ä¸­ï¼ˆé€šå¸¸æ˜¯å› ä¸ºç¼“å­˜ä¸­çš„é‚£ä»½æ•°æ®å·²ç»è¿‡æœŸï¼‰ ã€‚è¿™å°±å¯èƒ½ä¼šå¯¼è‡´ç¬æ—¶å¤§é‡çš„è¯·æ±‚ç›´æ¥æ‰“åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå¯¹æ•°æ®åº“é€ æˆäº†å·¨å¤§çš„å‹åŠ›ï¼Œå¯èƒ½ç›´æ¥å°±è¢«è¿™ä¹ˆå¤šè¯·æ±‚å¼„å®•æœºäº†ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šç§’æ€è¿›è¡Œè¿‡ç¨‹ä¸­ï¼Œç¼“å­˜ä¸­çš„æŸä¸ªç§’æ€å•†å“çš„æ•°æ®çªç„¶è¿‡æœŸï¼Œè¿™å°±å¯¼è‡´ç¬æ—¶å¤§é‡å¯¹è¯¥å•†å“çš„è¯·æ±‚ç›´æ¥è½åˆ°æ•°æ®åº“ä¸Šï¼Œå¯¹æ•°æ®åº“é€ æˆäº†å·¨å¤§çš„å‹åŠ›ã€‚</p><p>è§£å†³ï¼š</p><ul><li><strong>æ°¸ä¸è¿‡æœŸ</strong>ï¼ˆä¸æ¨èï¼‰ï¼šè®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸæˆ–è€…è¿‡æœŸæ—¶é—´æ¯”è¾ƒé•¿ã€‚</li><li><strong>æå‰é¢„çƒ­</strong>ï¼ˆæ¨èï¼‰ï¼šé’ˆå¯¹çƒ­ç‚¹æ•°æ®æå‰é¢„çƒ­ï¼Œå°†å…¶å­˜å…¥ç¼“å­˜ä¸­å¹¶è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´æ¯”å¦‚ç§’æ€åœºæ™¯ä¸‹çš„æ•°æ®åœ¨ç§’æ€ç»“æŸä¹‹å‰ä¸è¿‡æœŸã€‚</li><li><strong>åŠ é”</strong>ï¼ˆçœ‹æƒ…å†µï¼‰ï¼šåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡è®¾ç½®äº’æ–¥é”ç¡®ä¿åªæœ‰ä¸€ä¸ªè¯·æ±‚å»æŸ¥è¯¢æ•°æ®åº“å¹¶æ›´æ–°ç¼“å­˜ã€‚</li></ul><p><strong>ç¼“å­˜é›ªå´©</strong>ï¼šç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚éƒ½ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå¯¹æ•°æ®åº“é€ æˆäº†å·¨å¤§çš„å‹åŠ›ã€‚ è¿™å°±å¥½æ¯”é›ªå´©ä¸€æ ·ï¼Œæ‘§æ¯æ‹‰æœ½ä¹‹åŠ¿ï¼Œæ•°æ®åº“çš„å‹åŠ›å¯æƒ³è€ŒçŸ¥ï¼Œå¯èƒ½ç›´æ¥å°±è¢«è¿™ä¹ˆå¤šè¯·æ±‚å¼„å®•æœºäº†ã€‚å¦å¤–ï¼Œç¼“å­˜æœåŠ¡å®•æœºä¹Ÿä¼šå¯¼è‡´ç¼“å­˜é›ªå´©ç°è±¡ï¼Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚éƒ½è½åˆ°äº†æ•°æ®åº“ä¸Šã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šæ•°æ®åº“ä¸­çš„å¤§é‡æ•°æ®åœ¨åŒä¸€æ—¶é—´è¿‡æœŸï¼Œè¿™ä¸ªæ—¶å€™çªç„¶æœ‰å¤§é‡çš„è¯·æ±‚éœ€è¦è®¿é—®è¿™äº›è¿‡æœŸçš„æ•°æ®ã€‚è¿™å°±å¯¼è‡´å¤§é‡çš„è¯·æ±‚ç›´æ¥è½åˆ°æ•°æ®åº“ä¸Šï¼Œå¯¹æ•°æ®åº“é€ æˆäº†å·¨å¤§çš„å‹åŠ›ã€‚</p><p>è§£å†³ï¼š</p><ul><li>è®¾ç½®éšæœºå¤±æ•ˆæ—¶é—´ï¼ˆå¯é€‰ï¼‰ï¼šä¸ºç¼“å­˜è®¾ç½®éšæœºçš„å¤±æ•ˆæ—¶é—´ï¼Œä¾‹å¦‚åœ¨å›ºå®šè¿‡æœŸæ—¶é—´çš„åŸºç¡€ä¸ŠåŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œè¿™æ ·å¯ä»¥é¿å…å¤§é‡ç¼“å­˜åŒæ—¶åˆ°æœŸï¼Œä»è€Œå‡å°‘ç¼“å­˜é›ªå´©çš„é£é™©ã€‚</li><li>æå‰é¢„çƒ­ï¼ˆæ¨èï¼‰ï¼šé’ˆå¯¹çƒ­ç‚¹æ•°æ®æå‰é¢„çƒ­ï¼Œå°†å…¶å­˜å…¥ç¼“å­˜ä¸­å¹¶è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´æ¯”å¦‚ç§’æ€åœºæ™¯ä¸‹çš„æ•°æ®åœ¨ç§’æ€ç»“æŸä¹‹å‰ä¸è¿‡æœŸã€‚</li><li>æŒä¹…ç¼“å­˜ç­–ç•¥ï¼ˆçœ‹æƒ…å†µï¼‰ï¼šè™½ç„¶ä¸€èˆ¬ä¸æ¨èè®¾ç½®ç¼“å­˜æ°¸ä¸è¿‡æœŸï¼Œä½†å¯¹äºæŸäº›å…³é”®æ€§å’Œå˜åŒ–ä¸é¢‘ç¹çš„æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘è¿™ç§ç­–ç•¥ã€‚</li></ul><h3 id="_7-redis-çš„å“¨å…µé›†ç¾¤-redis-sentinel" tabindex="-1"><a class="header-anchor" href="#_7-redis-çš„å“¨å…µé›†ç¾¤-redis-sentinel"><span>7. Redis çš„å“¨å…µé›†ç¾¤ï¼ˆRedis Sentinelï¼‰</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324609.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>Redis çš„å“¨å…µé›†ç¾¤ä¸»è¦ç”¨äºå®ç°é«˜å¯ç”¨æ€§ï¼Œç›‘æ§ä¸»ã€ä»èŠ‚ç‚¹çš„çŠ¶æ€å˜åŒ–ï¼Œå¹¶åœ¨ä¸»èŠ‚ç‚¹å¤±æ•ˆæ—¶è‡ªåŠ¨å°†ä»èŠ‚ç‚¹å‡çº§ä¸ºä¸»èŠ‚ç‚¹ã€‚</p><p>å“¨å…µé›†ç¾¤ç”±å¤šä¸ªå“¨å…µèŠ‚ç‚¹ç»„æˆï¼Œå·¥ä½œåŸç†æ˜¯å“¨å…µèŠ‚ç‚¹é€šè¿‡ç›¸äº’é€šä¿¡ï¼Œç›‘æµ‹ä¸»èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€ã€‚</p><p>å½“ä¸»èŠ‚ç‚¹å¤±æ•ˆæ—¶ï¼Œé€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶é€šçŸ¥å…¶ä»–ä»èŠ‚ç‚¹è¿›è¡Œåˆ‡æ¢ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p><h3 id="_8-redis-çš„åˆ†ç‰‡é›†ç¾¤-redis-cluster" tabindex="-1"><a class="header-anchor" href="#_8-redis-çš„åˆ†ç‰‡é›†ç¾¤-redis-cluster"><span>8. Redis çš„åˆ†ç‰‡é›†ç¾¤ï¼ˆRedis Clusterï¼‰</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324610.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¤šä¸ªä¸»ä»èŠ‚ç‚¹ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</p><p>Redis çš„åˆ†ç‰‡é›†ç¾¤ä¸»è¦ç”¨äºå®ç°æ•°æ®çš„æ¨ªå‘æ‰©å±•ï¼Œå°†æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œ</p><p>æé«˜ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›å’Œå­˜å‚¨èƒ½åŠ›ã€‚åˆ†ç‰‡é›†ç¾¤ç”±å¤šä¸ªä¸»ä»èŠ‚ç‚¹ç»„æˆï¼Œæ ¹æ® Key ç»è¿‡å“ˆå¸Œç®—</p><p>æ³•æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£å­˜å‚¨å’Œå¤„ç†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå·¥ä½œåŸç†æ˜¯é€šè¿‡ä¸€</p><p>è‡´æ€§å“ˆå¸Œç®—æ³•å°†æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œå®ç°æ•°æ®çš„å‡è¡¡å­˜å‚¨å’ŒæŸ¥</p><p>è¯¢ã€‚</p><h3 id="_9-redis-æˆ–-elasticsearch-å’Œ-mysql-å¦‚ä½•ä¿æŒæ•°æ®ä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#_9-redis-æˆ–-elasticsearch-å’Œ-mysql-å¦‚ä½•ä¿æŒæ•°æ®ä¸€è‡´æ€§"><span>9. Redisï¼ˆæˆ– ElasticSearchï¼‰å’Œ MySQL å¦‚ä½•ä¿æŒæ•°æ®ä¸€è‡´æ€§</span></a></h3><ul><li>åŒå†™ | å¼‚æ­¥é˜Ÿåˆ— | Canal æ–¹æ¡ˆ</li></ul><ol><li>åŒå†™ï¼šæ¯æ¬¡å†™å…¥æ“ä½œåŒæ—¶å°†æ•°æ®å†™å…¥ Elasticsearch å’Œ MySQLï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼Œä½†å¯èƒ½å¢åŠ å†™å»¶è¿Ÿå’Œå¤æ‚æ€§ã€‚</li><li>å¼‚æ­¥é˜Ÿåˆ—ï¼šå°†å†™å…¥æ“ä½œè¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œåå°ä»»åŠ¡å¼‚æ­¥åœ°å°†æ•°æ®å†™å…¥Elasticsearch å’Œ MySQLï¼Œæé«˜å†™å…¥æ€§èƒ½ï¼Œä½†å¯èƒ½å¯¼è‡´ä¸€å®šçš„æ•°æ®ä¸ä¸€è‡´æ€§ã€‚</li><li>Canal æ–¹æ¡ˆï¼šä½¿ç”¨ Canal å·¥å…·è®¢é˜… MySQL çš„ binlog æ—¥å¿—ï¼Œå®æ—¶å°†æ•°æ®åŒæ­¥åˆ° Elasticsearchï¼Œå®ç°æ•°æ®çš„å®æ—¶å¢é‡åŒæ­¥ï¼Œä½†éœ€è¦é¢å¤–çš„å·¥å…·å’Œé…ç½®ã€‚</li></ol><h3 id="_10-redis-åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_10-redis-åˆ†å¸ƒå¼é”"><span>10. <a href="https://javaguide.cn/distributed-system/distributed-lock.html" target="_blank" rel="noopener noreferrer">Redis åˆ†å¸ƒå¼é”</a></span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324611.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324612.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ul><li>åˆ†å¸ƒå¼é”çš„ç”¨é€”ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸‹ï¼Œä¸åŒçš„æœåŠ¡/å®¢æˆ·ç«¯é€šå¸¸è¿è¡Œåœ¨ç‹¬ç«‹çš„ JVM è¿›ç¨‹ä¸Šã€‚å¦‚æœå¤šä¸ª JVM è¿›ç¨‹å…±äº«åŒä¸€ä»½èµ„æºçš„è¯ï¼Œä½¿ç”¨æœ¬åœ°é”å°±æ²¡åŠæ³•å®ç°èµ„æºçš„äº’æ–¥è®¿é—®äº†ã€‚</li><li>åˆ†å¸ƒå¼é”çš„åº”è¯¥å…·å¤‡çš„æ¡ä»¶ï¼šäº’æ–¥ã€é«˜å¯ç”¨ã€å¯é‡å…¥ã€é«˜æ€§èƒ½ã€éé˜»å¡ã€‚</li><li>åˆ†å¸ƒå¼é”çš„å¸¸è§å®ç°æ–¹å¼ï¼šå…³ç³»å‹æ•°æ®åº“æ¯”å¦‚ MySQLã€åˆ†å¸ƒå¼åè°ƒæœåŠ¡ ZooKeeperã€åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ç³»ç»Ÿæ¯”å¦‚ Redis ã€Etcd ã€‚</li></ul><h3 id="_11-redisson-æ˜¯ä»€ä¹ˆ-æ€ä¹ˆç”¨" tabindex="-1"><a class="header-anchor" href="#_11-redisson-æ˜¯ä»€ä¹ˆ-æ€ä¹ˆç”¨"><span>11. Redisson æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆç”¨</span></a></h3><ul><li>redis å®¢æˆ·ç«¯ api ä¾èµ– é…ç½® æ³¨è§£/å¯¹è±¡</li></ul><p>æœ€ç®€å›ç­”ï¼šRedisson æ˜¯ä¸€ä¸ª Java çš„ Redis å®¢æˆ·ç«¯ï¼Œæä¾›ä¸°å¯Œçš„ API å’ŒåŠŸèƒ½ï¼Œç”¨äº</p><p>å°è£…åˆ†å¸ƒå¼æ“ä½œå’Œå¹¶å‘æ§åˆ¶ã€‚åœ¨ Spring Boot ä¸­ä½¿ç”¨ Redissonï¼Œé¦–å…ˆæ·»åŠ  Redisson</p><p>çš„ä¾èµ–ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½® Redisson è¿æ¥ä¿¡æ¯ï¼Œæ¥ç€é€šè¿‡@Autowired æ³¨è§£</p><p>æˆ–æ‰‹åŠ¨åˆ›å»º RedissonClient å¯¹è±¡ã€‚æœ€åï¼Œåˆ©ç”¨ RedissonClient å¯¹è±¡å¯ä»¥ä½¿ç”¨å„ç§</p><p>åŠŸèƒ½ï¼Œå¦‚åˆ†å¸ƒå¼é”ã€åˆ†å¸ƒå¼é›†åˆç­‰ï¼Œä¸ Redis è¿›è¡Œäº¤äº’ã€‚</p><h3 id="_12-redisson-çœ‹é—¨ç‹—æœºåˆ¶çš„åŸç†" tabindex="-1"><a class="header-anchor" href="#_12-redisson-çœ‹é—¨ç‹—æœºåˆ¶çš„åŸç†"><span>12. Redisson çœ‹é—¨ç‹—æœºåˆ¶çš„åŸç†</span></a></h3><ul><li>å®šæ—¶ç»­æœŸé”çš„è¿‡æœŸæ—¶é—´</li></ul><p>æœ€ç®€å›ç­”ï¼šRedisson çš„çœ‹é—¨ç‹—æœºåˆ¶é€šè¿‡å®šæ—¶ç»­æœŸé”çš„è¿‡æœŸæ—¶é—´ï¼Œä¿è¯åœ¨ä¸šåŠ¡æ‰§è¡ŒæœŸ</p><p>é—´é”ä¸ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚å®ƒè§£å†³äº†åˆ†å¸ƒå¼ç¯å¢ƒä¸‹é”è¿‡æœŸå¯¼è‡´çš„èµ„æºç«äº‰é—®é¢˜ï¼Œç¡®ä¿ä¸š</p><p>åŠ¡èƒ½å¤Ÿå®Œæˆã€‚ç»­æœŸæ˜¯çœ‹é—¨ç‹—æœºåˆ¶çš„æ ¸å¿ƒï¼Œå®ƒé€šè¿‡å®šæ—¶æ›´æ–°é”çš„è¿‡æœŸæ—¶é—´æ¥å®ç°é”çš„</p><p>æŒä¹…æ€§ï¼Œä»¥é˜²æ­¢é”è¿‡æœŸå¹¶è¢«å…¶ä»–å®ä¾‹è·å¾—ã€‚</p><h3 id="_13-redis-bigkey-å¤§key" tabindex="-1"><a class="header-anchor" href="#_13-redis-bigkey-å¤§key"><span>13. Redis bigkeyï¼ˆå¤§keyï¼‰</span></a></h3><ul><li>å¤§é‡ key åŒæ—¶è¿‡æœŸ | éšæœºè¿‡æœŸ lazy free</li></ul><p>ä»€ä¹ˆæ˜¯ bigkeyï¼Ÿ</p><p>å½“ Redis ä¸­å­˜åœ¨å¤§é‡ key åœ¨åŒä¸€æ—¶é—´ç‚¹é›†ä¸­è¿‡æœŸæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><strong>è¯·æ±‚å»¶è¿Ÿå¢åŠ ï¼š</strong> Redis åœ¨å¤„ç†è¿‡æœŸ key æ—¶éœ€è¦æ¶ˆè€— CPU èµ„æºï¼Œå¦‚æœè¿‡æœŸ key æ•°é‡åºå¤§ï¼Œä¼šå¯¼è‡´ Redis å®ä¾‹çš„ CPU å ç”¨ç‡å‡é«˜ï¼Œè¿›è€Œå½±å“å…¶ä»–è¯·æ±‚çš„å¤„ç†é€Ÿåº¦ï¼Œé€ æˆå»¶è¿Ÿå¢åŠ ã€‚</li><li><strong>å†…å­˜å ç”¨è¿‡é«˜ï¼š</strong> è¿‡æœŸçš„ key è™½ç„¶å·²ç»å¤±æ•ˆï¼Œä½†åœ¨ Redis çœŸæ­£åˆ é™¤å®ƒä»¬ä¹‹å‰ï¼Œä»ç„¶ä¼šå ç”¨å†…å­˜ç©ºé—´ã€‚å¦‚æœè¿‡æœŸ key æ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œç”šè‡³å¼•å‘å†…å­˜æº¢å‡ºã€‚</li></ul><p>å¦‚ä½•è§£å†³ bigkeyï¼Ÿ</p><ol><li><strong>å°½é‡é¿å… key é›†ä¸­è¿‡æœŸ</strong>ï¼š åœ¨è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´æ—¶å°½é‡éšæœºä¸€ç‚¹ã€‚</li><li><strong>å¼€å¯ lazy free æœºåˆ¶</strong>ï¼šä¿®æ”¹ <code>redis.conf</code> é…ç½®æ–‡ä»¶ï¼Œå°† <code>lazyfree-lazy-expire</code> å‚æ•°è®¾ç½®ä¸º <code>yes</code>ï¼Œå³å¯å¼€å¯ lazy free æœºåˆ¶ã€‚å¼€å¯ lazy free æœºåˆ¶åï¼ŒRedis ä¼šåœ¨åå°å¼‚æ­¥åˆ é™¤è¿‡æœŸçš„ keyï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„è¿è¡Œï¼Œä»è€Œé™ä½å¯¹ Redis æ€§èƒ½çš„å½±å“ã€‚</li></ol><h3 id="_14-redis-hotkey-çƒ­key" tabindex="-1"><a class="header-anchor" href="#_14-redis-hotkey-çƒ­key"><span>14. Redis hotkeyï¼ˆçƒ­Keyï¼‰</span></a></h3><ul><li>key çš„è®¿é—®æ¬¡æ•°å¤š | ä¸»ä»è¯»å†™åˆ†ç¦» é›†ç¾¤ äºŒçº§ç¼“å­˜</li></ul><p>ä»€ä¹ˆæ˜¯ hotkeyï¼Ÿ</p><p>å¦‚æœä¸€ä¸ª key çš„è®¿é—®æ¬¡æ•°æ¯”è¾ƒå¤šä¸”æ˜æ˜¾å¤šäºå…¶ä»– key çš„è¯ï¼Œé‚£è¿™ä¸ª key å°±å¯ä»¥çœ‹ä½œæ˜¯ <strong>hotkeyï¼ˆçƒ­ Keyï¼‰</strong>ã€‚ä¾‹å¦‚åœ¨ Redis å®ä¾‹çš„æ¯ç§’å¤„ç†è¯·æ±‚è¾¾åˆ° 5000 æ¬¡ï¼Œè€Œå…¶ä¸­æŸä¸ª key çš„æ¯ç§’è®¿é—®é‡å°±é«˜è¾¾ 2000 æ¬¡ï¼Œé‚£è¿™ä¸ª key å°±å¯ä»¥çœ‹ä½œæ˜¯ hotkeyã€‚</p><p>hotkey å‡ºç°çš„åŸå› ä¸»è¦æ˜¯æŸä¸ªçƒ­ç‚¹æ•°æ®è®¿é—®é‡æš´å¢ï¼Œå¦‚é‡å¤§çš„çƒ­æœäº‹ä»¶ã€å‚ä¸ç§’æ€çš„å•†å“ã€‚</p><p>å¦‚ä½•è§£å†³ hotkeyï¼Ÿ</p><p>hotkey çš„å¸¸è§å¤„ç†ä»¥åŠä¼˜åŒ–åŠæ³•å¦‚ä¸‹ï¼ˆè¿™äº›æ–¹æ³•å¯ä»¥é…åˆèµ·æ¥ä½¿ç”¨ï¼‰ï¼š</p><ul><li><strong>è¯»å†™åˆ†ç¦»</strong>ï¼šä¸»èŠ‚ç‚¹å¤„ç†å†™è¯·æ±‚ï¼Œä»èŠ‚ç‚¹å¤„ç†è¯»è¯·æ±‚ã€‚</li><li><strong>Redis Cluster</strong>ï¼šå°†çƒ­ç‚¹æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨å¤šä¸ª Redis èŠ‚ç‚¹ä¸Šã€‚</li><li><strong>äºŒçº§ç¼“å­˜</strong>ï¼šhotkey é‡‡ç”¨äºŒçº§ç¼“å­˜çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œå°† hotkey å­˜æ”¾ä¸€ä»½åˆ° JVM æœ¬åœ°å†…å­˜ä¸­ï¼ˆå¯ä»¥ç”¨ Caffeineï¼‰ã€‚</li></ul><h2 id="ä¸ƒã€å¾®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€å¾®æœåŠ¡"><span>ä¸ƒã€å¾®æœåŠ¡</span></a></h2><h3 id="_1-spring" tabindex="-1"><a class="header-anchor" href="#_1-spring"><span>1. Spring</span></a></h3><p>Spring æ˜¯ä¸€æ¬¾å¼€æºçš„è½»é‡çº§ JavaEE å¼€å‘æ¡†æ¶ï¼Œæ—¨åœ¨æé«˜å¼€å‘äººå‘˜çš„å¼€å‘æ•ˆç‡ä»¥åŠç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</p><p>æˆ‘ä»¬ä¸€èˆ¬è¯´ Spring æ¡†æ¶æŒ‡çš„éƒ½æ˜¯ Spring Frameworkï¼Œå®ƒæ˜¯å¾ˆå¤šæ¨¡å—çš„é›†åˆï¼Œä½¿ç”¨è¿™äº›æ¨¡å—å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ååŠ©æˆ‘ä»¬è¿›è¡Œå¼€å‘ï¼Œæ¯”å¦‚è¯´ Spring æ”¯æŒ IoCï¼ˆInversion of Control:æ§åˆ¶åè½¬ï¼‰ å’Œ AOP(Aspect-Oriented Programming:é¢å‘åˆ‡é¢ç¼–ç¨‹)ã€å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ•°æ®åº“è¿›è¡Œè®¿é—®ã€å¯ä»¥å¾ˆæ–¹ä¾¿åœ°é›†æˆç¬¬ä¸‰æ–¹ç»„ä»¶ï¼ˆç”µå­é‚®ä»¶ï¼Œä»»åŠ¡ï¼Œè°ƒåº¦ï¼Œç¼“å­˜ç­‰ç­‰ï¼‰ã€å¯¹å•å…ƒæµ‹è¯•æ”¯æŒæ¯”è¾ƒå¥½ã€æ”¯æŒ RESTful Java åº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚</p><h3 id="_2-spring-ioc" tabindex="-1"><a class="header-anchor" href="#_2-spring-ioc"><span>2. Spring IOC</span></a></h3><ul><li>æ§åˆ¶åè½¬ | å®¹å™¨æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»</li></ul><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324613.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>IOC (Inversion of Controlï¼Œæ§åˆ¶åè½¬) æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œé€šè¿‡å®ƒï¼Œå®¹å™¨æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ï¼Œä»è€Œå®ç°å¯¹è±¡ä¹‹é—´çš„è§£è€¦å’Œçµæ´»æ€§çš„æå‡ã€‚ åœ¨å®é™…é¡¹ç›®ä¸­ä¸€ä¸ª Service ç±»å¯èƒ½ä¾èµ–äº†å¾ˆå¤šå…¶ä»–çš„ç±»ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–è¿™ä¸ª Serviceï¼Œä½ å¯èƒ½è¦æ¯æ¬¡éƒ½è¦ææ¸…è¿™ä¸ª Service æ‰€æœ‰åº•å±‚ç±»çš„æ„é€ å‡½æ•°ï¼Œè¿™å¯èƒ½ä¼šæŠŠäººé€¼ç–¯ã€‚å¦‚æœåˆ©ç”¨ IoC çš„è¯ï¼Œä½ åªéœ€è¦é…ç½®å¥½ï¼Œç„¶ååœ¨éœ€è¦çš„åœ°æ–¹å¼•ç”¨å°±è¡Œäº†ï¼Œè¿™å¤§å¤§å¢åŠ äº†é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ä¸”é™ä½äº†å¼€å‘éš¾åº¦ã€‚</p><h3 id="_3-spring-aop" tabindex="-1"><a class="header-anchor" href="#_3-spring-aop"><span>3. Spring AOP</span></a></h3><ul><li>é¢å‘åˆ‡é¢ç¼–ç¨‹ | åŠ¨æ€ä»£ç†ï¼š JDK å®ç°æ¥å£ CGLIB æ²¡æœ‰å®ç°æ¥å£ | AOP æœ¯è¯­</li></ul><p>AOP(Aspect-Oriented Programmingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹)èƒ½å¤Ÿå°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»ï¼ˆä¾‹å¦‚äº‹åŠ¡å¤„ç†ã€æ—¥å¿—ç®¡ç†ã€æƒé™æ§åˆ¶ç­‰ï¼‰å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ‹“å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>AOPçš„åº•å±‚æœºåˆ¶æ˜¯åŠ¨æ€ä»£ç†ï¼Œå®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼šJDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†</p><p>å¦‚æœæƒ³è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼ˆSpringåœ¨è¿è¡Œæ—¶åˆ›å»ºäº†ä¸€ä¸ªå®ç°äº†ç›®æ ‡</p><p>å¯¹è±¡æ‰€æœ‰æ¥å£çš„æ–°å¯¹è±¡ï¼‰ã€‚</p><p>å¦‚æœæƒ³è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°æ¥å£ï¼Œä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†ï¼ˆSpringåœ¨è¿è¡Œæ—¶ä½¿ç”¨CGLIBåº“ç”Ÿæˆ</p><p>ç›®æ ‡ç±»çš„å­ç±»å¯¹è±¡ï¼‰ã€‚</p><table><thead><tr><th>AOP æœ¯è¯­</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>ç›®æ ‡(Target)</td><td>è¢«é€šçŸ¥çš„å¯¹è±¡</td></tr><tr><td>ä»£ç†(Proxy)</td><td>å‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„ä»£ç†å¯¹è±¡</td></tr><tr><td>è¿æ¥ç‚¹(JoinPoint)</td><td>ç›®æ ‡å¯¹è±¡çš„æ‰€å±ç±»ä¸­ï¼Œå®šä¹‰çš„æ‰€æœ‰æ–¹æ³•å‡ä¸ºè¿æ¥ç‚¹</td></tr><tr><td>åˆ‡å…¥ç‚¹(Pointcut)</td><td>è¢«åˆ‡é¢æ‹¦æˆª / å¢å¼ºçš„è¿æ¥ç‚¹ï¼ˆåˆ‡å…¥ç‚¹ä¸€å®šæ˜¯è¿æ¥ç‚¹ï¼Œè¿æ¥ç‚¹ä¸ä¸€å®šæ˜¯åˆ‡å…¥ç‚¹ï¼‰</td></tr><tr><td>é€šçŸ¥(Advice)</td><td>å¢å¼ºçš„é€»è¾‘ / ä»£ç ï¼Œå³æ‹¦æˆªåˆ°ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¹‹åè¦åšçš„äº‹æƒ…</td></tr><tr><td>åˆ‡é¢(Aspect)</td><td>åˆ‡å…¥ç‚¹(Pointcut)+é€šçŸ¥(Advice)</td></tr><tr><td>Weaving(ç»‡å…¥)</td><td>å°†é€šçŸ¥åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡ï¼Œè¿›è€Œç”Ÿæˆä»£ç†å¯¹è±¡çš„è¿‡ç¨‹åŠ¨ä½œ</td></tr></tbody></table><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.aop.service.UserServiceImpl.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;pointcut()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> before</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> methodName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹æ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> methodName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;æ–¹æ³•&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;pointcut()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> returning</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;result&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> afterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•è¿”å›ç»“æœï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">After</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;pointcut()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> after</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> methodName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(methodName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;æ–¹æ³•æ‰§è¡Œå®Œæ¯•&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Around</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;pointcut()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> around</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> methodName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹æ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> methodName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;æ–¹æ³•&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•è¿”å›ç»“æœï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(methodName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;æ–¹æ³•æ‰§è¡Œå®Œæ¯•&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**åˆ‡ç‚¹è¡¨è¾¾å¼ï¼ˆPointcut Expressionï¼‰ï¼š**ç”¨äºæè¿°å“ªäº›æ–¹æ³•æ‰§è¡Œæ—¶åº”è¯¥è¢«å¢å¼ºã€‚</p><p>execution(* com.example.aop.service.UserServiceImpl.*(..))</p><ul><li><code>*</code>ï¼Œè¡¨ç¤ºåŒ¹é…ä»»æ„è¿”å›ç±»å‹çš„æ–¹æ³•</li><li><code>com.example.aop.service.UserServiceImpl</code> ï¼Œè¡¨ç¤ºåŒ¹é…UserServiceImplç±»é‡Œçš„æ–¹æ³•</li><li><code>*</code>ï¼Œè¡¨ç¤ºåŒ¹é…ç±»é‡Œçš„æ‰€æœ‰æ–¹æ³•</li><li><code>(..)</code>ï¼Œè¡¨ç¤ºåŒ¹é…ä»»æ„è¾“å…¥å‚æ•°çš„æ–¹æ³•</li></ul><p>**é€šçŸ¥(Advice)ï¼š**å¢å¼ºçš„é€»è¾‘ / ä»£ç </p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324614.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ul><li>å‰ç½®é€šçŸ¥ï¼ˆ@Beforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œã€‚ Beforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œã€‚</li><li>åç½®é€šçŸ¥ï¼ˆ@Afterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚</li><li>è¿”å›åé€šçŸ¥ï¼ˆ@AfterReturningï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œï¼Œå¯ä»¥è·å–æ–¹æ³•è¿”å›å€¼ç­‰ä¿¡æ¯ã€‚</li><li>ç¯ç»•é€šçŸ¥ï¼ˆ@Aroundï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åæ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ã€‚</li><li>å¼‚å¸¸é€šçŸ¥ï¼ˆ@AfterThrowingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œï¼Œå¯ä»¥è·å–å¼‚å¸¸ä¿¡æ¯ã€‚</li></ul><h3 id="_4-å£°æ˜æˆ-bean-æ³¨è§£çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_4-å£°æ˜æˆ-bean-æ³¨è§£çš„æ–¹å¼"><span>4. å£°æ˜æˆ Bean æ³¨è§£çš„æ–¹å¼</span></a></h3><ul><li><p>æ³¨è§£åˆ†å±‚è®¨è®º</p></li><li><p><code>@Component</code>ï¼šé€šç”¨çš„æ³¨è§£ï¼Œå¯æ ‡æ³¨ä»»æ„ç±»ä¸º <code>Spring</code> ç»„ä»¶ã€‚å¦‚æœä¸€ä¸ª Bean ä¸çŸ¥é“å±äºå“ªä¸ªå±‚ï¼Œå¯ä»¥ä½¿ç”¨<code>@Component</code> æ³¨è§£æ ‡æ³¨ã€‚</p></li><li><p><code>@Repository</code> : å¯¹åº”æŒä¹…å±‚å³ Dao å±‚ï¼Œä¸»è¦ç”¨äºæ•°æ®åº“ç›¸å…³æ“ä½œã€‚</p></li><li><p><code>@Service</code> : å¯¹åº”æœåŠ¡å±‚ï¼Œä¸»è¦æ¶‰åŠä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ° Dao å±‚ã€‚</p></li><li><p><code>@Controller</code> : å¯¹åº” Spring MVC æ§åˆ¶å±‚ï¼Œä¸»è¦ç”¨äºæ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ <code>Service</code> å±‚è¿”å›æ•°æ®ç»™å‰ç«¯é¡µé¢ã€‚</p></li><li><p><code>@Configuration</code> å’Œ <code>@Bean</code> ç»„åˆä½¿ç”¨ : <code>@Configuration</code> æ ‡è®°ä¸€ä¸ªç±»ä¸ºé…ç½®ç±»ï¼Œç„¶ååœ¨è¯¥ç±»ä¸­ä½¿ç”¨ <code>@Bean</code> æ–¹æ³•æ¥å®šä¹‰ Beanã€‚</p></li></ul><h3 id="_5-component-å’Œ-bean-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_5-component-å’Œ-bean-åŒºåˆ«"><span>5. @Component å’Œ @Bean åŒºåˆ«</span></a></h3><ul><li><p><code>@Component</code> ä½œç”¨äºç±» |<code>@Bean</code> ä½œç”¨äºæ–¹æ³•ï¼Œè‡ªå®šä¹‰æ€§æ›´å¼ºï¼Œä¸‰æ–¹åº“ä¸­çš„ç±»</p></li><li><p><code>@Component</code> æ³¨è§£ä½œç”¨äºç±»ï¼Œè€Œ<code>@Bean</code>æ³¨è§£ä½œç”¨äºæ–¹æ³•ã€‚</p></li><li><p><code>@Component</code>é€šå¸¸æ˜¯é€šè¿‡ç±»è·¯å¾„æ‰«ææ¥è‡ªåŠ¨ä¾¦æµ‹ä»¥åŠè‡ªåŠ¨è£…é…åˆ° Spring å®¹å™¨ä¸­ï¼ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@ComponentScan</code> æ³¨è§£å®šä¹‰è¦æ‰«æçš„è·¯å¾„ä»ä¸­æ‰¾å‡ºæ ‡è¯†äº†éœ€è¦è£…é…çš„ç±»è‡ªåŠ¨è£…é…åˆ° Spring çš„ bean å®¹å™¨ä¸­ï¼‰ã€‚|<code>@Bean</code> æ³¨è§£é€šå¸¸æ˜¯æˆ‘ä»¬åœ¨æ ‡æœ‰è¯¥æ³¨è§£çš„æ–¹æ³•ä¸­å®šä¹‰äº§ç”Ÿè¿™ä¸ª bean,<code>@Bean</code>å‘Šè¯‰äº† Spring è¿™æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œå½“æˆ‘éœ€è¦ç”¨å®ƒçš„æ—¶å€™è¿˜ç»™æˆ‘ã€‚</p></li><li><p><code>@Bean</code> æ³¨è§£æ¯” <code>@Component</code> æ³¨è§£çš„è‡ªå®šä¹‰æ€§æ›´å¼ºï¼Œè€Œä¸”å¾ˆå¤šåœ°æ–¹æˆ‘ä»¬åªèƒ½é€šè¿‡ <code>@Bean</code> æ³¨è§£æ¥æ³¨å†Œ beanã€‚æ¯”å¦‚å½“æˆ‘ä»¬å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»éœ€è¦è£…é…åˆ° <code>Spring</code>å®¹å™¨æ—¶ï¼Œåˆ™åªèƒ½é€šè¿‡ <code>@Bean</code>æ¥å®ç°ã€‚</p></li></ul><h3 id="_6-autowired-å’Œ-resource-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-autowired-å’Œ-resource-çš„åŒºåˆ«"><span>6. @Autowired å’Œ @Resource çš„åŒºåˆ«</span></a></h3><ul><li><p><code>**@Autowired**</code> <strong>Spring æ³¨è§£ by ç±»å‹ ä½œç”¨èŒƒå›´å¤§ |</strong><code>**@Resource**</code> <strong>JDK æ³¨è§£ by åç§°</strong></p></li><li><p><code>**@Autowired**</code> <strong>æ˜¯</strong> <strong>Spring</strong> <strong>æä¾›çš„æ³¨è§£ï¼Œ</strong><code>**@Resource**</code> <strong>æ˜¯</strong> <strong>JDK</strong> <strong>æä¾›çš„æ³¨è§£ã€‚</strong></p></li><li><p><code>**Autowired**</code> <strong>é»˜è®¤çš„æ³¨å…¥æ–¹å¼ä¸º</strong><code>**byType**</code><strong>ï¼ˆæ ¹æ®<strong><strong>ç±»å‹</strong></strong>è¿›è¡ŒåŒ¹é…ï¼‰ï¼Œ</strong><code>**@Resource**</code><strong>é»˜è®¤æ³¨å…¥æ–¹å¼ä¸º</strong> <code>**byName**</code><strong>ï¼ˆæ ¹æ®<strong><strong>åç§°</strong></strong>è¿›è¡ŒåŒ¹é…ï¼‰ã€‚</strong></p></li><li><p><strong>å½“ä¸€ä¸ªæ¥å£å­˜åœ¨<strong><strong>å¤šä¸ªå®ç°ç±»</strong></strong>çš„æƒ…å†µä¸‹ï¼Œ</strong><code>**@Autowired**</code> <strong>å’Œ</strong><code>**@Resource**</code><strong>éƒ½éœ€è¦é€šè¿‡<strong><strong>åç§°</strong></strong>æ‰èƒ½æ­£ç¡®åŒ¹é…åˆ°å¯¹åº”çš„ Beanã€‚</strong><code>**Autowired**</code> <strong>å¯ä»¥é€šè¿‡</strong> <code>**@Qualifier**</code> <strong>æ³¨è§£æ¥æ˜¾å¼æŒ‡å®šåç§°ï¼Œ</strong><code>**@Resource**</code><strong>å¯ä»¥é€šè¿‡</strong> <code>**name**</code> <strong>å±æ€§****æ¥æ˜¾å¼æŒ‡å®šåç§°ã€‚</strong></p></li><li><p><code>**@Autowired**</code> <strong>æ”¯æŒåœ¨<strong><strong>æ„é€ å‡½æ•°ã€å‚æ•°ã€æ–¹æ³•ã€å­—æ®µ</strong></strong>ä¸Šä½¿ç”¨ã€‚</strong><code>**@Resource**</code> <strong>ä¸»è¦ç”¨äº<strong><strong>å­—æ®µå’Œæ–¹æ³•</strong></strong>ä¸Šçš„æ³¨å…¥ï¼Œä¸æ”¯æŒåœ¨<strong><strong>æ„é€ å‡½æ•°æˆ–å‚æ•°</strong></strong>ä¸Šä½¿ç”¨ã€‚</strong></p></li></ul><h3 id="_7-æ³¨å…¥-bean-çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_7-æ³¨å…¥-bean-çš„æ–¹å¼"><span>7. æ³¨å…¥ Bean çš„æ–¹å¼</span></a></h3><ul><li>æ„é€ å‡½æ•° setter æ³¨è§£</li></ul><p>ä¾èµ–æ³¨å…¥ (Dependency Injection, DI) çš„å¸¸è§æ–¹å¼ï¼š</p><ol><li>æ„é€ å‡½æ•°æ³¨å…¥ï¼šé€šè¿‡ç±»çš„æ„é€ å‡½æ•°æ¥æ³¨å…¥ä¾èµ–é¡¹ã€‚</li><li>Setter æ³¨å…¥ï¼šé€šè¿‡ç±»çš„ Setter æ–¹æ³•æ¥æ³¨å…¥ä¾èµ–é¡¹ã€‚</li><li>Fieldï¼ˆå­—æ®µï¼‰ æ³¨å…¥ï¼šç›´æ¥åœ¨ç±»çš„å­—æ®µä¸Šä½¿ç”¨æ³¨è§£ï¼ˆå¦‚ <code>@Autowired</code> æˆ– <code>@Resource</code>ï¼‰æ¥æ³¨å…¥ä¾èµ–é¡¹ã€‚</li></ol><h3 id="_8-spring-mvc-åŸç†" tabindex="-1"><a class="header-anchor" href="#_8-spring-mvc-åŸç†"><span>8. Spring MVC åŸç†</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324615.webp" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>â€¢ DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨ï¼Œè´Ÿè´£æ¥æ”¶è¯·æ±‚ã€åˆ†å‘ï¼Œå¹¶ç»™äºˆå®¢æˆ·ç«¯å“åº”ã€‚ â€¢ HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨ï¼Œæ ¹æ® URL å»åŒ¹é…æŸ¥æ‰¾èƒ½å¤„ç†çš„ Handler ï¼Œå¹¶ä¼šå°†è¯·æ±‚æ¶‰åŠåˆ°çš„æ‹¦æˆªå™¨å’Œ Handler ä¸€èµ·å°è£…ã€‚ â€¢ HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨ï¼Œæ ¹æ® HandlerMapping æ‰¾åˆ°çš„ Handler ï¼Œé€‚é…æ‰§è¡Œå¯¹åº”çš„ Handlerã€‚ â€¢ Handlerï¼šè¯·æ±‚å¤„ç†å™¨ï¼Œå¤„ç†å®é™…è¯·æ±‚çš„å¤„ç†å™¨ã€‚ â€¢ ViewResolverï¼šè§†å›¾è§£æå™¨ï¼Œæ ¹æ® Handler è¿”å›çš„é€»è¾‘è§†å›¾ / è§†å›¾ï¼Œè§£æå¹¶æ¸²æŸ“çœŸæ­£çš„è§†å›¾ï¼Œå¹¶ä¼ é€’ç»™ DispatcherServlet å“åº”å®¢æˆ·ç«¯ã€‚</p><ol><li>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å‘é€è¯·æ±‚ï¼Œ DispatcherServlet å‰ç«¯æ§åˆ¶å™¨ æ‹¦æˆªè¯·æ±‚ã€‚</li><li>DispatcherServlet æ ¹æ®è¯·æ±‚ä¿¡æ¯è°ƒç”¨ HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨ã€‚</li><li>HandlerMapping æ ¹æ® URL å»åŒ¹é…æŸ¥æ‰¾èƒ½å¤„ç†çš„ Handler å¤„ç†å™¨ï¼ˆController æ§åˆ¶å™¨ï¼‰ ï¼Œå¹¶ä¼šå°†è¯·æ±‚æ¶‰åŠåˆ°çš„æ‹¦æˆªå™¨å’Œ Handlerä¸€èµ·å°è£…ã€‚</li><li>DispatcherServlet è°ƒç”¨ HandlerAdapter å¤„ç†å™¨é€‚é…å™¨ã€‚</li><li>HandlerAdapter è¯·æ±‚æ‰§è¡Œ Handlerã€‚</li><li>Handler å®Œæˆå¯¹ç”¨æˆ·è¯·æ±‚çš„å¤„ç†åï¼Œä¼šè¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡ ç»™ HandlerAdapterï¼ŒModelAndView é¡¾åæ€ä¹‰ï¼ŒåŒ…å«äº†æ•°æ®æ¨¡å‹ä»¥åŠç›¸åº”çš„è§†å›¾ä¿¡æ¯ã€‚Model æ˜¯è¿”å›çš„æ•°æ®å¯¹è±¡ï¼ŒViewæ˜¯ä¸ªé€»è¾‘ä¸Šçš„ Viewã€‚</li><li>HandlerAdapter ä¼šè¿”å› ModelAndView å¯¹è±¡ç»™ DispatcherServletã€‚</li><li>HandlerAdapter è¯·æ±‚ ViewResolver è§†å›¾è§£æå™¨ï¼Œæ ¹æ®é€»è¾‘ View æŸ¥æ‰¾å®é™…çš„ Viewã€‚</li><li>ViewResolver è¿”å› View å¯¹è±¡ç»™ DispatcherServletã€‚</li><li>DispaterServlet æŠŠè¿”å›çš„ Model ä¼ ç»™ Viewï¼ˆæ¸²æŸ“è§†å›¾ï¼‰ã€‚</li><li>View è¢«è¿”å›ç»™ è¯·æ±‚è€…ï¼ˆæµè§ˆå™¨ï¼‰ã€‚</li></ol><h3 id="_9-springboot-ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#_9-springboot-ä¼˜ç‚¹"><span>9. SpringBoot ä¼˜ç‚¹</span></a></h3><ul><li><p>å†…åµŒæœåŠ¡å™¨ ç®€åŒ–é…ç½® è‡ªåŠ¨é…ç½® ç›‘æ§ç®¡ç†</p></li><li><p>ç‹¬ç«‹è¿è¡Œ Spring Boot ï¼Œå†…åµŒäº† servlet å®¹å™¨ï¼Œå¦‚ Tomcatã€Jetty ç­‰ï¼Œç°åœ¨ä¸å†éœ€è¦æ‰“æˆ war åŒ…éƒ¨ç½²åˆ°å®¹å™¨ä¸­ï¼ŒSpring Boot åªè¦æ‰“æˆä¸€ä¸ªå¯æ‰§è¡Œçš„ jar åŒ…å°±èƒ½ç‹¬ç«‹è¿è¡Œï¼Œæ‰€æœ‰çš„ä¾èµ–åŒ…éƒ½åœ¨ä¸€ä¸ª jar åŒ…å†…ã€‚</p></li><li><p>ç®€åŒ–é…ç½® spring-boot-starter-web å¯åŠ¨å™¨è‡ªåŠ¨ä¾èµ–å…¶ä»–ç»„ä»¶ï¼Œç®€å°‘äº†maven çš„é…ç½®ã€‚</p></li><li><p>è‡ªåŠ¨é…ç½® Spring Boot èƒ½æ ¹æ®å½“å‰ç±»è·¯å¾„ä¸‹çš„ç±»ã€jar åŒ…æ¥è‡ªåŠ¨é…ç½® beanï¼Œå¦‚æ·»åŠ ä¸€ä¸ª spring-boot-starter-web å¯åŠ¨å™¨å°±èƒ½æ‹¥æœ‰ web çš„åŠŸèƒ½ï¼Œæ— éœ€å…¶ä»–é…ç½®ã€‚</p></li><li><p>æ— ä»£ç ç”Ÿæˆå’Œ XML é…ç½®ï¼Œ Spring Boot é…ç½®è¿‡ç¨‹ä¸­æ— ä»£ç ç”Ÿæˆï¼Œä¹Ÿæ— éœ€ XMLé…ç½®æ–‡ä»¶å°±èƒ½å®Œæˆæ‰€æœ‰é…ç½®å·¥ä½œï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯å€ŸåŠ©äºæ¡ä»¶æ³¨è§£å®Œæˆçš„ï¼Œè¿™ä¹Ÿæ˜¯Spring4.x çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚</p></li><li><p>é¿å…å¤§é‡çš„ Maven å¯¼å…¥å’Œå„ç§ç‰ˆæœ¬å†²çª</p></li><li><p>åº”ç”¨ç›‘æ§ Spring Boot æä¾›ä¸€ç³»åˆ—ç«¯ç‚¹å¯ä»¥ç›‘æ§æœåŠ¡åŠåº”ç”¨ï¼Œåšå¥åº·æ£€æµ‹ã€‚</p></li></ul><h3 id="_10-springboot-è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#_10-springboot-è‡ªåŠ¨é…ç½®åŸç†"><span>10. <a href="https://javaguide.cn/system-design/framework/spring/spring-boot-auto-assembly-principles.html" target="_blank" rel="noopener noreferrer">SpringBoot è‡ªåŠ¨é…ç½®åŸç†</a></span></a></h3><p>Spring Boot é€šè¿‡@EnableAutoConfigurationå¼€å¯è‡ªåŠ¨è£…é…ï¼Œé€šè¿‡ SpringFactoriesLoader æœ€ç»ˆåŠ è½½META-INF/spring.factoriesä¸­çš„è‡ªåŠ¨é…ç½®ç±»å®ç°è‡ªåŠ¨è£…é…ï¼Œè‡ªåŠ¨é…ç½®ç±»å…¶å®å°±æ˜¯é€šè¿‡@ConditionalæŒ‰éœ€åŠ è½½çš„é…ç½®ç±»ï¼Œæƒ³è¦å…¶ç”Ÿæ•ˆå¿…é¡»å¼•å…¥spring-boot-starter-xxxåŒ…å®ç°èµ·æ­¥ä¾èµ–</p><p><strong>1. å¯åŠ¨ç±»ä¸æ³¨è§£ï¼š</strong></p><ul><li><p>Spring Bootåº”ç”¨é€šå¸¸ä»¥ä¸€ä¸ªå¸¦æœ‰ <code>@SpringBootApplication</code> æ³¨è§£çš„ä¸»å¯åŠ¨ç±»å¼€å§‹ã€‚è¿™ä¸ªæ³¨è§£å®é™…ä¸Šæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒåŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªé‡è¦æ³¨è§£ï¼š</p></li><li><ul><li><code>@Configuration</code>ï¼šè¡¨æ˜è¯¥ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨äºå®šä¹‰å„ç§Beanä»¥åŠé…ç½®ä¿¡æ¯ï¼Œç›¸å½“äºä¼ ç»ŸSpringé¡¹ç›®ä¸­çš„XMLé…ç½®æ–‡ä»¶çš„ä½œç”¨ã€‚</li><li><code>@EnableAutoConfiguration</code>ï¼šè¿™æ˜¯å®ç°è‡ªåŠ¨é…ç½®çš„å…³é”®æ³¨è§£ã€‚å®ƒä¼šè§¦å‘Spring Bootå»æŸ¥æ‰¾å¹¶åº”ç”¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</li><li><code>@ComponentScan</code>ï¼šç”¨äºæ‰«ææŒ‡å®šåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰å¸¦æœ‰ <code>@Component</code> æ³¨è§£ï¼ˆä»¥åŠå…¶è¡ç”Ÿæ³¨è§£ï¼Œå¦‚ <code>@Service</code>ã€<code>@Repository</code>ã€<code>@Controller</code> ç­‰ï¼‰çš„ç±»ï¼Œå°†å®ƒä»¬ä½œä¸ºSpringå®¹å™¨ä¸­çš„ç»„ä»¶è¿›è¡Œç®¡ç†ã€‚</li></ul></li></ul><p><strong>2. è‡ªåŠ¨é…ç½®ç±»æŸ¥æ‰¾ï¼š</strong></p><ul><li>å½“åº”ç”¨å¯åŠ¨æ—¶ï¼Œåœ¨ <code>@EnableAutoConfiguration</code> æ³¨è§£çš„ä½œç”¨ä¸‹ï¼ŒSpring Bootä¼šå»æŸ¥æ‰¾æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»ã€‚è¿™äº›è‡ªåŠ¨é…ç½®ç±»é€šå¸¸ä½äº <code>spring-boot-autoconfigure</code> é¡¹ç›®çš„ <code>META-INF/spring-boot-autoconfigure.properties</code> æ–‡ä»¶ä¸­å®šä¹‰çš„åŒ…è·¯å¾„ä¸‹ï¼Œä¾‹å¦‚ <code>org.springframework.boot.autoconfigure</code> åŠå…¶å­åŒ…ã€‚</li><li>è‡ªåŠ¨é…ç½®ç±»çš„å‘½åè§„èŒƒä¸€èˆ¬æ˜¯ <code>XXXAutoConfigure</code>ï¼Œæ¯”å¦‚ <code>DataSourceAutoConfigure</code> ç”¨äºè‡ªåŠ¨é…ç½®æ•°æ®æºã€‚</li></ul><p><strong>3. æ¡ä»¶æ³¨è§£åˆ¤æ–­ï¼š</strong></p><ul><li><p>æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸Šé€šå¸¸ä¼šå¸¦æœ‰ä¸€äº›æ¡ä»¶æ³¨è§£ï¼ˆConditional Annotationï¼‰ï¼Œè¿™äº›æ¡ä»¶æ³¨è§£ç”¨äºåˆ¤æ–­å½“å‰é¡¹ç›®çš„å®é™…æƒ…å†µæ˜¯å¦æ»¡è¶³è¯¥è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆçš„æ¡ä»¶ã€‚å¸¸è§çš„æ¡ä»¶æ³¨è§£æœ‰ï¼š</p></li><li><ul><li><code>@ConditionalOnClass</code>ï¼šå½“é¡¹ç›®ä¸­å­˜åœ¨æŒ‡å®šçš„ç±»æ—¶ï¼Œè¯¥è‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆã€‚ä¾‹å¦‚ï¼Œå¯¹äº <code>DataSourceAutoConfigure</code> é…ç½®ç±»ï¼Œå¯èƒ½ä¼šæœ‰ <code>@ConditionalOnClass({DataSource.class})</code> æ³¨è§£ï¼Œè¿™æ„å‘³ç€åªæœ‰å½“é¡¹ç›®ä¸­å¼•å…¥äº† <code>DataSource</code> ç±»ï¼ˆé€šå¸¸æ˜¯å¼•å…¥äº†æ•°æ®åº“é©±åŠ¨ä¾èµ–åæ‰ä¼šæœ‰è¿™ä¸ªç±»ï¼‰æ—¶ï¼Œè¯¥è‡ªåŠ¨é…ç½®ç±»æ‰ä¼šå¯¹æ•°æ®æºè¿›è¡Œè‡ªåŠ¨é…ç½®ã€‚</li><li><code>@ConditionalOnMissingClass</code>ï¼šä¸ <code>@ConditionalOnClass</code> ç›¸åï¼Œå½“é¡¹ç›®ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„ç±»æ—¶ï¼Œè¯¥è‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆã€‚</li><li><code>@ConditionalOnProperty</code>ï¼šæ ¹æ®é¡¹ç›®ä¸­é…ç½®å±æ€§çš„å€¼æ¥åˆ¤æ–­è‡ªåŠ¨é…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆã€‚æ¯”å¦‚ï¼Œå¦‚æœé…ç½®å±æ€§ <code>spring.datasource.url</code> æœ‰ç‰¹å®šçš„å€¼ï¼Œé‚£ä¹ˆç›¸å…³çš„æ•°æ®æºè‡ªåŠ¨é…ç½®ç±»å¯èƒ½ä¼šæ ¹æ®è¿™ä¸ªå€¼æ¥è¿›ä¸€æ­¥è°ƒæ•´é…ç½®ã€‚</li><li><code>@ConditionalOnBean</code>ï¼šå½“Springå®¹å™¨ä¸­å·²ç»å­˜åœ¨æŒ‡å®šçš„Beanæ—¶ï¼Œè¯¥è‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆã€‚</li><li><code>@ConditionalOnMissingBean</code>ï¼šå½“Springå®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„Beanæ—¶ï¼Œè¯¥è‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆã€‚</li></ul></li></ul><p><strong>4. è‡ªåŠ¨é…ç½®é€»è¾‘æ‰§è¡Œï¼š</strong></p><ul><li><p>å½“ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»é€šè¿‡æ¡ä»¶æ³¨è§£åˆ¤æ–­æ»¡è¶³ç”Ÿæ•ˆæ¡ä»¶åï¼Œå®ƒå°±ä¼šæ‰§è¡Œå†…éƒ¨çš„é…ç½®é€»è¾‘ã€‚è¿™é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p></li><li><ul><li>**å®šä¹‰Beanï¼š**è‡ªåŠ¨é…ç½®ç±»ä¼šåœ¨Springå®¹å™¨ä¸­å®šä¹‰å„ç§æ‰€éœ€çš„Beanã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>DataSourceAutoConfigure</code> ä¸­ï¼Œä¼šå®šä¹‰æ•°æ®æºç›¸å…³çš„Beanï¼Œå¦‚ <code>DataSource</code> æœ¬èº«ã€è¿æ¥æ± ç›¸å…³çš„Beanç­‰ã€‚</li><li><strong>è®¾ç½®å±æ€§</strong>ï¼šä¼šæ ¹æ®é¡¹ç›®ä¸­ç°æœ‰çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰æ¥è®¾ç½®è¿™äº›Beançš„å±æ€§ã€‚æ¯”å¦‚ï¼Œæ ¹æ® <code>spring.datasource.url</code>ã€<code>spring.datasource.username</code>ã€<code>spring.datasource.password</code> ç­‰å±æ€§å€¼æ¥è®¾ç½®æ•°æ®æºBeançš„è¿æ¥å‚æ•°ã€‚</li><li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šå°†å®šä¹‰å¥½çš„Beanè¿›è¡Œç›¸äº’ä¹‹é—´çš„ä¾èµ–æ³¨å…¥ï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤ŸååŒå·¥ä½œã€‚ä¾‹å¦‚ï¼Œå°†æ•°æ®æºBeanæ³¨å…¥åˆ°éœ€è¦ä½¿ç”¨æ•°æ®æºçš„å…¶ä»–ç»„ä»¶ï¼ˆå¦‚æ•°æ®è®¿é—®å±‚çš„ <code>Repository</code> ç±»ï¼‰ä¸­ã€‚</li></ul></li></ul><p><strong>5. è‡ªå®šä¹‰é…ç½®è¦†ç›–ï¼š</strong></p><ul><li>è™½ç„¶Spring Bootæœ‰å¼ºå¤§çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œä½†å¼€å‘äººå‘˜ä»ç„¶å¯ä»¥æ ¹æ®é¡¹ç›®çš„ç‰¹æ®Šéœ€æ±‚å¯¹è‡ªåŠ¨é…ç½®è¿›è¡Œå®šåˆ¶ã€‚</li><li>å¦‚æœå¼€å‘äººå‘˜åœ¨é¡¹ç›®ä¸­æ·»åŠ äº†è‡ªå®šä¹‰çš„é…ç½®ç±»æˆ–è€…åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†ä¸è‡ªåŠ¨é…ç½®ç›¸å…³çš„å±æ€§å€¼ï¼Œé‚£ä¹ˆè¿™äº›è‡ªå®šä¹‰çš„é…ç½®ä¼šè¦†ç›–è‡ªåŠ¨é…ç½®ç±»ä¸­çš„ç›¸åº”éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¼€å‘äººå‘˜åœ¨é…ç½®æ–‡ä»¶ä¸­æ˜ç¡®è®¾ç½®äº† <code>spring.datasource.url</code> çš„å€¼ï¼Œé‚£ä¹ˆè‡ªåŠ¨é…ç½®ç±»å°±ä¼šæŒ‰ç…§è¿™ä¸ªå€¼æ¥é…ç½®æ•°æ®æºï¼Œè€Œä¸æ˜¯æŒ‰ç…§é»˜è®¤çš„æ¨æ–­æ–¹å¼ã€‚</li></ul><h3 id="_11-springboot-å¯åŠ¨äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#_11-springboot-å¯åŠ¨äº‹é¡¹"><span>11. SpringBoot å¯åŠ¨äº‹é¡¹</span></a></h3><ol><li>åŠ è½½é…ç½®ï¼šSpring Boot å¯åŠ¨æ—¶é¦–å…ˆåŠ è½½<code>META-INF/spring.factories</code>æ–‡ä»¶ï¼Œè¿™ä¸ª æ–‡ä»¶æŒ‡å®šäº†å„ä¸ªè‡ªåŠ¨é…ç½®ç±»çš„è·¯å¾„ã€‚</li><li>æ‰«æè‡ªåŠ¨é…ç½®ç±»ï¼šæ ¹æ®<code>spring.factories</code>ä¸­é…ç½®çš„è‡ªåŠ¨é…ç½®ç±»è·¯å¾„ï¼ŒSpring Boot ä¼šæ‰«æè¿™äº›è‡ªåŠ¨é…ç½®ç±»ï¼Œå¹¶å°†å®ƒä»¬å®ä¾‹åŒ–ã€‚</li><li>æ¡ä»¶åˆ¤æ–­ï¼šé€šè¿‡æ¡ä»¶æ³¨è§£ï¼Œå¦‚<code>@ConditionalOnClass</code>ã€<code>@ConditionalOnProperty</code> ç­‰ï¼Œå†³å®šæ˜¯å¦åº”ç”¨è¯¥è‡ªåŠ¨é…ç½®ç±»ã€‚</li><li>è‡ªåŠ¨é…ç½®ï¼šæ ¹æ®è‡ªåŠ¨é…ç½®ç±»ä¸­çš„ä»£ç é€»è¾‘ï¼Œè‡ªåŠ¨é…ç½®ç›¸åº”çš„ç»„ä»¶ï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“è¿æ¥æ± ã€Web æœåŠ¡å™¨ã€æ—¥å¿—ç­‰ã€‚</li><li>æ³¨å†Œç»„ä»¶ï¼šå°†è‡ªåŠ¨é…ç½®çš„ç»„ä»¶æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ï¼Œä½¿å…¶å¯ä»¥è¢«åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚</li><li>å¯åŠ¨åº”ç”¨ï¼šæ‰§è¡Œåº”ç”¨ç¨‹åºçš„å¯åŠ¨é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼šåˆå§‹åŒ–ã€åŠ è½½æ•°æ®ã€å¯åŠ¨å®šæ—¶ä»»åŠ¡ç­‰ã€‚</li></ol><h3 id="_12-spring-security" tabindex="-1"><a class="header-anchor" href="#_12-spring-security"><span>12. Spring Security</span></a></h3><p>æ§åˆ¶è¯·æ±‚æƒé™çš„æ–¹æ³•ï¼š</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324616.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ul><li><code>permitAll()</code>ï¼šæ— æ¡ä»¶å…è®¸ä»»ä½•å½¢å¼è®¿é—®ï¼Œä¸ç®¡ä½ ç™»å½•è¿˜æ˜¯æ²¡æœ‰ç™»å½•ã€‚</li><li><code>anonymous()</code>ï¼šå…è®¸åŒ¿åè®¿é—®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç™»å½•æ‰å¯ä»¥è®¿é—®ã€‚</li><li><code>denyAll()</code>ï¼šæ— æ¡ä»¶æ‹’ç»ä»»ä½•å½¢å¼çš„è®¿é—®ã€‚</li><li><code>authenticated()</code>ï¼šåªå…è®¸å·²è®¤è¯çš„ç”¨æˆ·è®¿é—®ã€‚</li><li><code>fullyAuthenticated()</code>ï¼šåªå…è®¸å·²ç»ç™»å½•æˆ–è€…é€šè¿‡ remember-me ç™»å½•çš„ç”¨æˆ·è®¿é—®ã€‚</li><li><code>hasRole(String)</code> : åªå…è®¸æŒ‡å®šçš„è§’è‰²è®¿é—®ã€‚</li><li><code>hasAnyRole(String)</code> : æŒ‡å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªè§’è‰²ï¼Œæ»¡è¶³å…¶ä¸€çš„ç”¨æˆ·å³å¯è®¿é—®ã€‚</li><li><code>hasAuthority(String)</code>ï¼šåªå…è®¸å…·æœ‰æŒ‡å®šæƒé™çš„ç”¨æˆ·è®¿é—®ã€‚</li><li><code>hasAnyAuthority(String)</code>ï¼šæŒ‡å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªæƒé™ï¼Œæ»¡è¶³å…¶ä¸€çš„ç”¨æˆ·å³å¯è®¿é—®ã€‚</li><li><code>hasIpAddress(String)</code> : åªå…è®¸æŒ‡å®š ip çš„ç”¨æˆ·è®¿é—®ã€‚</li></ul><h3 id="_13-mybatis-å’Œ-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_13-mybatis-å’Œ-åŒºåˆ«"><span>13. MyBatis #{} å’Œ ${} åŒºåˆ«</span></a></h3><p># ç”¨äºå‚æ•°çš„æ›¿æ¢ï¼Œå¹¶ä¼šè¿›è¡Œé¢„ç¼–è¯‘å¤„ç†ï¼Œä»¥é˜²æ­¢ SQL æ³¨å…¥ã€‚</p><p>$ å°†å˜é‡ç›´æ¥æ›¿æ¢è¿› SQL è¯­å¥ï¼Œæœ‰ SQL æ³¨å…¥é£é™©ã€‚</p><h3 id="_14-mybatis-åŠ¨æ€-sql" tabindex="-1"><a class="header-anchor" href="#_14-mybatis-åŠ¨æ€-sql"><span>14. MyBatis åŠ¨æ€ SQL</span></a></h3><p>MyBatis åŠ¨æ€ sql å¯ä»¥è®©æˆ‘ä»¬åœ¨ xml æ˜ å°„æ–‡ä»¶å†…ï¼Œä»¥æ ‡ç­¾çš„å½¢å¼ç¼–å†™åŠ¨æ€ sqlï¼Œå®Œæˆé€»è¾‘åˆ¤æ–­å’ŒåŠ¨æ€æ‹¼æ¥ sql çš„åŠŸèƒ½ã€‚å…¶æ‰§è¡ŒåŸç†ä¸ºï¼Œä½¿ç”¨ OGNL ä» sql å‚æ•°å¯¹è±¡ä¸­è®¡ç®—è¡¨è¾¾å¼çš„å€¼ï¼Œæ ¹æ®è¡¨è¾¾å¼çš„å€¼åŠ¨æ€æ‹¼æ¥ sqlï¼Œä»¥æ­¤æ¥å®ŒæˆåŠ¨æ€ sql çš„åŠŸèƒ½ã€‚</p><p>MyBatis æä¾›äº† 9 ç§åŠ¨æ€ sql æ ‡ç­¾:</p><ul><li><code>&lt;if&gt;&lt;/if&gt;</code></li><li><code>&lt;where&gt;&lt;/where&gt;(trim,set)</code></li><li><code>&lt;choose&gt;&lt;/choose&gt;ï¼ˆwhen, otherwiseï¼‰</code></li><li><code>&lt;foreach&gt;&lt;/foreach&gt;</code></li><li><code>&lt;bind/&gt;</code></li></ul><h3 id="_15-resulttype-å’Œ-resultmap-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_15-resulttype-å’Œ-resultmap-çš„åŒºåˆ«"><span>15. ResultType å’Œ ResultMap çš„åŒºåˆ«</span></a></h3><p>Â¢ å¦‚æœæ•°æ®åº“ç»“æœé›†ä¸­çš„åˆ—åå’Œè¦å°è£…å®ä½“çš„å±æ€§åå®Œå…¨ä¸€è‡´çš„è¯ç”¨resultType å±æ€§</p><p>Â¢ å¦‚æœæ•°æ®åº“ç»“æœé›†ä¸­çš„åˆ—åå’Œè¦å°è£…å®ä½“çš„å±æ€§åæœ‰ä¸ä¸€è‡´çš„æƒ…å†µç”¨resultMap å±æ€§ï¼Œé€šè¿‡ resultMap æ‰‹åŠ¨å»ºç«‹å¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒresultMap è¦é…ç½®ä¸€ä¸‹è¡¨å’Œç±»çš„ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œæ‰€ä»¥è¯´å°±ç®—ä½ çš„å­—æ®µåå’Œä½ çš„å®ä½“ç±»çš„å±æ€§åä¸ä¸€æ ·ä¹Ÿæ²¡å…³ç³»ï¼Œéƒ½ä¼šç»™ä½ æ˜ å°„å‡ºæ¥</p><h3 id="_16-mybatis-å’Œ-hibernate-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_16-mybatis-å’Œ-hibernate-åŒºåˆ«"><span>16. Mybatis å’Œ Hibernate åŒºåˆ«</span></a></h3><p>Hibernate å±äºå…¨è‡ªåŠ¨ ORM æ˜ å°„å·¥å…·ï¼Œä½¿ç”¨ Hibernate æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–è€…å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œå¯ä»¥æ ¹æ®å¯¹è±¡å…³ç³»æ¨¡å‹ç›´æ¥è·å–ï¼Œæ‰€ä»¥å®ƒæ˜¯å…¨è‡ªåŠ¨çš„ã€‚</p><p>MyBatis åœ¨æŸ¥è¯¢å…³è”å¯¹è±¡æˆ–å…³è”é›†åˆå¯¹è±¡æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ sql æ¥å®Œæˆï¼Œæ‰€ä»¥ï¼Œç§°ä¹‹ä¸ºåŠè‡ªåŠ¨ ORM æ˜ å°„å·¥å…·ã€‚</p><h3 id="_17-mybatisplus-å¸¸ç”¨æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_17-mybatisplus-å¸¸ç”¨æ³¨è§£"><span>17. MyBatisPlus å¸¸ç”¨æ³¨è§£</span></a></h3><ol><li>@TableNameï¼šç”¨äºæŒ‡å®šå®ä½“ç±»å¯¹åº”çš„æ•°æ®åº“è¡¨åã€‚è¯¥æ³¨è§£å¯ä»¥åœ¨å®ä½“ç±»ä¸Šæ·»åŠ ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜ å°„åˆ°æŒ‡å®šçš„æ•°æ®åº“è¡¨ã€‚ä¾‹å¦‚ï¼š@TableName(&quot;user&quot;)ã€‚</li><li>@TableFieldï¼šç”¨äºæŒ‡å®šå®ä½“ç±»çš„å­—æ®µå¯¹åº”çš„æ•°æ®åº“è¡¨çš„å­—æ®µåã€‚è¯¥æ³¨è§£å¯ä»¥åœ¨å®ä½“ç±»çš„å­—æ®µä¸Šæ·»åŠ ï¼Œè¡¨ç¤ºè¯¥å­—æ®µæ˜ å°„åˆ°æŒ‡å®šçš„æ•°æ®åº“è¡¨å­—æ®µã€‚ä¾‹å¦‚ï¼š@TableField(&quot;name&quot;)ã€‚</li><li>@TableIdï¼šç”¨äºæŒ‡å®šå®ä½“ç±»çš„å­—æ®µä½œä¸ºæ•°æ®åº“è¡¨çš„ä¸»é”®ã€‚è¯¥æ³¨è§£å¯ä»¥åœ¨å®ä½“ç±»çš„å­—æ®µä¸Šæ·»åŠ ï¼Œè¡¨ç¤ºè¯¥å­—æ®µä½œä¸ºæ•°æ®åº“è¡¨çš„ä¸»é”®ã€‚ä¾‹å¦‚ï¼š@TableId(value = &quot;id&quot;, type= IdType.AUTO)ã€‚</li><li>@Versionï¼šç”¨äºæŒ‡å®šå®ä½“ç±»çš„å­—æ®µä½œä¸ºä¹è§‚é”çš„ç‰ˆæœ¬å­—æ®µã€‚ä¹è§‚é”æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œé€šè¿‡ç‰ˆæœ¬å·çš„å˜åŒ–æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹ã€‚è¯¥æ³¨è§£å¯ä»¥åœ¨å®ä½“ç±»çš„å­—æ®µä¸Šæ·»åŠ ï¼Œè¡¨ç¤ºè¯¥å­—æ®µä½œä¸ºä¹è§‚é”çš„ç‰ˆæœ¬å­—æ®µã€‚ä¾‹å¦‚ï¼š@Versionã€‚</li></ol><h3 id="_18-springcloud-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_18-springcloud-ç»„ä»¶"><span>18. SpringCloud ç»„ä»¶</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324617.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324618.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ol><li>æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆEureka/Nacosï¼‰ï¼šEureka æ˜¯ä¸€ä¸ªç”¨äºå®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„ç»„ä»¶ï¼Œæ ä¾›äº†æœåŠ¡æ³¨å†Œä¸­å¿ƒæ¥ç®¡ç†æœåŠ¡å®ä¾‹çš„æ³¨å†Œå’Œå‘ç°ï¼Œä½¿å¾—æœåŠ¡ä¹‹é—´å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œé€šä¿¡å’Œ è°ƒç”¨ã€‚</li><li>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼ˆRibbon/Nginxï¼‰ï¼šRibbon æ˜¯ä¸€ä¸ªç”¨äºåœ¨å®¢æˆ·ç«¯å®ç°è´Ÿè½½å‡è¡¡çš„ç»„ä»¶ï¼Œ å®ƒå¯ä»¥æ ¹æ®ä¸€å®šçš„ç­–ç•¥é€‰æ‹©åˆé€‚çš„æœåŠ¡å®ä¾‹è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚</li><li>æœåŠ¡è°ƒç”¨ï¼ˆFeignï¼‰ï¼šFeign æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„æœåŠ¡è°ƒç”¨ç»„ä»¶ï¼Œå®ƒåŸºäºæ³¨è§£å’ŒåŠ¨æ€ä»£ç†ï¼Œ å¯ä»¥è®©å¼€å‘è€…ä½¿ç”¨ç®€å•çš„æ¥å£å®šä¹‰æœåŠ¡è°ƒç”¨ï¼Œè€Œæ— éœ€å…³æ³¨åº•å±‚çš„å…·ä½“å®ç°ã€‚</li><li>ç†”æ–­å™¨ï¼ˆHystrix/Sentinelï¼‰ï¼šHystrix æ˜¯ä¸€ä¸ªç”¨äºå®ç°æœåŠ¡å®¹é”™å’Œç†”æ–­çš„ç»„ä»¶ï¼Œå®ƒå¯ä»¥ä¿æŠ¤ ç³»ç»Ÿå…å—æœåŠ¡æ•…éšœçš„å½±å“ï¼Œé€šè¿‡å®ç°æœåŠ¡é™çº§ã€ç†”æ–­å’Œéš”ç¦»ç­‰æœºåˆ¶ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ å’Œå¯é æ€§ã€‚</li><li>ç½‘å…³ï¼ˆGatewayï¼‰ï¼šZuul æˆ– Gateway æ˜¯ç”¨äºæ„å»ºç»Ÿä¸€ API ç½‘å…³çš„ç»„ä»¶ï¼Œå®ƒå¯ä»¥ å®ç°è¯·æ±‚çš„è·¯ç”±ã€è¿‡æ»¤å’Œè½¬å‘ç­‰åŠŸèƒ½ï¼Œæä¾›äº†å¯¹å¤–çš„ç»Ÿä¸€çš„æ¥å…¥ç‚¹ï¼Œå¹¶å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œ å®‰å…¨éªŒè¯ã€é™æµå’Œç›‘æ§ç­‰ã€‚</li></ol><h3 id="_19-eureka-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_19-eureka-å·¥ä½œåŸç†"><span>19. Eureka å·¥ä½œåŸç†</span></a></h3><p>Eureka æ˜¯ä¸€ä¸ªç”¨äºå®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„ç»„ä»¶ã€‚</p><p>é€šè¿‡æœåŠ¡æ³¨å†Œï¼Œåœ¨å¯åŠ¨æ—¶å°†æœåŠ¡å®ä¾‹ä¿¡æ¯æ³¨å†Œåˆ° Eureka æ³¨å†Œä¸­å¿ƒï¼›</p><p>é€šè¿‡å¿ƒè·³æ£€æµ‹ä¸ç»­çº¦ï¼Œå®ç°æœåŠ¡å®ä¾‹çš„å¥åº·çŠ¶æ€ç›‘æµ‹ï¼›</p><p>é€šè¿‡æœåŠ¡å‘ç°ï¼Œè®©æ¶ˆè´¹è€…èƒ½å¤Ÿä»æ³¨å†Œä¸­å¿ƒè·å–å¯ç”¨çš„æœåŠ¡åˆ—è¡¨ï¼›</p><p>é€šè¿‡è´Ÿè½½å‡è¡¡å’Œå®¹é”™å¤„ç†ï¼Œå®ç°æœåŠ¡è°ƒç”¨çš„è´Ÿè½½å‡è¡¡å’Œå®¹é”™èƒ½åŠ›ã€‚</p><h3 id="_20-nacos-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_20-nacos-å·¥ä½œåŸç†"><span>20. Nacos å·¥ä½œåŸç†</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324619.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>Nacos å®ç°äº†æœåŠ¡å‘ç°ã€æœåŠ¡é…ç½®ã€æœåŠ¡å…ƒæ•°æ®åŠæµé‡ç®¡ç†ã€‚</p><p>å®ƒæä¾›äº†æœåŠ¡æä¾›è€…å°†æœåŠ¡æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œå¹¶è®©è®©ä»æ³¨å†Œä¸­å¿ƒå‘ç°æœåŠ¡å®ä¾‹çš„èƒ½åŠ›ã€‚</p><p>æ³¨å†Œä¸­å¿ƒé€šè¿‡ä¸¤ç§ç±»å‹çš„å®ä¾‹è¿›è¡Œç®¡ç†ï¼ŒåŒ…æ‹¬ä¸´æ—¶å®ä¾‹å’Œéä¸´æ—¶å®ä¾‹ã€‚ä¸´æ—¶å®ä¾‹ä¼šå®šæœŸå‘é€</p><p>å¿ƒè·³ä¿¡å·ä»¥ä¿æŒè¿æ¥ï¼Œè€Œéä¸´æ—¶å®ä¾‹åˆ™é•¿æ—¶é—´æä¾›æœåŠ¡ã€‚æ³¨å†Œä¸­å¿ƒé€šè¿‡å®šæœŸçš„å¿ƒè·³æ£€æŸ¥æ¥ç›‘æµ‹å®ä¾‹çš„å¯ç”¨æ€§ï¼Œå¹¶åœ¨é•¿æ—¶é—´æ²¡æœ‰å¿ƒè·³ä¿¡å·æ—¶å°†å¤±æ•ˆå®ä¾‹å‰”é™¤ã€‚</p><h3 id="_21-nacos-å’Œ-eureka-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_21-nacos-å’Œ-eureka-çš„åŒºåˆ«"><span>21. Nacos å’Œ Eureka çš„åŒºåˆ«</span></a></h3><p>Nacos å’Œ Eureka éƒ½æ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ç»„ä»¶ï¼Œä½† Nacos æ¯” Eureka åŠŸèƒ½æ›´ä¸°å¯Œï¼Œé™¤äº†æœåŠ¡æ³¨å†Œä¸å‘ç°å¤–ï¼Œè¿˜æä¾›äº†æœåŠ¡é…ç½®å’Œç®¡ç†åŠŸèƒ½ã€‚</p><p>Nacos æ”¯æŒå¤šç§æœåŠ¡å‘ç°åè®®ï¼Œå¦‚ DNSã€HTTP å’Œ gRPCï¼Œè€Œ Eureka ä»…æ”¯æŒè‡ªèº«çš„åè®®ã€‚</p><p>Nacos è¿˜å…·å¤‡æ›´å¥½çš„å¯æ‰©å±•æ€§å’Œå®¹é”™æ€§ï¼Œèƒ½å¤Ÿåº”å¯¹æ›´å¤æ‚çš„åœºæ™¯ã€‚</p><h3 id="_22-ribbon-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_22-ribbon-å·¥ä½œåŸç†"><span>22. Ribbon å·¥ä½œåŸç†</span></a></h3><p>Ribbonæ˜¯åŸºäº Netflix Ribbon å®ç°çš„ä¸€å¥—å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡å·¥å…·ï¼ŒRibbonå®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—çš„å®Œå–„çš„é…ç½®ï¼Œå¦‚è¶…æ—¶ï¼Œé‡è¯•ç­‰ã€‚</p><p>ç›®å‰ä¸»æµçš„è´Ÿè½½æ–¹æ¡ˆåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><p>â€¢ é›†ä¸­å¼è´Ÿè½½å‡è¡¡ï¼šåœ¨æ¶ˆè´¹è€…å’ŒæœåŠ¡æä¾›æ–¹ä¸­é—´ä½¿ç”¨ç‹¬ç«‹çš„ä»£ç†æ–¹å¼è¿›è¡Œè´Ÿè½½ï¼Œæœ‰ç¡¬ä»¶çš„ï¼ˆæ¯”å¦‚ F5ï¼‰ï¼Œä¹Ÿæœ‰è½¯ä»¶çš„ï¼ˆæ¯”å¦‚ Nginxï¼‰ã€‚</p><p>â€¢ å®¢æˆ·ç«¯æ ¹æ®è‡ªå·±çš„è¯·æ±‚æƒ…å†µåšè´Ÿè½½å‡è¡¡ï¼šRibbon å°±å±äºå®¢æˆ·ç«¯è‡ªå·±åšè´Ÿè½½å‡è¡¡ã€‚</p><p>å¸¸è§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼š</p><p>â€¢ éšæœºï¼šé€šè¿‡éšæœºé€‰æ‹©æœåŠ¡è¿›è¡Œæ‰§è¡Œï¼Œä¸€èˆ¬è¿™ç§æ–¹å¼ä½¿ç”¨è¾ƒå°‘;</p><p>â€¢ è½®è¯¢ï¼šè´Ÿè½½å‡è¡¡é»˜è®¤å®ç°æ–¹å¼ï¼Œè¯·æ±‚æ¥ä¹‹åæ’é˜Ÿå¤„ç†;</p><p>â€¢ åŠ æƒè½®è¯¢ï¼šé€šè¿‡å¯¹æœåŠ¡å™¨æ€§èƒ½çš„åˆ†å‹ï¼Œç»™é«˜é…ç½®ï¼Œä½è´Ÿè½½çš„æœåŠ¡å™¨åˆ†é…æ›´é«˜çš„æƒé‡ï¼Œå‡è¡¡å„ä¸ªæœåŠ¡å™¨çš„å‹åŠ›;</p><p>â€¢ åœ°å€å“ˆå¸Œï¼ˆIP hashï¼‰ï¼šé€šè¿‡å®¢æˆ·ç«¯è¯·æ±‚çš„åœ°å€çš„HASHå€¼å–æ¨¡æ˜ å°„è¿›è¡ŒæœåŠ¡å™¨è°ƒåº¦ã€‚</p><p>â€¢ æœ€å°é“¾æ¥æ•°ï¼šå³ä½¿è¯·æ±‚å‡è¡¡äº†ï¼Œå‹åŠ›ä¸ä¸€å®šä¼šå‡è¡¡ï¼Œæœ€å°è¿æ¥æ•°æ³•å°±æ˜¯æ ¹æ®æœåŠ¡å™¨çš„è¿æ¥æƒ…å†µï¼Œæ¯”å¦‚è¯·æ±‚ç§¯å‹æ•°ç­‰å‚æ•°ï¼Œå°†è¯·æ±‚åˆ†é…åˆ°å½“å‰å‹åŠ›æœ€å°çš„æœåŠ¡å™¨ä¸Šã€‚</p><h3 id="_23-feign-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_23-feign-å·¥ä½œåŸç†"><span>23. Feign å·¥ä½œåŸç†</span></a></h3><p>Feign æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ Web æœåŠ¡å®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–å’Œä¼˜åŒ–æœåŠ¡ä¹‹é—´çš„ HTTP é€šä¿¡ï¼Œå¯ä»¥åšåˆ°ä½¿ç”¨ HTTP è¯·æ±‚è¿œç¨‹æœåŠ¡æ—¶å°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·çš„ä½“éªŒã€‚</p><ol><li>æ¥å£å®šä¹‰ï¼šå¼€å‘è€…é€šè¿‡å®šä¹‰ Java æ¥å£æ¥æè¿°æœåŠ¡é—´çš„é€šä¿¡åè®®ï¼ŒåŒ…æ‹¬ URLã€è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å‚æ•°ç­‰ã€‚</li><li>ä»£ç†ç”Ÿæˆï¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼ŒFeign ä¼šæ ¹æ®æ¥å£å®šä¹‰ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</li><li>è¯·æ±‚å‘é€ï¼šå½“è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼ŒFeign ä¼šæ ¹æ®æ–¹æ³•çš„æ³¨è§£å’Œå‚æ•°ç”Ÿæˆ HTTPè¯·æ±‚ï¼Œå¹¶å‘é€ç»™ç›®æ ‡æœåŠ¡ã€‚</li><li>è´Ÿè½½å‡è¡¡ï¼šFeign é›†æˆäº†è´Ÿè½½å‡è¡¡ç»„ä»¶ï¼ˆå¦‚ Ribbonï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å®ä¾‹ã€‚</li><li>å“åº”å¤„ç†ï¼šç›®æ ‡æœåŠ¡å¤„ç†å®Œè¯·æ±‚åï¼Œå°†å“åº”è¿”å›ç»™ Feign å®¢æˆ·ç«¯ã€‚</li><li>ç»“æœè§£æï¼šFeign ä¼šæ ¹æ®æ¥å£å®šä¹‰å’Œæ³¨è§£ï¼Œå°† HTTP å“åº”è§£æä¸º Java å¯¹è±¡ï¼Œå¹¶è¿”å›ç»™è°ƒç”¨è€…ã€‚</li></ol><p>æ€»ç»“èµ·æ¥ï¼ŒFeign çš„å·¥ä½œåŸç†å°±æ˜¯æ ¹æ®æ¥å£å®šä¹‰ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡å‘é€ HTTPè¯·æ±‚ç»™ç›®æ ‡æœåŠ¡ï¼Œå¹¶å°†å“åº”è§£æä¸º Java å¯¹è±¡è¿”å›ç»™è°ƒç”¨è€…ã€‚è¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ç®€æ´çš„æ¥å£å®šä¹‰æ¥å®ç°æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚</p><h3 id="_24-hystrix-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_24-hystrix-å·¥ä½œåŸç†"><span>24. Hystrix å·¥ä½œåŸç†</span></a></h3><p>Hystrix æ˜¯ä¸€ä¸ªç”¨äºå®ç°æœåŠ¡å®¹é”™å’Œç†”æ–­çš„åº“ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­èµ·åˆ°äº†ä¿æŠ¤ç³»ç»Ÿå…å—æœåŠ¡æ•…éšœçš„å½±å“çš„ä½œç”¨ã€‚</p><ol><li>ç†”æ–­æ¡ä»¶ï¼š</li></ol><ul><li>Hystrix æ ¹æ®ä¸€å®šçš„è§„åˆ™ç›‘æ§æ‰§è¡Œçš„æœåŠ¡è¯·æ±‚ï¼Œå½“é”™è¯¯ç‡è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œè§¦å‘ç†”æ–­ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœåœ¨ 10 ç§’å†…çš„è¯·æ±‚é”™è¯¯ç‡è¶…è¿‡ 50%ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚</li></ul><ol><li>ç†”æ–­åçš„å¤„ç†ï¼š</li></ol><ul><li>å½“ç†”æ–­è§¦å‘åï¼ŒHystrix ä¼šåœæ­¢è¯·æ±‚è¯¥æœåŠ¡çš„å‘é€ï¼Œè€Œæ˜¯å¿«é€Ÿè¿”å›ä¸€ä¸ªé¢„è®¾çš„fallbackï¼ˆé™çº§ï¼‰å“åº”æˆ–ç©ºå“åº”ã€‚</li><li>åœ¨ç†”æ–­æ‰“å¼€æœŸé—´ï¼ŒHystrix è¿˜ä¼šå®šæ—¶å°è¯•å‘èµ·ä¸€äº›è¯·æ±‚è§‚å¯Ÿè¯¥æœåŠ¡æ˜¯å¦å·²ç»æ¢å¤ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸç‡è¾ƒé«˜ï¼Œç†”æ–­å™¨å°†é€æ¸å…³é—­ã€‚</li></ul><ol><li>ç†”æ–­çš„å¥½å¤„ï¼š</li></ol><ul><li>å‡å°‘è”åŠ¨æ•ˆåº”ï¼šå½“ä¸€ä¸ªæœåŠ¡å‘ç”Ÿæ•…éšœæˆ–å“åº”æ—¶é—´è¿‡é•¿æ—¶ï¼Œä¼ ç»Ÿçš„åšæ³•æ˜¯ç­‰å¾…å®ƒè¶… æ—¶å¹¶å†æ¬¡å°è¯•ã€‚è¿™ä¼šæµªè´¹ç³»ç»Ÿèµ„æºï¼Œè€Œ Hystrix çš„ç†”æ–­æœºåˆ¶å¯ä»¥å¿«é€Ÿå¤±è´¥å¹¶è¿”å›é™çº§çš„ å“åº”ï¼Œå‡å°‘äº†ç­‰å¾…å’Œèµ„æºæµªè´¹ã€‚</li><li>æé«˜ç³»ç»Ÿç¨³å®šæ€§ï¼šé€šè¿‡ç†”æ–­æœºåˆ¶ï¼Œå½“æŸä¸ªæœåŠ¡å‡ºç°æ•…éšœæˆ–ä¸å¯ç”¨æ—¶ï¼Œå¯ä»¥å¿«é€Ÿåˆ‡ æ¢åˆ°å¤‡ç”¨çš„é™çº§é€»è¾‘ï¼Œä¿æŠ¤æ•´ä¸ªç³»ç»Ÿå…å—æœåŠ¡æ•…éšœçš„å½±å“ã€‚</li><li>é¢„é˜²é›ªå´©æ•ˆåº”ï¼šå½“ä¸€ä¸ªæœåŠ¡ä¸å¯ç”¨æˆ–å“åº”ç¼“æ…¢æ—¶ï¼Œä¼ ç»Ÿçš„åšæ³•æ˜¯ç»§ç»­å‘é€è¯·æ±‚ï¼Œå¯¼è‡´å¤±è´¥çš„è¯·æ±‚å †ç§¯å¹¶æœ€ç»ˆè€—å°½ç³»ç»Ÿèµ„æºã€‚è€Œ Hystrix çš„ç†”æ–­æœºåˆ¶èƒ½å¤Ÿé¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå‡å°‘äº†å¯¹å¤±è´¥æœåŠ¡çš„ä¾èµ–ï¼Œæé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li></ul><p>æ€»è€Œè¨€ä¹‹ï¼ŒHystrix çš„ç†”æ–­æœºåˆ¶é€šè¿‡ç›‘æ§æœåŠ¡è¯·æ±‚çš„é”™è¯¯ç‡ï¼Œå½“é”™è¯¯ç‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œå¿«é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨é€»è¾‘ï¼Œé¿å…äº†å¯¹å¤±è´¥æœåŠ¡çš„ä¸å¿…è¦è¯·æ±‚ï¼Œæé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚ç†”æ–­å¯ä»¥åœ¨æ•…éšœå‘ç”Ÿæ—¶å¿«é€Ÿå¤±è´¥å¹¶è¿”å›é™çº§å“åº”ï¼Œé¿å…èµ„æºæµªè´¹å’Œé›ªå´©æ•ˆåº”ï¼Œä¿æŠ¤ç³»ç»Ÿå…å—æ•…éšœæœåŠ¡çš„å½±å“ã€‚</p><h3 id="_25-sentinel-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_25-sentinel-å·¥ä½œåŸç†"><span>25. Sentinel å·¥ä½œåŸç†</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324620.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324621.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324622.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324623.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324624.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_26-gateway-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_26-gateway-å·¥ä½œåŸç†"><span>26. Gateway å·¥ä½œåŸç†</span></a></h3><p>Gatewayï¼ˆç½‘å…³ï¼‰æ˜¯ä¸€ç§åœ¨å¾®æœåŠ¡æ¶æ„ä¸­èµ·åˆ°è¯·æ±‚è½¬å‘ã€è·¯ç”±å’Œè¿‡æ»¤ä½œç”¨çš„ç»„ä»¶ã€‚å®ƒä½œä¸ºç³»ç»Ÿå…¥å£ï¼Œæ¥æ”¶æ‰€æœ‰çš„å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬è½¬å‘åˆ°ç›¸åº”çš„æœåŠ¡ä¸Šè¿›è¡Œå¤„ç†ã€‚</p><ol><li>è¯·æ±‚è·¯ç”±ï¼šå¯ä»¥æ ¹æ®è¯·æ±‚çš„ URL è·¯å¾„å°†è¯·æ±‚åŠ¨æ€è·¯ç”±åˆ°ä¸åŒçš„æœåŠ¡å®ä¾‹ä¸Šï¼Œå®ç°åŠ¨æ€è·¯ç”±çš„åŠŸèƒ½ã€‚</li><li>è´Ÿè½½å‡è¡¡ï¼šå¯ä»¥æ ¹æ®è´Ÿè½½å‡è¡¡ç­–ç•¥å°†è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å®ä¾‹ä¸­ï¼Œå¹³è¡¡è´Ÿè½½ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚</li><li>å®‰å…¨æ§åˆ¶ï¼šå¯ä»¥é›†æˆè®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œå¯¹è¯·æ±‚è¿›è¡Œé‰´æƒï¼Œä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚</li><li>è¯·æ±‚è¿‡æ»¤ï¼šå¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œè¿‡æ»¤å’Œæ ¡éªŒï¼Œä¾‹å¦‚å¯¹è¯·æ±‚è¿›è¡ŒéªŒè¯ã€è¯·æ±‚å‚æ•°è½¬æ¢ã€è¯·æ±‚æ—¥å¿—è®°å½•ç­‰ã€‚</li><li>é™çº§å’Œç†”æ–­ï¼šå¯ä»¥å¯¹æœåŠ¡è¿›è¡Œé™çº§å’Œç†”æ–­å¤„ç†ï¼Œå½“æœåŠ¡å‡ºç°æ•…éšœæˆ–è¶…æ—¶æ—¶ï¼Œè¿”å›é¢„è®¾çš„å“åº”æˆ–è½¬å‘åˆ°å¤‡ç”¨æœåŠ¡ã€‚</li><li>ç›‘æ§å’Œç»Ÿè®¡ï¼šå¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œç›‘æ§å’Œç»Ÿè®¡ï¼Œè®°å½•è¯·æ±‚çš„å“åº”æ—¶é—´ã€æµé‡ç­‰æŒ‡æ ‡ï¼Œæ–¹ä¾¿åˆ†æç³»ç»Ÿæ€§èƒ½å’Œé—®é¢˜æ’æŸ¥ã€‚</li></ol><h3 id="_27-skywalking-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_27-skywalking-å·¥ä½œåŸç†"><span>27. Skywalking å·¥ä½œåŸç†</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324625.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324626.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ¢é’ˆï¼šåŸºäºä¸åŒçš„æ¥æºå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„, ä½†ä½œç”¨éƒ½æ˜¯æ”¶é›†æ•°æ®, å°†æ•°æ®æ ¼å¼åŒ–ä¸ºSkyWalking é€‚ç”¨çš„æ ¼å¼.</p><p>å¹³å°åç«¯ï¼šæ”¯æŒæ•°æ®èšåˆ, æ•°æ®åˆ†æä»¥åŠé©±åŠ¨æ•°æ®æµä»æ¢é’ˆåˆ°ç”¨æˆ·ç•Œé¢çš„æµç¨‹ã€‚åˆ†æåŒ…æ‹¬Skywalking åŸç”Ÿè¿½è¸ªå’Œæ€§èƒ½æŒ‡æ ‡ä»¥åŠç¬¬ä¸‰æ–¹æ¥æºï¼ŒåŒ…æ‹¬ Istio åŠ Envoy telemetry , Zipkin è¿½è¸ªæ ¼å¼åŒ–ç­‰ã€‚</p><p>å­˜å‚¨ï¼šé€šè¿‡å¼€æ”¾çš„æ’ä»¶åŒ–çš„æ¥å£å­˜æ”¾ SkyWalking æ•°æ®. ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ—¢æœ‰çš„å­˜å‚¨ç³»ç»Ÿ, å¦‚ElasticSearch, H2 æˆ– MySQL é›†ç¾¤(Sharding-Sphere ç®¡ç†),ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå·±å®ç°ä¸€ä¸ªå­˜å‚¨ç³»ç»Ÿ. å½“ç„¶, æˆ‘ä»¬éå¸¸æ¬¢è¿ä½ è´¡çŒ®æ–°çš„å­˜å‚¨ç³»ç»Ÿå®ç°ã€‚</p><p>UIï¼šä¸€ä¸ªåŸºäºæ¥å£é«˜åº¦å®šåˆ¶åŒ–çš„Webç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥å¯è§†åŒ–æŸ¥çœ‹å’Œç®¡ç† SkyWalking æ•°æ®</p><h2 id="å…«ã€åˆ†å¸ƒå¼" tabindex="-1"><a class="header-anchor" href="#å…«ã€åˆ†å¸ƒå¼"><span>å…«ã€åˆ†å¸ƒå¼</span></a></h2><h3 id="_1-rabbitmq-å·¥ä½œæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_1-rabbitmq-å·¥ä½œæ¨¡å¼"><span>1. RabbitMQ å·¥ä½œæ¨¡å¼</span></a></h3><p>RabbitMQ æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„å¼€æºæ¶ˆæ¯ä»£ç†ï¼Œå®ƒæ”¯æŒå¤šç§å·¥ä½œæ¨¡å¼ã€‚</p><p>1**. ç®€å•æ¨¡å¼ï¼ˆSimple Modeï¼‰**</p><ul><li>**<strong>ç‰¹ç‚¹</strong>ï¼š**ä½¿ç”¨å•ä¸ªç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°å•ä¸ªæ¶ˆè´¹è€…ã€‚</li><li>**åº”ç”¨åœºæ™¯ï¼š**é€‚ç”¨äºç®€å•çš„ä»»åŠ¡åˆ†å‘ï¼Œæ¶ˆæ¯çš„é¡ºåºä¸é‡è¦ã€‚</li></ul><p><strong>2. å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ï¼ˆWork Queue Modeï¼‰</strong></p><ul><li>**ç‰¹ç‚¹ï¼š**å¤šä¸ªç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆè´¹è€…ã€‚</li><li>**åº”ç”¨åœºæ™¯ï¼š**é€‚ç”¨äºä»»åŠ¡åˆ†å‘ï¼Œæé«˜ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</li></ul><p><strong>3. å‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼ˆPublish/Subscribe Modeï¼‰</strong></p><ul><li>**ç‰¹ç‚¹ï¼š**æ¶ˆæ¯å‘é€è€…å°†æ¶ˆæ¯å‘å¸ƒåˆ°äº¤æ¢æœºï¼Œå¤šä¸ªæ¶ˆè´¹è€…é€šè¿‡ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—æ¥æ”¶æ¶ˆæ¯ã€‚</li><li>**åº”ç”¨åœºæ™¯ï¼š**é€‚ç”¨äºæ¶ˆæ¯å¹¿æ’­ï¼Œä¾‹å¦‚ï¼šæ—¥å¿—è®°å½•ã€å®æ—¶èŠå¤©ã€æ–°é—»å‘å¸ƒç­‰ã€‚</li></ul><p><strong>4. è·¯ç”±æ¨¡å¼ï¼ˆRouting Modeï¼‰</strong></p><ul><li>**ç‰¹ç‚¹ï¼š**æ¶ˆæ¯å‘é€è€…é€šè¿‡æŒ‡å®šä¸åŒçš„è·¯ç”±é”®å°†æ¶ˆæ¯å‘é€åˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºæ ¹æ®è·¯ç”±é”®å°†æ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„é˜Ÿåˆ—ã€‚</li><li>**åº”ç”¨åœºæ™¯ï¼š**é€‚ç”¨äºæ¶ˆæ¯çš„æœ‰é€‰æ‹©æ€§åœ°è·¯ç”±ï¼Œä¾‹å¦‚æ ¹æ®æ¶ˆæ¯å†…å®¹è¿›è¡Œè¿‡æ»¤ã€‚</li></ul><p><strong>5. ä¸»é¢˜æ¨¡å¼ï¼ˆTopic Modeï¼‰</strong></p><ul><li>**ç‰¹ç‚¹ï¼š**æ¶ˆæ¯å‘é€è€…é€šè¿‡æŒ‡å®šä¸»é¢˜ï¼ˆå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼‰å°†æ¶ˆæ¯å‘é€åˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºæ ¹æ®ä¸»é¢˜å°†æ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„é˜Ÿåˆ—ã€‚</li><li>**åº”ç”¨åœºæ™¯ï¼š**é€‚ç”¨äºæ¶ˆæ¯çš„å¤šæ ·æ€§è·¯ç”±ï¼Œä¾‹å¦‚æ ¹æ®ä¸åŒçš„ä¸»é¢˜è¿›è¡Œè¿‡æ»¤å’Œé€‰æ‹©ã€‚</li></ul><h3 id="_2-rabbitmq-æ¶ˆæ¯å¯é æ€§" tabindex="-1"><a class="header-anchor" href="#_2-rabbitmq-æ¶ˆæ¯å¯é æ€§"><span>2. RabbitMQ æ¶ˆæ¯å¯é æ€§</span></a></h3><p><strong>ç”Ÿäº§ç«¯ï¼ˆProducerï¼‰çš„å¯é æ€§ä¿è¯æªæ–½ï¼š</strong></p><p>å‘å¸ƒè€…ç¡®è®¤ï¼ˆPublisher Confirmsï¼‰ï¼šç”Ÿäº§è€…å¯ä»¥é€šè¿‡å¯ç”¨å‘å¸ƒè€…ç¡®è®¤æœºåˆ¶ï¼Œåœ¨æ¶ˆæ¯æˆåŠŸå‘é€ç»™ RabbitMQåæ¥æ”¶ç¡®è®¤å›æ‰§ï¼Œç¡®ä¿æ¶ˆæ¯å·²è¢«æ­£ç¡®æ¥æ”¶ã€‚</p><p><strong>æœåŠ¡ç«¯ï¼ˆBrokerï¼‰çš„å¯é æ€§ä¿è¯æªæ–½ï¼š</strong></p><ul><li>æŒä¹…åŒ–ï¼ˆDurabilityï¼‰ï¼šé˜Ÿåˆ—å’Œäº¤æ¢æœºå¯è®¾ç½®ä¸ºæŒä¹…åŒ–ï¼Œä½¿å…¶åœ¨ RabbitMQ é‡æ–°å¯åŠ¨åä¸ä¼šä¸¢å¤±ã€‚</li><li>æŒä¹…åŒ–æ¶ˆæ¯ï¼šè¢«æ ‡è®°ä¸ºæŒä¹…åŒ–çš„æ¶ˆæ¯ï¼Œä¼šå†™å…¥ç£ç›˜ï¼Œç¡®ä¿æ¶ˆæ¯åœ¨æœåŠ¡å™¨æ•…éšœæ—¶ä¸ä¼šä¸¢å¤±ã€‚</li><li>äº‹åŠ¡æœºåˆ¶ï¼ˆTransactionsï¼‰ï¼šå¯é€šè¿‡å¯ç”¨äº‹åŠ¡æœºåˆ¶å°†ä¸€ç»„æ“ä½œåŒ…è£…åœ¨äº‹åŠ¡ä¸­ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸæ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä¿è¯æ¶ˆæ¯çš„åŸå­æ€§å’Œä¸€è‡´æ€§å¤„ç†ã€‚</li></ul><p><strong>æ¶ˆè´¹ç«¯ï¼ˆConsumerï¼‰çš„å¯é æ€§ä¿è¯æªæ–½ï¼š</strong></p><p>æ‰‹åŠ¨æ¶ˆæ¯ç¡®è®¤ï¼ˆManual Message Acknowledgementï¼‰ï¼šæ¶ˆè´¹è€…åœ¨å¤„ç†å®Œæ¶ˆæ¯åï¼Œå‘é€ç¡®è®¤å›æ‰§ç»™ RabbitMQï¼Œå‘ŠçŸ¥æ¶ˆæ¯å·²è¢«æˆåŠŸå¤„ç†ï¼ŒRabbitMQ å¯ä»¥åˆ é™¤è¯¥æ¶ˆæ¯ã€‚</p><h3 id="_3-rabbitmq-æ­»ä¿¡é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_3-rabbitmq-æ­»ä¿¡é˜Ÿåˆ—"><span>3. RabbitMQ æ­»ä¿¡é˜Ÿåˆ—</span></a></h3><p>RabbitMQ çš„æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼‰æ˜¯ç”¨æ¥å¤„ç†æ— æ³•è¢«æ­£å¸¸æ¶ˆè´¹æˆ–å¤„ç†çš„æ¶ˆæ¯çš„ç‰¹æ®Šé˜Ÿåˆ—ã€‚</p><ol><li>**æ¶ˆæ¯è¢«æ‹’ç»ï¼ˆRejectedï¼‰ï¼š**å½“æ¶ˆè´¹è€…æ‹’ç»æ¶ˆè´¹æ¶ˆæ¯æˆ–è€…æ¶ˆæ¯è¶…è¿‡æ¶ˆè´¹è€…çš„æœ€å¤§é‡è¯•æ¬¡æ•°æ—¶ï¼Œæ¶ˆæ¯ä¼šè¢«å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</li><li>**æ¶ˆæ¯è¿‡æœŸï¼ˆExpiredï¼‰ï¼š**å¦‚æœæ¶ˆæ¯åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰è¢«æ¶ˆè´¹è€…å¤„ç†ï¼Œå³è¶…è¿‡äº†æ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´ï¼Œè¯¥æ¶ˆæ¯ä¹Ÿä¼šè¢«å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</li><li><strong>é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦ï¼ˆQueue Length Limitï¼‰</strong>ï¼šå½“é˜Ÿåˆ—è¾¾åˆ°äº†å®šä¹‰çš„æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œæ–°çš„æ¶ˆæ¯æ— æ³•è¿›å…¥é˜Ÿåˆ—ï¼Œä¼šå°†æ—§çš„æ¶ˆæ¯å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</li></ol><p>é€šè¿‡é…ç½®æ­»ä¿¡äº¤æ¢æœºï¼ˆDead Letter Exchangeï¼‰å’Œæ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼‰çš„ç»‘å®šå…³ç³»ï¼Œå¯ä»¥å°†æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„æ­»ä¿¡é˜Ÿåˆ—ä¸­ï¼Œä»¥ä¾¿è¿›è¡Œåç»­çš„å¤„ç†æˆ–åˆ†æã€‚</p><h3 id="_4-rabbitmq-æ¶ˆæ¯é‡å¤æ¶ˆè´¹" tabindex="-1"><a class="header-anchor" href="#_4-rabbitmq-æ¶ˆæ¯é‡å¤æ¶ˆè´¹"><span>4. RabbitMQ æ¶ˆæ¯é‡å¤æ¶ˆè´¹</span></a></h3><ol><li>æ¶ˆè´¹è€…åº”ç”¨ç¨‹åºåœ¨å¤„ç†æ¶ˆæ¯æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼Œå¯¼è‡´æ¶ˆæ¯ç¡®è®¤ï¼ˆackï¼‰æ²¡æœ‰å‘é€ç»™ RabbitMQï¼Œä»è€Œå¯¼è‡´ RabbitMQ å°†æ¶ˆæ¯é‡æ–°åˆ†å‘ç»™å…¶ä»–æ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹ã€‚</li><li>ç½‘ç»œé—®é¢˜æˆ–æ¶ˆè´¹è€…åº”ç”¨ç¨‹åºé‡å¯æ—¶ï¼ŒRabbitMQ æ— æ³•æ”¶åˆ°æ¶ˆæ¯ç¡®è®¤ï¼Œä¹Ÿä¼šå¯¼è‡´æ¶ˆæ¯é‡æ–°åˆ†å‘ã€‚</li></ol><p><strong>è§£å†³æªæ–½ï¼š</strong></p><ol><li>æ¶ˆè´¹ç«¯å¹‚ç­‰æ€§ï¼šæ¶ˆè´¹è€…åº”ç”¨ç¨‹åºåœ¨å¤„ç†æ¶ˆæ¯æ—¶éœ€è¦ä¿è¯å¹‚ç­‰æ€§ï¼Œå³æ— è®ºæ¥æ”¶åˆ°ç›¸åŒçš„æ¶ˆæ¯å¤šå°‘æ¬¡ï¼Œå¤„ç†ç»“æœéƒ½ä¿æŒä¸€è‡´ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ã€å¹‚ç­‰å­˜å‚¨ç­‰æ–¹å¼å®ç°ã€‚</li><li>æ¶ˆæ¯å»é‡ï¼šæ¶ˆè´¹è€…åº”ç”¨ç¨‹åºåœ¨å¤„ç†æ¶ˆæ¯ä¹‹å‰ï¼Œå¯ä»¥åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸­ç»´æŠ¤ä¸€ä¸ªæ¶ˆæ¯è®°å½•è¡¨ï¼Œè®°å½•å·²ç»å¤„ç†è¿‡çš„æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚åœ¨æ¥æ”¶åˆ°æ–°æ¶ˆæ¯æ—¶ï¼Œå…ˆæ£€æŸ¥è¯¥æ¶ˆæ¯æ˜¯å¦å·²ç»å¤„ç†è¿‡ï¼Œå¦‚æœå·²ç»å¤„ç†è¿‡ï¼Œåˆ™å¿½ç•¥é‡å¤æ¶ˆæ¯ã€‚</li><li>æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼šæ¶ˆè´¹è€…åº”åŠæ—¶åœ°å‘é€æ¶ˆæ¯ç¡®è®¤ï¼ˆackï¼‰ç»™ RabbitMQï¼Œè¡¨ç¤ºå·²ç»æˆåŠŸå¤„ç†äº†æ¶ˆæ¯ã€‚è¿™æ · RabbitMQ å°±ä¸ä¼šå°†æ¶ˆæ¯é‡æ–°åˆ†å‘ç»™å…¶ä»–æ¶ˆè´¹è€…ã€‚</li></ol><p>ä¿è¯æ¶ˆè´¹ç«¯çš„å¹‚ç­‰æ€§æ˜¯è§£å†³æ¶ˆæ¯é‡å¤æ¶ˆè´¹é—®é¢˜çš„å…³é”®ã€‚é€šè¿‡åœ¨æ¶ˆè´¹è€…åº”ç”¨ç¨‹åºä¸­å®ç°å¹‚ç­‰æ€§é€»è¾‘å’Œæ¶ˆæ¯å»é‡æªæ–½ï¼Œå¯ä»¥ä¿è¯å³ä½¿åŒä¸€æ¡æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Œä¹Ÿä¸ä¼šå¯¹ç³»ç»Ÿäº§ç”Ÿé‡å¤ã€ä¸ä¸€è‡´çš„å½±å“ã€‚</p><p>æœ€ç®€å›ç­”ï¼šRabbitMQ æ¶ˆæ¯é‡å¤æ¶ˆè´¹é—®é¢˜æ˜¯ç”±æ¶ˆè´¹è€…åº”ç”¨ç¨‹åºé”™è¯¯æˆ–ç½‘ç»œé—®é¢˜å¯¼è‡´çš„ï¼Œé€ æˆæ¶ˆæ¯æœªå¾—åˆ°ç¡®è®¤ï¼Œä»è€Œé‡æ–°åˆ†å‘ã€‚ä¸ºäº†è§£å†³é—®é¢˜ï¼Œå¯ä»¥å®ç°æ¶ˆè´¹ç«¯çš„å¹‚ç­‰æ€§æ¥ä¿è¯æ¶ˆæ¯å¤„ç†ç»“æœä¸€è‡´ï¼ŒåŒæ—¶ä½¿ç”¨æ¶ˆæ¯å»é‡å’ŒåŠæ—¶å‘é€æ¶ˆæ¯ç¡®è®¤ï¼Œé¿å…é‡å¤æ¶ˆè´¹ã€‚ç¡®ä¿æ¶ˆè´¹å¹‚ç­‰æ€§æ˜¯è§£å†³æ¶ˆæ¯é‡å¤æ¶ˆè´¹é—®é¢˜çš„é‡è¦æªæ–½ä¹‹ä¸€ã€‚</p><h3 id="_5-rocketmq-ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#_5-rocketmq-ç‰¹ç‚¹"><span>5. RocketMQ ç‰¹ç‚¹</span></a></h3><p>RocketMQä½œä¸ºä¸€æ¬¾çº¯javaã€åˆ†å¸ƒå¼ã€é˜Ÿåˆ—æ¨¡å‹çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œæ”¯æŒäº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ã€æ‰¹é‡æ¶ˆæ¯ã€å®šæ—¶æ¶ˆæ¯ã€æ¶ˆæ¯å›æº¯ç­‰ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><p>â€¢ æ”¯æŒå‘å¸ƒ/è®¢é˜…ï¼ˆPub/Subï¼‰å’Œç‚¹å¯¹ç‚¹ï¼ˆP2Pï¼‰æ¶ˆæ¯æ¨¡å‹</p><p>â€¢ åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­å¯é çš„å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰å’Œä¸¥æ ¼çš„é¡ºåºä¼ é€’ ï¼ˆRocketMQå¯ä»¥ä¿è¯ä¸¥æ ¼çš„æ¶ˆæ¯é¡ºåºï¼Œè€ŒActiveMQæ— æ³•ä¿è¯ï¼‰</p><p>â€¢ æ”¯æŒæ‹‰ï¼ˆpullï¼‰å’Œæ¨ï¼ˆpushï¼‰ä¸¤ç§æ¶ˆæ¯æ¨¡å¼ã€‚pullå…¶å®å°±æ˜¯æ¶ˆè´¹è€…ä¸»åŠ¨ä»MQä¸­å»æ‹‰æ¶ˆæ¯ï¼Œè€Œpushåˆ™åƒrabbit MQä¸€æ ·ï¼Œæ˜¯MQç»™æ¶ˆè´¹è€…æ¨é€æ¶ˆæ¯</p><p>â€¢ æ”¯æŒå¤šç§æ¶ˆæ¯åè®®ï¼Œå¦‚ JMSã€MQTT ç­‰</p><p>â€¢ åˆ†å¸ƒå¼é«˜å¯ç”¨çš„éƒ¨ç½²æ¶æ„,æ»¡è¶³è‡³å°‘ä¸€æ¬¡æ¶ˆæ¯ä¼ é€’è¯­ä¹‰ï¼ˆRocketMQåŸç”Ÿå°±æ˜¯æ”¯æŒåˆ†å¸ƒå¼çš„ï¼Œè€ŒActiveMQåŸç”Ÿå­˜åœ¨å•ç‚¹æ€§ï¼‰</p><p>â€¢ æä¾› docker é•œåƒç”¨äºéš”ç¦»æµ‹è¯•å’Œäº‘é›†ç¾¤éƒ¨ç½²</p><p>â€¢ æä¾›é…ç½®ã€æŒ‡æ ‡å’Œç›‘æ§ç­‰åŠŸèƒ½ä¸°å¯Œçš„ Dashboard</p><h3 id="_6-rocketmq-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_6-rocketmq-æ¦‚å¿µ"><span>6. RocketMQ æ¦‚å¿µ</span></a></h3><p><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324627.png" alt="img" loading="lazy"><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324628.png" alt="img" loading="lazy"></p><h3 id="_7-rocketmq-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#_7-rocketmq-ç»„ä»¶"><span>7. RocketMQ ç»„ä»¶</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324629.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324630.png" alt="img" loading="lazy"><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324631.png" alt="img" loading="lazy"><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324632.png" alt="img" loading="lazy"></p><h3 id="_8-rocketmq-äº¤äº’è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_8-rocketmq-äº¤äº’è¿‡ç¨‹"><span>8. RocketMQ äº¤äº’è¿‡ç¨‹</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324633.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_9-å¸¸ç”¨ä¸­é—´ä»¶æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#_9-å¸¸ç”¨ä¸­é—´ä»¶æ¯”è¾ƒ"><span>9. å¸¸ç”¨ä¸­é—´ä»¶æ¯”è¾ƒ</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324634.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_10-xxl-job-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_10-xxl-job-æ¦‚å¿µ"><span>10. XXL-JOB æ¦‚å¿µ</span></a></h3><p>xxl-job æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œä¸»è¦ç”¨äºè§£å†³å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å®šæ—¶è°ƒåº¦å’Œä»»åŠ¡ç®¡ç†é—®é¢˜ã€‚å®ƒæä¾›äº†å¯è§†åŒ–çš„ä»»åŠ¡ç®¡ç†ç•Œé¢å’Œå¼ºå¤§çš„è°ƒåº¦åŠŸèƒ½ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å®ç°å®šæ—¶ä»»åŠ¡çš„é…ç½®ã€ç›‘æ§å’Œæ‰§è¡Œã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324635.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_11-xxl-job-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_11-xxl-job-ä½¿ç”¨"><span>11. XXL-JOB ä½¿ç”¨</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324636.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_12-seata-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_12-seata-ä½¿ç”¨"><span>12. SEATA ä½¿ç”¨</span></a></h3><ol><li>åœ¨æœåŠ¡ä¸­å¼•å…¥ <strong>Seata ä¾èµ–</strong>ã€‚</li><li>é…ç½® Seata çš„<strong>å…¨å±€äº‹åŠ¡åˆ‡é¢</strong>å’Œ<strong>æ•°æ®æºä»£ç†</strong>ã€‚</li><li>åœ¨éœ€è¦è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸Šæ·»åŠ **@GlobalTransactional æ³¨è§£**ã€‚</li><li>åœ¨ä»£ç ä¸­è¿›è¡Œæ­£å¸¸çš„ä¸šåŠ¡æ“ä½œï¼ŒSeata ä¼šè‡ªåŠ¨è¿›è¡Œäº‹åŠ¡ç®¡ç†å’Œåè°ƒã€‚</li></ol><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324637.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="ä¹ã€éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ä¹ã€éƒ¨ç½²"><span>ä¹ã€éƒ¨ç½²</span></a></h2><h3 id="_1-linux" tabindex="-1"><a class="header-anchor" href="#_1-linux"><span>1. Linux</span></a></h3><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324638.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_2-docker" tabindex="-1"><a class="header-anchor" href="#_2-docker"><span>2. Docker</span></a></h3><p>Dockeræ˜¯åŸºäºGoè¯­è¨€å®ç°çš„äº‘å¼€æºé¡¹ç›®ã€‚Dockerçš„ä¸»è¦ç›®æ ‡æ˜¯â€œBuildï¼ŒShip and Run Any App,Anywhereâ€ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…ã€åˆ†å‘ã€éƒ¨ç½²ã€è¿è¡Œç­‰ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œä½¿ç”¨æˆ·çš„APPï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªWEBåº”ç”¨æˆ–æ•°æ®åº“åº”ç”¨ç­‰ç­‰ï¼‰åŠå…¶è¿è¡Œç¯å¢ƒèƒ½å¤Ÿåšåˆ°â€œä¸€æ¬¡é•œåƒï¼Œå¤„å¤„è¿è¡Œâ€ã€‚</p><figure><img src="https://gcore.jsdelivr.net/gh/Twritetime/Images-0@main/blog-writetime/20241217211324639.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_3-nginx" tabindex="-1"><a class="header-anchor" href="#_3-nginx"><span>3. Nginx</span></a></h3><ul><li>**åå‘ä»£ç†ï¼š**å°†å¤šå°æœåŠ¡å™¨ä»£ç†æˆä¸€å°æœåŠ¡å™¨ã€‚</li><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šå°†å¤šä¸ªè¯·æ±‚å‡åŒ€çš„åˆ†é…åˆ°å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå‡è½»æ¯å°æœåŠ¡å™¨çš„å‹åŠ›ï¼Œæé«˜æœåŠ¡çš„ååé‡ã€‚</li><li><strong>åŠ¨é™åˆ†ç¦»</strong>ï¼šnginx å¯ä»¥ç”¨ä½œé™æ€æ–‡ä»¶çš„ç¼“å­˜æœåŠ¡å™¨ï¼Œæé«˜è®¿é—®é€Ÿåº¦</li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Twritetime/edit/main/src/posts/Java/å…«è‚¡æ–‡.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2024/12/21 22:07:24</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1124964426@qq.com">Twritetime</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a class="route-link auto-link next" href="/posts/Java/%E9%9D%A2%E7%BB%8F.html" aria-label="é¢ç»"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">é¢ç»<span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright">Copyright Â© 2024 Twritetime</div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BGV7llRK.js" defer></script>
  </body>
</html>
